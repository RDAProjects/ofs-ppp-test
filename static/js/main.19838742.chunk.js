(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1107:function(e,t){},1109:function(e,t){},112:function(e,t,a){"use strict";function n(e){e||(e=new Date);var t=1;return e.getMonth()<=8&&(t=0),"FY"+(e.getFullYear()+t).toString().substring(2)}a.d(t,"a",function(){return n})},1202:function(e,t,a){},1230:function(e,t,a){},1232:function(e,t,a){"use strict";a.r(t);a(637),a(838);var n=a(0),r=a.n(n),o=a(24),i=a.n(o),s=a(65);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c,l,p,u,d,h,m,y=a(295),f=a(42),g=a(1),v=a.n(g),b=a(44),O=a(6),w=a(12),k=a(13),E=a(15),P=a(14),C=a(16),x=a(2),j=a(74),A=a(1337),S=a(1346),T=a(68),D=a(4),N=a(1353),R=a(11),I=a(1341),F=a(1342),L=a(1335),M=a(1303),U=a(129),B=function(){function e(){Object(w.a)(this,e),this.reportingList=void 0,this.reportingListName="OFS PPP Reporting List",this.reportingListViewName="BPM Reporting List Excel View"}return Object(k.a)(e,[{key:"getRootWebTitle",value:function(){var e=Object(O.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","OFS Business Process Management Portal (BPMP)");case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getCurrentUser",value:function(){var e=Object(O.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.currentUser){e.next=4;break}return e.abrupt("return",this.currentUser);case 4:return e.next=6,U.b.web.currentUser.get();case 6:return this.currentUser=e.sent,e.abrupt("return",this.currentUser);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getContextInfo",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ctx){e.next=2;break}return e.abrupt("return",this.ctx);case 2:return e.next=4,U.b.site.getContextInfo();case 4:return t=e.sent,this.ctx=t,e.abrupt("return",t);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getSharePointOrigin",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t,a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return e.next=4,this.getContextInfo();case 4:return t=e.sent,a=t.WebFullUrl,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getTitle",value:function(e){return e&&e.Title?e.Title:""}},{key:"isAdministrator",value:function(e){var t=this;if(!e)return!1;var a=!1;return["Administrator","SLOWBURN\\Administrator","Loesley, Barton (Contractor)","Guerrero, Jaime (Contractor)","Patil, Ravindra (Contractor)","Agrinya, Emmanuel (Contractor)","Weiner, Joseph (Contractor)","Nicoletos, Anthony (Contractor)"].forEach(function(n){t.getTitle(e).toUpperCase()===n.toUpperCase()&&(a=!0)}),a}},{key:"isSystemAdministrator",value:function(e){var t=this,a=!1;return["Administrator","SLOWBURN\\Administrator","Loesley, Barton (Contractor)","Guerrero, Jaime (Contractor)","Patil, Ravi (Contractor)","Agrinya, Emmanuel (Contractor)","Weiner, Joseph (Contractor)"].forEach(function(n){t.getTitle(e).toUpperCase()===n.toUpperCase()&&(a=!0)}),a}},{key:"buildReportingItemList",value:function(){var e=Object(O.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getReportingList();case 2:if(this.reportingList=e.sent,this.reportingList){e.next=6;break}return e.next=6,this.createReportingSPList();case 6:return e.abrupt("return",!0);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getReportingList",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=void 0,e.prev=1,e.next=4,U.b.web.lists.getByTitle(this.reportingListName).get();case 4:t=e.sent,e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",void 0);case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}},e,this,[[1,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"createReportingSPList",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t,a,n,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[{name:"ProcessId",type:"SP.FieldText",kind:2},{name:"ProcessType",type:"SP.FieldText",kind:2},{name:"TransactionDate",type:"SP.FieldText",kind:2},{name:"FiscalYear",type:"SP.FieldText",kind:2},{name:"ProcessName",type:"SP.FieldText",kind:2},{name:"FunctionArea",type:"SP.FieldText",kind:2},{name:"Status",type:"SP.FieldText",kind:2},{name:"SignOffDate",type:"SP.FieldText",kind:2},{name:"SignOffUser",type:"SP.FieldText",kind:2},{name:"RejectionReason",type:"SP.FieldText",kind:2},{name:"RejectionDate",type:"SP.FieldText",kind:2},{name:"RejectionUser",type:"SP.FieldText",kind:2},{name:"Notes",type:"SP.FieldText",kind:3},{name:"InitiatedOn",type:"SP.FieldText",kind:2},{name:"initiatedBy",type:"SP.FieldText",kind:2},{name:"RelatedRejectedProcessInstanceId",type:"SP.FieldText",kind:2},{name:"RelatedRejectedName",type:"SP.FieldText",kind:2},{name:"ModifiedBy",type:"SP.FieldText",kind:2},{name:"UnSigned",type:"SP.FieldText",kind:2},{name:"ActivityId",type:"SP.FieldText",kind:2},{name:"ActivitySequence",type:"SP.FieldText",kind:1},{name:"ActivityDescription",type:"SP.FieldText",kind:3},{name:"ActivityTooltip",type:"SP.FieldText",kind:3},{name:"ActivityDependsOnPrevActivity",type:"SP.FieldText",kind:2},{name:"ActivityStatus",type:"SP.FieldText",kind:2},{name:"ActivityResponsibleParty",type:"SP.FieldText",kind:2},{name:"ActivityReviewedBy",type:"SP.FieldText",kind:2},{name:"ActivityReviewedOn",type:"SP.FieldText",kind:2},{name:"ActivityCompletedBy",type:"SP.FieldText",kind:2},{name:"ActivityCompletedOn",type:"SP.FieldText",kind:2},{name:"ActivityNotRequiredSetUser",type:"SP.FieldText",kind:2},{name:"ActivityNotRequiredSetDate",type:"SP.FieldText",kind:2},{name:"ActivityComments",type:"SP.FieldText",kind:3},{name:"MandR Status",type:"SP.FieldText",kind:2},{name:"MandR Signoff Date",type:"SP.FieldText",kind:2},{name:"MandR Signoff By",type:"SP.FieldText",kind:2},{name:"MandR Exception Exists",type:"SP.FieldText",kind:2}],e.next=3,U.b.web.lists.ensure(this.reportingListName);case 3:if(!(a=e.sent).created){e.next=85;break}n=0;case 6:if(!(n<t.length)){e.next=12;break}return e.next=9,a.list.fields.add(t[n].name,t[n].type,{FieldTypeKind:t[n].kind,Filterable:!0,Hidden:!1,EnforceUniqueValues:!1});case 9:n++,e.next=6;break;case 12:return e.next=14,a.list.views.add(this.reportingListViewName,!1,{ViewQuery:"<OrderBy><FieldRef Name='ProcessId' /><FieldRef Name='ActivitySequence' Ascending='True' /></OrderBy>"});case 14:return r=e.sent,e.next=17,r.view.fields.add("ProcessId");case 17:return e.next=19,r.view.fields.add("ProcessType");case 19:return e.next=21,r.view.fields.add("FunctionArea");case 21:return e.next=23,r.view.fields.add("ProcessName");case 23:return e.next=25,r.view.fields.add("ActivitySequence");case 25:return e.next=27,r.view.fields.add("TransactionDate");case 27:return e.next=29,r.view.fields.add("FiscalYear");case 29:return e.next=31,r.view.fields.add("Status");case 31:return e.next=33,r.view.fields.add("SignOffDate");case 33:return e.next=35,r.view.fields.add("SignOffUser");case 35:return e.next=37,r.view.fields.add("RejectionReason");case 37:return e.next=39,r.view.fields.add("RejectionDate");case 39:return e.next=41,r.view.fields.add("RejectionUser");case 41:return e.next=43,r.view.fields.add("Notes");case 43:return e.next=45,r.view.fields.add("InitiatedOn");case 45:return e.next=47,r.view.fields.add("initiatedBy");case 47:return e.next=49,r.view.fields.add("RelatedRejectedProcessInstanceId");case 49:return e.next=51,r.view.fields.add("RelatedRejectedName");case 51:return e.next=53,r.view.fields.add("ModifiedBy");case 53:return e.next=55,r.view.fields.add("UnSigned");case 55:return e.next=57,r.view.fields.add("ActivityDescription");case 57:return e.next=59,r.view.fields.add("ActivityTooltip");case 59:return e.next=61,r.view.fields.add("ActivityDependsOnPrevActivity");case 61:return e.next=63,r.view.fields.add("ActivityStatus");case 63:return e.next=65,r.view.fields.add("ActivityResponsibleParty");case 65:return e.next=67,r.view.fields.add("ActivityReviewedBy");case 67:return e.next=69,r.view.fields.add("ActivityReviewedOn");case 69:return e.next=71,r.view.fields.add("ActivityCompletedBy");case 71:return e.next=73,r.view.fields.add("ActivityCompletedOn");case 73:return e.next=75,r.view.fields.add("ActivityNotRequiredSetUser");case 75:return e.next=77,r.view.fields.add("ActivityNotRequiredSetDate");case 77:return e.next=79,r.view.fields.add("ActivityComments");case 79:return e.next=81,r.view.fields.add("MandR Status");case 81:return e.next=83,r.view.fields.add("MandR Signoff Date");case 83:return e.next=85,r.view.fields.add("MandR Signoff By");case 85:return e.abrupt("return",{response:"".concat(this.reportingListName," was created.")});case 86:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getReportingListName",value:function(){return this.reportingListName}},{key:"getReportingListViewName",value:function(){return"".concat(this.reportingListName,"/").concat(this.reportingListViewName)}}]),e}(),q=a(97),V=a.n(q),_=function(){function e(t){Object(w.a)(this,e),t||(t=window.location.href),this._webFullUrl=t}return Object(k.a)(e,[{key:"getBaristaUrl",value:function(){var e=Object(O.a)(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return","".concat(this._webFullUrl,"_vti_bin/barista/v1/barista.svc/eval?c=").concat(encodeURIComponent(t)));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getTheAnswerToLifeTheUniverseAndEverything",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t,a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBaristaUrl("6*7");case 2:return t=e.sent,e.next=5,V.a.get(t);case 5:return a=e.sent,e.abrupt("return",a.data);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getRelativeScriptUrl",value:function(e){return e}},{key:"webFullUrl",get:function(){return this._webFullUrl}}]),e}(),z=a(265),W=a(31),Y=function(){function e(t,a){Object(w.a)(this,e),this._isProd=!0,null==t&&(t=window.location.href),this._webFullUrl=t,a&&!a.endsWith("/")&&(a="".concat(a,"/")),this._relativePath=a,this._axios=V.a.create({baseURL:"".concat(this._webFullUrl,"_vti_bin/barista/v1/barista.svc/eval")})}return Object(k.a)(e,[{key:"getRelativeScriptUrl",value:function(e){return this._relativePath?"".concat(this._relativePath).concat(e):e}},{key:"get",value:function(e,t){return t=Object(W.a)({},t,{method:"GET",params:Object(W.a)({},t&&t.params,{c:this.getRelativeScriptUrl(e),t:this._isProd?(new Date).getTime():void 0})}),this._axios.request(t)}},{key:"post",value:function(e,t){return t=Object(W.a)({},t,{method:"POST",params:Object(W.a)({},t&&t.params,{c:this.getRelativeScriptUrl(e)})}),this._axios.request(t)}},{key:"upload",value:function(e,t,a,n){var r=new FormData;return r.append("files[0]",a,t),fetch("".concat(this._webFullUrl,"_vti_bin/barista/v1/barista.svc/eval?c=").concat(this.getRelativeScriptUrl(e)),{headers:{"Content-Type":"multipart/form-data; boundary=----------------------------800859741242946661928004"},method:"POST",body:r})}},{key:"put",value:function(e,t){return t=Object(W.a)({},t,{method:"POST",params:Object(W.a)({},t&&t.params,{c:this.getRelativeScriptUrl(e)}),headers:Object(W.a)({},t&&t.headers,{"X-HTTP-Method":"PUT"})}),this._axios.request(t)}},{key:"delete",value:function(e,t){return t=Object(W.a)({},t,{method:"POST",params:Object(W.a)({},t&&t.params,{c:this.getRelativeScriptUrl(e)}),headers:Object(W.a)({},t&&t.headers,{"X-HTTP-Method":"DELETE"})}),this._axios.request(t)}},{key:"request",value:function(e){return this._axios.request(e)}},{key:"webFullUrl",get:function(){return this._webFullUrl}}]),e}(),H=a(26),K=a(98),G=(a(461),a(29)),J=a(112),Q=(c=function(){function e(t,a){Object(w.a)(this,e),this._userConfig="UserConfig",Object(K.a)(this,"selectedViewFilter",l,this),Object(K.a)(this,"filterConfig",p,this),Object(K.a)(this,"availableResponsibleParties",u,this),Object(K.a)(this,"filterViews",d,this),Object(K.a)(this,"areFiltersLoaded",h,this),Object(K.a)(this,"isConfiguredFiltersLoaded",m,this),this._baristaService=t,this._storage=a}return Object(k.a)(e,[{key:"loadViews",value:function(){var e=Object(O.a)(v.a.mark(function e(t){var a,n,r,o;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.areFiltersLoaded=!1,e.next=3,Promise.all([this.getPersonalFilters(t||"N/A"),this.getGlobalFilters()]);case 3:a=e.sent,n=Object(f.a)(a,2),r=n[0],o=n[1],this.filterViews=[].concat(Object(b.a)(r),Object(b.a)(o)),this.areFiltersLoaded=!0;case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"configureFilters",value:function(){var e=Object(O.a)(v.a.mark(function e(t){var a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a={categories:[],filters:[]},this.isConfiguredFiltersLoaded=!1,this.availableResponsibleParties.forEach(function(e){a.filters.push({key:e.text,category:"ResponsibleParty",label:e.text,DateRange:!1,LessThan:!1,Date:""})}),a.categories.push({key:"Keywords",name:"Keywords"}),a.categories.push({key:"FY",name:"Fiscal Year"}),a.categories.push({key:"FunctionalArea",name:"Functional Area"}),a.categories.push({key:"ResponsibleParty",name:"Responsible Party"}),a.categories.push({key:"status",name:"Status"}),a.categories.push({key:"TransactionDate",name:"Transaction Date"}),a.categories.push({key:"CreationDate",name:"Creation Date"}),a.categories.push({key:"CreatedBy",name:"Initiated By"}),a.filters.push({key:"Keyword",category:"Keywords",label:"Keyword",DateRange:!1,LessThan:!1,Date:""}),a.filters.push({key:"Active",category:"status",label:"Active",DateRange:!1,LessThan:!1,Date:""}),a.filters.push({key:"CompletedNotSigned",category:"status",label:"Completed But Not Signed",DateRange:!1,LessThan:!1,Date:""}),a.filters.push({key:"CompletedAndSigned",category:"status",label:"Completed And Signed",DateRange:!1,LessThan:!1,Date:""}),a.filters.push({key:"Initiated",category:"status",label:"Initiated",DateRange:!1,LessThan:!1,Date:""}),a.filters.push({key:"Rejected",category:"status",label:"Rejected",DateRange:!1,LessThan:!1,Date:""}),t.forEach(function(e){a.filters.push({key:e,category:"FY",label:e,DateRange:!1,LessThan:!1,Date:""})}),a.filters.push({key:"Transaction Starting Date",category:"TransactionDate",label:"Starting Date",DateRange:!0,LessThan:!1,Date:(new Date).toDateString()}),a.filters.push({key:"Transaction Ending Date",category:"TransactionDate",label:"Ending Date",DateRange:!0,LessThan:!0,Date:(new Date).toDateString()}),a.filters.push({key:"Creation Starting Date",category:"CreationDate",label:"Starting Date",DateRange:!0,LessThan:!1,Date:(new Date).toLocaleDateString("en-US")}),a.filters.push({key:"Creation Ending Date",category:"CreationDate",label:"Ending Date",DateRange:!0,LessThan:!0,Date:(new Date).toLocaleDateString("en-US")}),this.filterConfig=a,this.isConfiguredFiltersLoaded=!0;case 24:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"configureDataSpecificFilters",value:function(){var e=Object(O.a)(v.a.mark(function e(t){var a,n,r,o,i,s=this;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(a=t.map(function(e){return e.functionArea}),n=[],a.forEach(function(e){n.indexOf(e)<0&&n.push(e)}),r=t.map(function(e){return e.initiatedBy}),o=[],r.forEach(function(e){"undefined"!==typeof e&&0===o.filter(function(t){return t===e.displayName}).length&&o.push(e.displayName)}),i=this.filterConfig.filters.length;i--;)"CreatedBy"!==this.filterConfig.filters[i].category&&"FunctionalArea"!==this.filterConfig.filters[i].category||this.filterConfig.filters.splice(i,1);o.forEach(function(e){s.filterConfig.filters.push({key:e,category:"CreatedBy",label:e,DateRange:!1,LessThan:!1,Date:""})}),n.forEach(function(e){s.filterConfig.filters.push({key:e,category:"FunctionalArea",label:e,DateRange:!1,LessThan:!1,Date:""})});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"saveFilter",value:function(){var e=Object(O.a)(v.a.mark(function e(t,a){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.post("Personalization/saveFilter.js",{data:{filter:t,global:a}});case 2:return n=e.sent,e.abrupt("return",n.status);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"getFilterById",value:function(){var e=Object(O.a)(v.a.mark(function e(t){var a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.get("Personalization/getFilterById.js",{params:{filterId:t}});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"saveNotificationsToken",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.get("Personalization/saveNotificationsToken.js",{params:{}});case 2:return(t=e.sent)&&t.data&&t.data&&this._storage.setItem(this._userConfig,JSON.stringify(t.data)),e.abrupt("return",t.data);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getUserConfig",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t,a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._storage.getItem(this._userConfig))){e.next=5;break}return e.abrupt("return",JSON.parse(t));case 5:return e.next=7,this._baristaService.get("Personalization/getUserConfig.js",{params:{}});case 7:if(!((a=e.sent)&&a.data&&a.data)){e.next=11;break}return this._storage.setItem(this._userConfig,JSON.stringify(a.data)),e.abrupt("return",a.data);case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"deleteFilterById",value:function(){var e=Object(O.a)(v.a.mark(function e(t){var a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.delete("Personalization/deleteFilter.js",{data:{filterId:t}});case 2:return a=e.sent,e.next=5,this.loadViews();case 5:return e.abrupt("return",a.data);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"saveIncludeOwn",value:function(){var e=Object(O.a)(v.a.mark(function e(t){var a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.get("Personalization/saveIncludeOwn.js",{params:{value:t}});case 2:return(a=e.sent)&&a.data&&a.data&&this._storage.setItem(this._userConfig,JSON.stringify(a.data)),e.abrupt("return",a.data);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getDefaultFilterSet",value:function(e){e||(e=new Date);var t=new Date(e.getFullYear(),7,1),a=new Date(e.getFullYear(),11,1),n=new Date(e.getFullYear(),9,1),r=[];if(r.push({key:Object(J.a)(e),label:"Fiscal Year: "+Object(J.a)(e),category:"FY",DateRange:!1,LessThan:!1,Date:""}),t<=e&&e<=a){var o=new Date(e.getFullYear(),11);e>=n&&(o=new Date(e.getFullYear(),6)),r.push({key:Object(J.a)(o),label:"Fiscal Year: "+Object(J.a)(o),category:"FY",DateRange:!1,LessThan:!1,Date:""})}return r}},{key:"getDefaultFilter",value:function(){return{id:"",global:!1,name:"Default View",filterSet:this.getDefaultFilterSet()}}},{key:"getPersonalFilters",value:function(){var e=Object(O.a)(v.a.mark(function e(t){var a,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.get("Personalization/getSavedFilters.js");case 2:return a=e.sent,n=[{id:"0",global:!1,name:"My Dashboard",filterSet:[].concat(Object(b.a)(this.getDefaultFilterSet()),[{key:t||"N/A",category:"CreatedBy",DateRange:!1,LessThan:!1,Date:"",label:"Initiated By: "+t||"N/A"},{key:"Active",category:"status",DateRange:!1,LessThan:!1,Date:"",label:"Status: Active"}])}],a&&a.data&&a.data.forEach(function(e){e.global=!1,n.push(e)}),e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setDefaultFilter",value:function(){this.selectedViewFilter=this.getDefaultFilter()}},{key:"getGlobalFilters",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.get("Personalization/getGlobalFilters.js");case 2:return(t=e.sent)&&t.data&&t.data.forEach(function(e){e.global=!0}),e.abrupt("return",t.data);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}(),l=Object(x.a)(c.prototype,"selectedViewFilter",[G.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.getDefaultFilter()}}),p=Object(x.a)(c.prototype,"filterConfig",[G.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{categories:[],filters:[]}}}),u=Object(x.a)(c.prototype,"availableResponsibleParties",[G.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=Object(x.a)(c.prototype,"filterViews",[G.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=Object(x.a)(c.prototype,"areFiltersLoaded",[G.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),m=Object(x.a)(c.prototype,"isConfiguredFiltersLoaded",[G.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c),X="";X="../",U.b.setup({sp:{baseUrl:"../",headers:{Accept:"application/json;odata=verbose"}}});var Z,$,ee,te,ae,ne,re,oe,ie=new Y(X,"/ofsppp/api/"),se=new B,ce=new z.a(ie),le=new Q(ie,sessionStorage),pe={appService:new _,spContext:se,baristaService:ie,personalizationStore:le,processStore:new H.ProcessStore(ie),processTemplateStore:ce,processTemplateContainerStore:new H.ProcessTemplateContainerStore(ce),processLogStore:new H.ProcessLogStore(ie),reportingStore:new H.ReportingStore(ie)},ue=r.a.createContext(pe),de=a(1282),he=a(1279),me=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(E.a)(this,Object(P.a)(t).call(this,e)))._isMounted=!1,a.state={releaseName:""},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"componentWillMount",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._isMounted=!0,e.prev=1,e.next=4,V.a.get("./release.txt");case 4:t=e.sent,!0===this._isMounted&&this.setState({releaseName:t.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),!0===this._isMounted&&this.setState({releaseName:"Unknown"});case 11:case"end":return e.stop()}},e,this,[[1,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this.props.classes,t=this.state.releaseName;return r.a.createElement("footer",{className:e.footer+" "+e.layout},r.a.createElement(he.a,{container:!0,spacing:6,justify:"flex-end"},r.a.createElement(he.a,{item:!0},r.a.createElement(de.a,{variant:"caption"},t))))}}]),t}(r.a.Component),ye=Object(R.a)(function(e){return Object(N.a)({footer:{marginTop:8*e.spacing(),borderTop:"1px solid ".concat(e.palette.divider),padding:"".concat(6*e.spacing(),"px 0")},layout:Object(j.a)({width:"auto",marginLeft:1*e.spacing(),marginRight:1*e.spacing()},e.breakpoints.up(1e3+3*e.spacing()*2),{width:1100,marginLeft:"auto",marginRight:"auto"})})})(me),fe=a(23),ge=a.n(fe),ve=a(185),be=a.n(ve),Oe=a(71),we=a.n(Oe),ke=a(140),Ee=a.n(ke),Pe=a(113),Ce=a.n(Pe),xe=a(274),je=a.n(xe),Ae=a(130),Se=a.n(Ae),Te=a(1298),De=a(1349),Ne=a(1299),Re=a(1300),Ie=a(1301),Fe=a(1302),Le=a(1283),Me=a(1288),Ue=a(1289),Be=a(1305),qe=a(1297),Ve=function(e){return Object(N.a)({facebook2:{color:"#6798e5",animationDuration:"550ms"},root:{flexGrow:1},paper:{padding:2*e.spacing(),textAlign:"center",color:e.palette.text.secondary},textField:{marginLeft:e.spacing(),marginRight:e.spacing(),marginTop:e.spacing()},versionMenuItem:{width:200}})},_e=(ee=$=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(E.a)(this,Object(P.a)(t).call(this,e))).state={reason:""},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"handleClick",value:function(){this.props.handleUnsign(this.state.reason)}},{key:"handleOnClose",value:function(){this.props.onClose&&this.props.onClose(!1)}},{key:"handleChange",value:function(e){this.setState({reason:e.target.value})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.process,n=e.isUnsigning,o=this.state.reason;return r.a.createElement(Le.a,{open:this.props.open,onClose:this.handleOnClose,"aria-labelledby":"confirm-unsign-process-dialog-title",fullWidth:!0,maxWidth:"xs"},r.a.createElement(Me.a,{id:"confirm-unsign-process-dialog-title"},"Unsign Process"),r.a.createElement(Ue.a,null,r.a.createElement("div",null,"Please provide a reason for unsigning the process,"," ",r.a.createElement("strong",null,r.a.createElement("i",null,a.name))),r.a.createElement(De.a,{required:!0,label:"Unsign Reason",onChange:this.handleChange,value:this.state.reason,fullWidth:!0})),r.a.createElement(qe.a,null,n&&r.a.createElement(he.a,{container:!0,style:{margin:"15px"}},r.a.createElement(Te.a,{variant:"indeterminate",disableShrink:!0,className:t.facebook2,size:24,thickness:4})),!n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne.a,{onClick:this.handleOnClose,color:"primary"},"Cancel"),r.a.createElement(Ne.a,{onClick:this.handleClick,color:"primary",disabled:o.length<3},"Unsign"))))}}]),t}(r.a.Component),$.contextType=ue,Z=ee,Object(x.a)(Z.prototype,"handleClick",[D.a],Object.getOwnPropertyDescriptor(Z.prototype,"handleClick"),Z.prototype),Object(x.a)(Z.prototype,"handleOnClose",[D.a],Object.getOwnPropertyDescriptor(Z.prototype,"handleOnClose"),Z.prototype),Object(x.a)(Z.prototype,"handleChange",[D.a],Object.getOwnPropertyDescriptor(Z.prototype,"handleChange"),Z.prototype),Z),ze=Object(R.a)(Ve)(_e),We=(ne=ae=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(E.a)(this,Object(P.a)(t).call(this,e))).state={reason:""},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"handleClick",value:function(){this.props.handleReject(this.state.reason,void 0)}},{key:"handlePTClick",value:function(){var e=this.props.process.template.id,t=this.props.process.id,a=this.props.process.name;this.props.handleReject(this.state.reason,{templateId:e,procInstanceId:t,procInstanceName:a})}},{key:"handleOnClose",value:function(){this.props.onClose&&this.props.onClose(!1)}},{key:"handleChange",value:function(e){this.setState({reason:e.target.value})}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.process,n=e.isRejectinging,o=this.state.reason;return r.a.createElement(Le.a,{open:this.props.open,onClose:this.handleOnClose,"aria-labelledby":"confirm-reject-process-dialog-title",fullWidth:!0,maxWidth:"sm"},r.a.createElement(Me.a,{id:"confirm-reject-process-dialog-title"},"Reject Process"),r.a.createElement(Ue.a,null,r.a.createElement("div",null,"Please provide a reason for rejecting the process,"," ",r.a.createElement("strong",null,r.a.createElement("i",null,a.name))),r.a.createElement(De.a,{required:!0,label:"Reject Reason",onChange:this.handleChange,value:this.state.reason,fullWidth:!0})),r.a.createElement(qe.a,null,n&&r.a.createElement(he.a,{container:!0,style:{margin:"15px"}},r.a.createElement(Te.a,{variant:"indeterminate",disableShrink:!0,className:t.facebook2,size:24,thickness:4})),!n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne.a,{onClick:this.handleOnClose,color:"primary"},"Cancel"),r.a.createElement(Ne.a,{onClick:this.handleClick,color:"primary",disabled:o.length<3},"Reject and Close"),r.a.createElement(Ne.a,{onClick:this.handlePTClick,color:"primary",disabled:o.length<3},"Reject and Instantiate New Process Instance"))))}}]),t}(r.a.Component),ae.contextType=ue,te=ne,Object(x.a)(te.prototype,"handleClick",[D.a],Object.getOwnPropertyDescriptor(te.prototype,"handleClick"),te.prototype),Object(x.a)(te.prototype,"handlePTClick",[D.a],Object.getOwnPropertyDescriptor(te.prototype,"handlePTClick"),te.prototype),Object(x.a)(te.prototype,"handleOnClose",[D.a],Object.getOwnPropertyDescriptor(te.prototype,"handleOnClose"),te.prototype),Object(x.a)(te.prototype,"handleChange",[D.a],Object.getOwnPropertyDescriptor(te.prototype,"handleChange"),te.prototype),te),Ye=Object(R.a)(Ve)(We),He=a(1309),Ke=a(81),Ge=a.n(Ke),Je=a(288),Qe=a.n(Je),Xe=a(578),Ze=a.n(Xe),$e=a(145),et=a.n($e),tt=a(579),at=a.n(tt),nt=a(289),rt=a.n(nt),ot=a(1284),it=a(987),st=a(1357),ct=a(945),lt=(re=function(e){function t(){return Object(w.a)(this,t),Object(E.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(k.a)(t,[{key:"handleAttachmentClicked",value:function(e){window.open(this.props.origin+e.serverRelativeUrl,"_blank")}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.attachments,o=t.origin,i=t.labelText;return r.a.createElement(he.a,{item:!0,xs:12,style:{margin:0,padding:0,backgroundColor:"inherit"}},r.a.createElement(Re.a,{style:{display:"flex",margin:0,padding:0,boxShadow:"none",backgroundColor:"inherit",borderColor:ct.a[100],borderWidth:"1px",borderStyle:"solid"}},r.a.createElement(Ie.a,{title:i,style:{padding:2,paddingRight:5},titleTypographyProps:{variant:"body1"}}),r.a.createElement(Fe.a,{style:{padding:0}},n&&we()(n,["fileName"],["asc"]).map(function(t){return r.a.createElement(st.a,{classes:{label:a.attachmentChipLabel,deleteIcon:a.attachmentChipDeleteIcon},className:a.attachmentChip,key:t.fileName,avatar:r.a.createElement(it.a,{className:a.attachmentAvatar,src:"".concat(o).concat(t.fileIconUrl||"/_layouts/images/ICGEN.GIF")}),label:t.fileName,color:"primary",onClick:function(){return e.handleAttachmentClicked(t)}})}))))}}]),t}(r.a.Component),Object(x.a)(re.prototype,"handleAttachmentClicked",[D.a],Object.getOwnPropertyDescriptor(re.prototype,"handleAttachmentClicked"),re.prototype),re),pt=Object(R.a)(function(e){return Object(N.a)({attachmentChip:{height:"24px",margin:"2px"},attachmentChipLabel:{paddingLeft:"0"},attachmentAvatar:{margin:"5px",height:"15px",width:"15px"}})})(lt);!function(e){e.NotStarted="NotStarted",e.InProgress="InProgress",e.Completed="Completed"}(oe||(oe={}));var ut,dt,ht,mt,yt,ft,gt,vt,bt,Ot,wt,kt,Et,Pt,Ct,xt,jt,At,St,Tt,Dt,Nt=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(E.a)(this,Object(P.a)(t).call(this,e))).state={fy:""},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=Object(O.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({fy:this.props.process.fiscalYear||""});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(O.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.props.process.fiscalYear&&this.props.process.fiscalYear!==this.state.fy&&this.setState({fy:this.props.process.fiscalYear});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.process,n=e.origin;return r.a.createElement(ot.a,{className:t.paper},r.a.createElement(he.a,{container:!0,className:t.container,spacing:6,justify:"space-between"},r.a.createElement(he.a,{item:!0,xs:3},r.a.createElement(De.a,{fullWidth:!0,label:"Status",className:t.textField,value:Ce()(a.status)})),r.a.createElement(he.a,{item:!0,xs:3},r.a.createElement(De.a,{fullWidth:!0,label:"Initiated On",className:t.textField,value:ge()(a.initiatedOn).format("lll")})),r.a.createElement(he.a,{item:!0,xs:3},r.a.createElement(De.a,{fullWidth:!0,label:"Initiated By",className:t.textField,value:a.initiatedBy&&a.initiatedBy.displayName})),r.a.createElement(he.a,{item:!0,xs:3},r.a.createElement(De.a,{fullWidth:!0,label:"M&R Status",className:t.textField,value:a.monitoringAndReview?a.monitoringAndReview.status.replace(/([a-z])([A-Z])/g,"$1 $2"):oe.NotStarted.replace(/([a-z])([A-Z])/g,"$1 $2")})),r.a.createElement(he.a,{item:!0,xs:3},r.a.createElement(De.a,{fullWidth:!0,label:"Process Template",className:t.textField,value:a.template.title})),r.a.createElement(he.a,{item:!0,xs:3},r.a.createElement(De.a,{fullWidth:!0,label:"Transacton Date",className:t.textField,value:a.transactionDate?ge()(new Date(a.transactionDate)).format("MM-DD-YYYY"):""})),r.a.createElement(he.a,{item:!0,xs:3},r.a.createElement(De.a,{fullWidth:!0,label:"Template Version",className:t.textField,value:a.template.version})),r.a.createElement(he.a,{item:!0,xs:3},r.a.createElement(De.a,{fullWidth:!0,label:"Fiscal Year",className:t.textField,value:this.state.fy})),this.props.process&&this.props.process.template&&this.props.process.template.jobAidAttachments&&this.props.process.template.jobAidAttachments.length>0&&r.a.createElement(he.a,{item:!0,xs:12},r.a.createElement(pt,{origin:n,attachments:this.props.process.template.jobAidAttachments,labelText:"Job Aids"}))))}}]),t}(r.a.Component),Rt=a(49),It=a.n(Rt),Ft=a(982),Lt=a.n(Ft),Mt=a(72),Ut=a.n(Mt),Bt=a(1306),qt=a(1308),Vt=a(1310),_t=a(1311),zt=a(188),Wt=a.n(zt),Yt=a(571),Ht=a.n(Yt),Kt=a(569),Gt=a.n(Kt),Jt=a(166),Qt=a.n(Jt),Xt=a(570),Zt=a.n(Xt),$t=a(1347),ea=(ut=function(e){function t(){return Object(w.a)(this,t),Object(E.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(k.a)(t,[{key:"handleResponsiblePartyChange",value:function(e){this.props.onResponsiblePartyChange&&this.props.onResponsiblePartyChange(e.target.value)}},{key:"renderResponsibleParties",value:function(){var e=[];e.push(r.a.createElement("option",{key:"",value:""},"No Responsible Party"));var t=!0,a=!1,n=void 0;try{for(var o,i=this.props.availableResponsibleParties[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var s=o.value;e.push(r.a.createElement("option",{key:s.text,value:s.text},s.text))}}catch(c){a=!0,n=c}finally{try{t||null==i.return||i.return()}finally{if(a)throw n}}return e}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.allowActions,n=e.isUpdatingResponsibleParty,o=e.responsibleParty,i=e.availableResponsibleParties;return r.a.createElement(r.a.Fragment,null,r.a.createElement(de.a,{variant:"caption"},"Responsible Party"),n&&r.a.createElement(Te.a,{variant:"indeterminate",disableShrink:!0,className:t.progressSpinner,size:24,thickness:4}),!n&&r.a.createElement($t.a,{native:!0,fullWidth:!0,value:o,disabled:!a,className:t.responsiblePartyTextField,onChange:this.handleResponsiblePartyChange},i&&this.renderResponsibleParties()))}}]),t}(r.a.PureComponent),Object(x.a)(ut.prototype,"handleResponsiblePartyChange",[D.a],Object.getOwnPropertyDescriptor(ut.prototype,"handleResponsiblePartyChange"),ut.prototype),ut),ta=(mt=ht=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(E.a)(this,Object(P.a)(t).call(this,e))).state={notRequiredDialogOpen:!1,currentUser:""},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==this.state.currentUser){e.next=13;break}return e.prev=2,e.next=5,this.context.spContext.getCurrentUser();case 5:if(!((t=e.sent)&&t.Title&&t.Title.length>0)){e.next=9;break}return e.next=9,this.setState({currentUser:t.Title});case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(2);case 13:case"end":return e.stop()}},e,this,[[2,11]])}));return function(){return e.apply(this,arguments)}}()},{key:"getCompletedBy",value:function(e){return"undefined"!==typeof e.completedBy?e.completedBy.displayName:""}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.activity,n=e.canCompleteActivity,o=e.isPerformingAction,i=e.allowActions,s=this.props,c=s.onMarkAsComplete,l=s.onMarkAsIncomplete,p=s.onMarkAsNotRequired,u=s.onMarkAsReviewed,d=this.state.currentUser;if(!i)return null;if(o)return r.a.createElement(Te.a,{variant:"indeterminate",disableShrink:!0,className:t.progressSpinner,size:24,thickness:4});switch(a.status){case H.ActivityStatus.Incomplete:return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne.a,{size:"small",color:"primary",onClick:p},"Mark activity as Not Required"),r.a.createElement(Ne.a,{size:"small",color:"primary",onClick:c,disabled:!n},"Complete Activity"));case H.ActivityStatus.CompleteRequiresReview:return this.getCompletedBy(a)===d?r.a.createElement(M.a,{title:"Activity Reviewer must be different from Activity Completer"},r.a.createElement("span",null,r.a.createElement(Ne.a,{size:"small",color:"primary",disabled:this.getCompletedBy(a)===d,onClick:u},"Mark as Reviewed"))):r.a.createElement(Ne.a,{size:"small",color:"primary",disabled:this.getCompletedBy(a)===d,onClick:u},"Mark as Reviewed");case H.ActivityStatus.Complete:return r.a.createElement(Ne.a,{size:"small",color:"primary",onClick:l},"Mark activity as Incomplete");case H.ActivityStatus.NotRequired:return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne.a,{size:"small",color:"primary",onClick:l},"Mark activity as Required and Incomplete"));default:return r.a.createElement("div",null,"Unknown Status")}}}]),t}(r.a.PureComponent),ht.contextType=ue,dt=mt,Object(x.a)(dt.prototype,"getCompletedBy",[D.a],Object.getOwnPropertyDescriptor(dt.prototype,"getCompletedBy"),dt.prototype),dt),aa=a(296),na=a(283),ra=a.n(na),oa=(yt=function(e){function t(){return Object(w.a)(this,t),Object(E.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(k.a)(t,[{key:"handleAttachmentDrop",value:function(e){if(e&&1===e.length){if(this.props.onAttachmentUpload){if(this.isFileNameInvalid(e[0]))return;this.props.onAttachmentUpload(e[0])}}else 0==e.length&&alert("Please select one file at a time.")}},{key:"isFileNameInvalid",value:function(e){if(this.props.attachments)for(var t=0;t<this.props.attachments.length;t++){if((this.props.attachments[t].originalFileName?this.props.attachments[t].originalFileName:this.props.attachments[t].fileName)===e.name)return!0}var a=/\.(ade|adp|asa|exe|ashx|asp|cmd|db|tmp|config|dll|ini|aspx|svc|lnk)$/i.test(e.name);if(a)return alert("Invalid File"),a;var n=/^(?!\.)(?!com[0-9]$)(?!con$)(?!lpt[0-9]$)(?!nul$)(?!prn$)[^\|\*\?\\:%&{}~#<>/"]*[^\.\|\*\?\\:<>/$"]+$/.test(e.name);return n||alert("Invalid Filename"),!n}},{key:"handleAttachmentClicked",value:function(e,t,a){this.props.onAttachmentClicked&&(e.stopPropagation(),this.props.onAttachmentClicked(t,a))}},{key:"handleAnchorClick",value:function(e){e.stopPropagation()}},{key:"handleAttachmentDelete",value:function(e){this.props.onAttachmentDelete&&this.props.onAttachmentDelete(e)}},{key:"getAttachmentAreaStyle",value:function(e){return e?{backgroundColor:"#eee"}:{}}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.allowActions,o=t.isUploadingAttachment,i=t.attachments,s=t.origin,c=t.process;return r.a.createElement(r.a.Fragment,null,c&&o&&r.a.createElement(Te.a,{variant:"indeterminate",disableShrink:!0,className:a.progressSpinner,size:24,thickness:4}),!o&&r.a.createElement(r.a.Fragment,null,r.a.createElement(aa.a,{onDrop:this.handleAttachmentDrop,multiple:!1,disabled:!n},function(t){var o=t.getRootProps,l=t.getInputProps,p=t.isDragActive;return r.a.createElement(r.a.Fragment,null,r.a.createElement(de.a,{variant:"caption",style:e.getAttachmentAreaStyle(p)},r.a.createElement("div",o(),r.a.createElement("input",l()),r.a.createElement(ra.a,{style:{cursor:"pointer"},className:a.uploadIcon}),r.a.createElement("span",{style:{cursor:"pointer"}},"\xa0Attachments:"),r.a.createElement("div",null,(!i||i.length<=0)&&r.a.createElement(de.a,{variant:"caption"},r.a.createElement("i",null,"No Attachments")),i&&i.length>0&&we()(i,["fileName"],["asc"]).map(function(t){return r.a.createElement("div",{key:t.fileName},r.a.createElement(st.a,{classes:{label:a.attachmentChipLabel,deleteIcon:a.attachmentChipDeleteIcon},className:a.attachmentChip,key:t.fileName,avatar:r.a.createElement(it.a,{className:a.attachmentAvatar,src:"".concat(s).concat(t.fileIconUrl||"/_layouts/images/ICGEN.GIF")}),label:t.originalFileName?t.originalFileName:t.fileName,color:"secondary",onClick:c?function(a){return e.handleAttachmentClicked(a,c,t)}:void 0,onDelete:n?function(){return e.handleAttachmentDelete(t)}:void 0}))})))))})))}}]),t}(r.a.PureComponent),Object(x.a)(yt.prototype,"handleAttachmentDrop",[D.a],Object.getOwnPropertyDescriptor(yt.prototype,"handleAttachmentDrop"),yt.prototype),Object(x.a)(yt.prototype,"handleAttachmentClicked",[D.a],Object.getOwnPropertyDescriptor(yt.prototype,"handleAttachmentClicked"),yt.prototype),Object(x.a)(yt.prototype,"handleAttachmentDelete",[D.a],Object.getOwnPropertyDescriptor(yt.prototype,"handleAttachmentDelete"),yt.prototype),yt),ia=(a(993),a(79)),sa=a(378),ca=a(298),la=a(1292),pa=(ft=function(e){function t(e){var a;Object(w.a)(this,t),(a=Object(E.a)(this,Object(P.a)(t).call(this,e)))._isMounted=!1;var n=new ia.CompositeDecorator([{strategy:a.findLinkEntities,component:a.Link}]);return a.state={editorState:ia.EditorState.createWithContent(Object(sa.stateFromHTML)(e.rawText),n),rawText:e.rawText,showURLInput:!1,urlValue:"",anchorEl:null},a.debouncedEditorChange=Ee()(a.performEditorChange,a.props.waitForDebounce),a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=Object(O.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._isMounted=!0;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=Object(O.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._isMounted=!1;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"performEditorChange",value:function(){var e=Object(O.a)(v.a.mark(function e(t){var a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.getCurrentContent(),this._isMounted&&this.props.rawText!==Object(ca.stateToHTML)(a)&&this.props.onChange(Object(ca.stateToHTML)(a));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setSetState",value:function(e){var t=this,a=new ia.CompositeDecorator([{strategy:this.findLinkEntities,component:this.Link}]),n=ia.EditorState.createWithContent(Object(sa.stateFromHTML)(e),a);this.setState({editorState:n},function(){t._editor&&t._editor.focus()})}},{key:"handleBlur",value:function(){this.props.onChanging&&this.props.onChanging(!0)}},{key:"handleFocus",value:function(){this.props.onChanging&&this.props.onChanging(!1)}},{key:"onChange",value:function(e){this.props.onChanging&&this.props.onChanging(!1),this.setState({editorState:e}),this.debouncedEditorChange(e)}},{key:"focus",value:function(){this._editor&&this._editor.focus()}},{key:"handleKeyCommand",value:function(e,t){var a=ia.RichUtils.handleKeyCommand(t,e);return a?(console.log("COMMENTS COMMENTS "),this.onChange(a),"handled"):"not-handled"}},{key:"mapKeyToEditorCommand",value:function(e){if(9===e.keyCode){var t=ia.RichUtils.onTab(e,this.state.editorState,4);return t!==this.state.editorState&&this.onChange(t),null}return Object(ia.getDefaultKeyBinding)(e)}},{key:"onURLChange",value:function(e){this.setState({urlValue:e.target.value})}},{key:"toggleBlockType",value:function(e,t){this.onChange(ia.RichUtils.toggleBlockType(this.state.editorState,t))}},{key:"toggleInlineStyle",value:function(e,t){var a=this;"ANCHOR"!==t?this.onChange(ia.RichUtils.toggleInlineStyle(this.state.editorState,t)):this.setState({anchorEl:e.currentTarget},function(){a.handleAddLink()})}},{key:"getBlockStyle",value:function(e){switch(e.getType()){case"blockquote":return"RichEditor-blockquote";default:return""}}},{key:"handleAddLink",value:function(){this.state.editorState.getSelection().isCollapsed()||this.setState({showURLInput:!0,urlValue:""})}},{key:"closeLink",value:function(){var e=this;this.setState({showURLInput:!1,urlValue:""},function(){e._editor&&e._editor.focus()})}},{key:"confirmLink",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.editorState,r=a.urlValue,o=ia.Entity.create("LINK","MUTABLE",{url:r});this.setState({editorState:ia.RichUtils.toggleLink(n,n.getSelection(),o),showURLInput:!1,urlValue:""},function(){t.props.onChange(Object(ca.stateToHTML)(t.state.editorState.getCurrentContent())),t._editor&&t._editor.focus()})}},{key:"Link",value:function(e){var t=e.contentState.getEntity(e.entityKey).getData().url;return r.a.createElement("a",{href:t,target:"_blank"},e.children)}},{key:"findLinkEntities",value:function(e,t,a){e.findEntityRanges(function(e){var t=e.getEntity();return null!==t&&"LINK"===a.getEntity(t).getType()},t)}},{key:"onLinkInputKeyDown",value:function(e){13===e.which&&this.confirmLink(e)}},{key:"render",value:function(){var e=this,t=this.state.editorState,a=this.props.classes,n="RichEditor-editor",o=t.getCurrentContent();return o.hasText()||"unstyled"!==o.getBlockMap().first().getType()&&(n+=" RichEditor-hidePlaceholder"),r.a.createElement("div",{className:"RichEditor-root"},r.a.createElement(la.a,{id:"simple-popper",open:this.state.showURLInput,anchorEl:this.state.anchorEl,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"}},r.a.createElement(ot.a,{className:a.hyperlinkPopover},r.a.createElement(he.a,{className:a.root,container:!0,spacing:0,justify:"flex-end",alignContent:"flex-end"},r.a.createElement(he.a,{item:!0,xs:12},r.a.createElement(De.a,{autoFocus:!0,label:"Enter URL",fullWidth:!0,onChange:this.onURLChange,placeholder:"Enter Url",value:this.state.urlValue,onKeyDown:this.onLinkInputKeyDown})),r.a.createElement(he.a,{item:!0},r.a.createElement(Ne.a,{onClick:this.confirmLink},"Confirm"),r.a.createElement(Ne.a,{onClick:this.closeLink},"Close"))))),r.a.createElement(ma,{editorState:t,onToggle:this.toggleBlockType}),r.a.createElement(fa,{editorState:t,onToggle:this.toggleInlineStyle,onAddLink:this.handleAddLink}),r.a.createElement("div",{className:n+" rte"},r.a.createElement(ia.Editor,{readOnly:this.props.readOnly,ref:function(t){return e._editor=t},blockStyleFn:this.getBlockStyle,customStyleMap:ua,editorState:t,handleKeyCommand:this.handleKeyCommand,onBlur:this.handleBlur,onFocus:this.handleFocus,keyBindingFn:this.mapKeyToEditorCommand,onChange:this.onChange,placeholder:this.props.placeholder,spellCheck:!0})))}}]),t}(r.a.PureComponent),Object(x.a)(ft.prototype,"performEditorChange",[D.a],Object.getOwnPropertyDescriptor(ft.prototype,"performEditorChange"),ft.prototype),Object(x.a)(ft.prototype,"setSetState",[D.a],Object.getOwnPropertyDescriptor(ft.prototype,"setSetState"),ft.prototype),Object(x.a)(ft.prototype,"handleBlur",[D.a],Object.getOwnPropertyDescriptor(ft.prototype,"handleBlur"),ft.prototype),Object(x.a)(ft.prototype,"handleFocus",[D.a],Object.getOwnPropertyDescriptor(ft.prototype,"handleFocus"),ft.prototype),Object(x.a)(ft.prototype,"onChange",[D.a],Object.getOwnPropertyDescriptor(ft.prototype,"onChange"),ft.prototype),Object(x.a)(ft.prototype,"focus",[D.a],Object.getOwnPropertyDescriptor(ft.prototype,"focus"),ft.prototype),Object(x.a)(ft.prototype,"handleKeyCommand",[D.a],Object.getOwnPropertyDescriptor(ft.prototype,"handleKeyCommand"),ft.prototype),Object(x.a)(ft.prototype,"mapKeyToEditorCommand",[D.a],Object.getOwnPropertyDescriptor(ft.prototype,"mapKeyToEditorCommand"),ft.prototype),Object(x.a)(ft.prototype,"onURLChange",[D.a],Object.getOwnPropertyDescriptor(ft.prototype,"onURLChange"),ft.prototype),Object(x.a)(ft.prototype,"toggleBlockType",[D.a],Object.getOwnPropertyDescriptor(ft.prototype,"toggleBlockType"),ft.prototype),Object(x.a)(ft.prototype,"toggleInlineStyle",[D.a],Object.getOwnPropertyDescriptor(ft.prototype,"toggleInlineStyle"),ft.prototype),Object(x.a)(ft.prototype,"getBlockStyle",[D.a],Object.getOwnPropertyDescriptor(ft.prototype,"getBlockStyle"),ft.prototype),Object(x.a)(ft.prototype,"handleAddLink",[D.a],Object.getOwnPropertyDescriptor(ft.prototype,"handleAddLink"),ft.prototype),Object(x.a)(ft.prototype,"closeLink",[D.a],Object.getOwnPropertyDescriptor(ft.prototype,"closeLink"),ft.prototype),Object(x.a)(ft.prototype,"confirmLink",[D.a],Object.getOwnPropertyDescriptor(ft.prototype,"confirmLink"),ft.prototype),Object(x.a)(ft.prototype,"Link",[D.a],Object.getOwnPropertyDescriptor(ft.prototype,"Link"),ft.prototype),Object(x.a)(ft.prototype,"findLinkEntities",[D.a],Object.getOwnPropertyDescriptor(ft.prototype,"findLinkEntities"),ft.prototype),Object(x.a)(ft.prototype,"onLinkInputKeyDown",[D.a],Object.getOwnPropertyDescriptor(ft.prototype,"onLinkInputKeyDown"),ft.prototype),ft),ua={CODE:{backgroundColor:"rgba(0, 0, 0, 0.05)",fontFamily:'"Inconsolata", "Menlo", "Consolas", monospace',fontSize:16,padding:2}},da=(gt=function(e){function t(e){return Object(w.a)(this,t),Object(E.a)(this,Object(P.a)(t).call(this,e))}return Object(C.a)(t,e),Object(k.a)(t,[{key:"onToggle",value:function(e){e.preventDefault(),this.props.onToggle(e,this.props.style)}},{key:"render",value:function(){var e="RichEditor-styleButton";return this.props.active&&(e+=" RichEditor-activeButton"),r.a.createElement("span",{className:e,onMouseDown:this.onToggle},this.props.label)}}]),t}(r.a.Component),Object(x.a)(gt.prototype,"onToggle",[D.a],Object.getOwnPropertyDescriptor(gt.prototype,"onToggle"),gt.prototype),gt),ha=[{label:"H1",style:"header-one"},{label:"H2",style:"header-two"},{label:"H3",style:"header-three"},{label:"H4",style:"header-four"},{label:"H5",style:"header-five"},{label:"H6",style:"header-six"},{label:"Blockquote",style:"blockquote"},{label:"UL",style:"unordered-list-item"},{label:"OL",style:"ordered-list-item"},{label:"Code Block",style:"code-block"}],ma=function(e){var t=e.editorState,a=t.getSelection(),n=t.getCurrentContent().getBlockForKey(a.getStartKey()).getType();return r.a.createElement("div",{className:"RichEditor-controls"},ha.map(function(t){return r.a.createElement(da,{key:t.label,active:t.style===n,label:t.label,onToggle:e.onToggle,style:t.style})}))},ya=[{label:"Bold",style:"BOLD"},{label:"Italic",style:"ITALIC"},{label:"Underline",style:"UNDERLINE"},{label:"Monospace",style:"CODE"},{label:"Create Hyperlink",style:"ANCHOR"}],fa=function(e){var t=e.editorState.getCurrentInlineStyle();return r.a.createElement("div",{className:"RichEditor-controls"},ya.map(function(a){return r.a.createElement(da,{key:a.label,active:t.has(a.style),label:a.label,onToggle:e.onToggle,style:a.style})}))},ga=Object(R.a)(function(e){return Object(N.a)({root:{flexGrow:1},hyperlinkPopover:{padding:e.spacing(),backgroundColor:e.palette.grey[50],flexGrow:1,width:90*e.spacing()}})})(pa),va=(vt=function(e){function t(){var e,a;Object(w.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(E.a)(this,(e=Object(P.a)(t)).call.apply(e,[this].concat(r)))).waitForDebounce=1500,a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"handleCommentsChange",value:function(e){(this.props.allowActions||this.props.expanded)&&this.props.onCommentsChange(e,!0)}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.isUpdatingComments,n=e.allowActions,o=e.comments,i=e.expanded,s=e.activity;return r.a.createElement("div",{className:t.parentOverlay},r.a.createElement("div",null,r.a.createElement("span",{className:"MuiTypography-root MuiTypography-caption"},"Activity Comments/Notes"),a&&i&&r.a.createElement(Te.a,{variant:"indeterminate",disableShrink:!0,className:t.overlay,size:24,thickness:4}),n&&i&&r.a.createElement(ga,{rawText:o,onChange:this.handleCommentsChange,placeholder:n?"Enter any comments or notes associated with the activity":"No comments/notes entered",waitForDebounce:this.waitForDebounce}),!n&&i&&r.a.createElement("div",{style:{width:"100%",border:"1px solid #ddd",padding:"5px",minHeight:"45px"},dangerouslySetInnerHTML:{__html:Ut.a.sanitize(o)}})),s.ActivityNotRequiredInfoSet&&r.a.createElement("div",{className:t.parentOverlay,style:{marginTop:"10px"}},r.a.createElement("span",{className:"MuiTypography-root MuiTypography-caption"},"Activity Not Required Notes"),r.a.createElement("div",{style:{width:"100%",border:"1px solid #ddd",padding:"5px",minHeight:"45px"}},r.a.createElement("ul",{style:{marginLeft:"-12px"}},s.notRequiredSet&&r.a.createElement("li",{style:{marginBottom:"6px"}},"(No Comments)",r.a.createElement("i",null,"by ",s.notRequiredSet.byUser&&s.notRequiredSet.byUser.displayName," on ",ge()(s.notRequiredSet.onDate).format("lll"))),s.ActivityNotRequiredInfoSet.map(function(e,t){return r.a.createElement("li",{key:t,style:{marginBottom:"6px"}},e.comments," ",r.a.createElement("i",null,"by ",e.byUser&&e.byUser.displayName," on ",ge()(e.onDate).format("lll")))})))))}}]),t}(r.a.PureComponent),Object(x.a)(vt.prototype,"handleCommentsChange",[D.a],Object.getOwnPropertyDescriptor(vt.prototype,"handleCommentsChange"),vt.prototype),vt),ba=function(e){return Object(N.a)({progress:{margin:2*e.spacing(),color:"#00695c",marginLeft:"50%",marginTop:"20%"},paper:{padding:"5px"},processIcon:{fontSize:"40px"},textField:{},toolbarTitle:{},container:{padding:"10px"},activityDescriptionColumn:{flexBasis:"70%",fontSize:"1.05rem"},activityAttachmentsColumn:{flexBasis:"30%",borderLeft:"2px solid ".concat(e.palette.divider),padding:"".concat(e.spacing(),"px ").concat(2*e.spacing(),"px")},activityCardHeading:{},activityCommentsTextField:{width:"100%",marginLeft:e.spacing(),marginRight:e.spacing()},cardSummaryExpanded:{backgroundColor:"rgb(253,253,253)",borderRadius:10},activityCommentsInput:{fontSize:"12px"},attachmentChip:{height:"24px",margin:"2px"},attachmentChipLabel:{paddingLeft:"0"},attachmentChipDeleteIcon:{height:"15px",width:"15px"},attachmentAvatar:{margin:"5px",height:"15px",width:"15px"},responsiblePartyTextField:{marginLeft:e.spacing(),marginRight:e.spacing(),marginBottom:"10px"},responsiblePartyMenuItem:{width:200},highlight:{color:e.palette.primary.main},helpIcon:{fontSize:"12px",marginLeft:"5px",marginRight:"5px",position:"relative"},uploadIcon:{position:"relative",bottom:"-5px"},progressSpinner:{color:"#6798e5",animationDuration:"550ms"},parentOverlay:{position:"relative",flexBasis:"70%"},overlay:{position:"absolute",top:-10,left:10,"z-index":10},snackbarError:{backgroundColor:e.palette.error.dark},snackbarInfo:{},close:{padding:e.spacing(.5)}})},Oa=(bt=function(e){function t(){return Object(w.a)(this,t),Object(E.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(k.a)(t,[{key:"handleClose",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.onClose()}},{key:"render",value:function(){var e=this.props,t=e.title,a=e.message,n=e.children;return r.a.createElement("div",null,r.a.createElement(Le.a,{fullScreen:!1,open:this.props.open,onClose:this.handleClose,"aria-labelledby":"responsive-dialog-title"},r.a.createElement(Me.a,{id:"responsive-dialog-title"},t),r.a.createElement(Ue.a,null,a&&r.a.createElement(Be.a,null,a),n),r.a.createElement(qe.a,null,r.a.createElement(Ne.a,{onClick:this.handleClose,color:"primary",autoFocus:!0},"Close"))))}}]),t}(r.a.Component),Object(x.a)(bt.prototype,"handleClose",[D.a],Object.getOwnPropertyDescriptor(bt.prototype,"handleClose"),bt.prototype),bt),wa=Object(R.a)(Ve)(Oa),ka=(Ot=function(e){function t(){return Object(w.a)(this,t),Object(E.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(k.a)(t,[{key:"handleNotRequiredCommentChange",value:function(){var e=Object(O.a)(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.props.onNotRequiredCommentChange(t.target.value,t.target.now);case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.notRequiredDialogOpen,a=e.handleNRDClose,n=e.handleNRDSave,o=e.notRequiredComments;return r.a.createElement(Le.a,{open:t,onClose:a},r.a.createElement(Me.a,{id:"not-required-comment-title"},"Activity Not Required Comment"),r.a.createElement(Ue.a,null,r.a.createElement(Be.a,null,"Please provide a note on this activity not being required for completion of the process:"),r.a.createElement(De.a,{autoFocus:!0,margin:"dense",id:"notRequiredComment",label:"Activity Not Required Comment",onChange:this.handleNotRequiredCommentChange,value:o,type:"Text",fullWidth:!0})),r.a.createElement(qe.a,null,r.a.createElement(Ne.a,{onClick:n,disabled:o.length<5,color:"primary"},"Save Comment"),r.a.createElement(Ne.a,{onClick:a,color:"primary"},"Cancel")))}}]),t}(r.a.PureComponent),Object(x.a)(Ot.prototype,"handleNotRequiredCommentChange",[D.a],Object.getOwnPropertyDescriptor(Ot.prototype,"handleNotRequiredCommentChange"),Ot.prototype),Ot),Ea=(Et=kt=function(e){function t(e){var a;Object(w.a)(this,t),a=Object(E.a)(this,Object(P.a)(t).call(this,e));var n=It()(e.template.activities,{id:e.activity.id});return n||(n={allowAttachments:!1,dependsOnPreviousActivity:!1,description:"",id:"",requireAttachments:!1,requiresReview:!1,responsibleParty:"",showTooltip:!1,jobAidAttachments:[]}),a.state={isPerformingAction:!1,isUpdatingResponsibleParty:!1,isUpdatingComments:!1,isUploadingAttachment:!1,showInactivateWarningDialog:!1,comments:e.activity.comments,activityTemplate:n,notRequiredComments:"",notRequiredDialogOpen:!1},a.debouncedPerformCommentsChange=Ee()(a.performCommentsChange,1500),a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"handleMarkAsCompleteClicked",value:function(){var e=Object(O.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isPerformingAction:!0}),e.next=3,this.props.onMarkAsComplete(this.props.activity);case 3:this.setState({isPerformingAction:!1});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleMarkAsIncompleteClicked",value:function(){var e=Object(O.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.shouldShowWarningIfStatusChanges&&this.setState({showInactivateWarningDialog:!0}),this.setState({isPerformingAction:!0}),e.next=5,this.props.onMarkAsIncomplete(this.props.activity);case 5:this.setState({isPerformingAction:!1});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleMarkAsReviewedClicked",value:function(){var e=Object(O.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isPerformingAction:!0}),e.next=3,this.props.onMarkAsReviewed(this.props.activity);case 3:this.setState({isPerformingAction:!1});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleMarkAsNotRequiredClicked",value:function(){var e=Object(O.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({notRequiredDialogOpen:!0});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleNRDClose",value:function(){this.setState({notRequiredDialogOpen:!1})}},{key:"handleNRDSave",value:function(){var e=Object(O.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isPerformingAction:!0}),e.next=3,this.setState(function(e,t){return{notRequiredComments:e.notRequiredComments}});case 3:return e.next=5,this.props.onMarkAsNotRequired(this.props.activity,this.state.notRequiredComments);case 5:this.setState({notRequiredDialogOpen:!1,isPerformingAction:!1});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleAttachmentClicked",value:function(e,t){var a="/"+t.serverRelativeUrl.split("/")[1],n=encodeURIComponent("/ofsppp/api/Process/downloadProcessActivityAttachment.js"),r=encodeURIComponent(t.fileName),o=t.originalFileName?t.originalFileName:t.fileName;o=encodeURIComponent(o),window.open("".concat(this.props.origin+a,"/_vti_bin/barista/v1/barista.svc/eval?c=").concat(n,"&processId=").concat(e.id,"&activityId=").concat(this.props.activity.id,"&fileName=").concat(r,"&originalFileName=").concat(o))}},{key:"handleAttachmentUpload",value:function(){var e=Object(O.a)(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isPerformingAction:!0,isUploadingAttachment:!0}),e.next=3,this.props.onAttachmentUpload(this.props.activity,t);case 3:this.setState({isPerformingAction:!1,isUploadingAttachment:!1});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleAttachmentDelete",value:function(){var e=Object(O.a)(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isPerformingAction:!0,isUploadingAttachment:!0}),e.next=3,this.props.onAttachmentDelete(this.props.activity,t);case 3:this.setState({isPerformingAction:!1,isUploadingAttachment:!1});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleResponsiblePartyChange",value:function(){var e=Object(O.a)(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isUpdatingResponsibleParty:!0,isPerformingAction:!0}),e.next=3,this.props.onResponsiblePartyUpdated(this.props.activity,t);case 3:this.setState({isUpdatingResponsibleParty:!1,isPerformingAction:!1});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleCommentsChange",value:function(){var e=Object(O.a)(v.a.mark(function e(t,a){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({comments:t}),!0===a?this.performCommentsChange(t):this.debouncedPerformCommentsChange(t);case 2:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"onNotRequiredCommentChange",value:function(e,t){this.setState({notRequiredComments:e})}},{key:"performCommentsChange",value:function(){var e=Object(O.a)(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isUpdatingComments:!0}),e.next=3,this.props.onCommentsUpdated(this.props.activity,t);case 3:this.setState({isUpdatingComments:!1});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleCloseInactivateWarningDialog",value:function(){this.setState({showInactivateWarningDialog:!1})}},{key:"getActivityPanelStyle",value:function(e,t,a){var n={marginLeft:"".concat(15*t,"px"),pageBreakAfter:"always"},r=a?.5:1;switch(e.status){case H.ActivityStatus.Incomplete:n.background="RGB(252,225,229, ".concat(r,")");break;case H.ActivityStatus.NotRequired:n.background="RGB(234,234,234, ".concat(r,")");break;case H.ActivityStatus.Complete:n.background="RGB(230,245,208, ".concat(r,")");break;case H.ActivityStatus.CompleteRequiresReview:n.background="RGB(245,243,208, ".concat(r,")");break;default:n.background="white"}return n}},{key:"render",value:function(){var e=this,t=this.props,a=t.index,n=t.classes,o=t.expanded,i=t.activity,s=t.activityDepth,c=t.responsibleParties,l=t.origin,p=t.jobAidAttachments,u=t.process,d=this.state,h=d.notRequiredComments,m=d.notRequiredDialogOpen,y=d.activityTemplate,f=d.isPerformingAction,g=d.isUpdatingResponsibleParty,v=d.isUploadingAttachment,b=d.showInactivateWarningDialog,O=d.isUpdatingComments;if(!y.id)return r.a.createElement("div",null,"Error. Activity Template not found.");""==i.responsibleParty&&(i.responsibleParty="No Responsible Party");return r.a.createElement(r.a.Fragment,null,r.a.createElement(Bt.a,{expanded:o,onChange:function(t,a){return e.props.onExpanded(i,a)},style:this.getActivityPanelStyle(i,s,o),classes:{expanded:n.cardSummaryExpanded}},r.a.createElement(qt.a,{expandIcon:r.a.createElement(Wt.a,null)},r.a.createElement(de.a,{className:n.activityCardHeading},r.a.createElement("span",{style:{paddingRight:"15px"}},i.status!==H.ActivityStatus.Complete&&i.status!==H.ActivityStatus.NotRequired&&r.a.createElement(M.a,{title:this.activityActionTooltipText},r.a.createElement(Gt.a,{style:{fontSize:"15px"}})),i.completedBy&&!i.reviewedBy&&r.a.createElement(M.a,{title:r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"Completed on ",ge()(i.completedOn).format("lll")," by ",i.completedBy.displayName))},r.a.createElement(Qt.a,{style:{fontSize:"15px"}})),i.completedBy&&i.reviewedBy&&r.a.createElement(M.a,{title:r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"Completed on ",ge()(i.completedOn).format("lll")," by ",i.completedBy.displayName),r.a.createElement("br",null),r.a.createElement("span",null,"Reviewed on ",ge()(i.reviewedOn).format("lll")," by ",i.reviewedBy.displayName))},r.a.createElement(Zt.a,{style:{fontSize:"15px"}})),y.tooltip&&y.tooltip.length>0&&r.a.createElement(M.a,{title:y.tooltip||""},r.a.createElement("b",null,"Activity #",a+1,"\xa0",y.tooltip?r.a.createElement(Ht.a,{className:n.helpIcon}):null)),!y.tooltip&&r.a.createElement("b",null,"Activity #",a+1,"\xa0 ")),!o&&r.a.createElement("span",null,this.activitySummaryText),!o&&""!==i.responsibleParty&&r.a.createElement("span",{style:{paddingLeft:"40px"}},r.a.createElement("b",null,"Responsible Party :"),"\xa0",i.responsibleParty),r.a.createElement("span",{className:"printable"},r.a.createElement("br",null),i.completedBy&&r.a.createElement("span",null,"Completed On\xa0",r.a.createElement("span",{className:n.highlight},ge()(i.completedOn).format("lll"))," by\xa0",r.a.createElement("span",{className:n.highlight},i.completedBy.displayName)),i.reviewedBy&&r.a.createElement("span",null,"Reviewed On\xa0",r.a.createElement("span",{className:n.highlight},ge()(i.reviewedOn).format("lll"))," by\xa0",r.a.createElement("span",{className:n.highlight},i.reviewedBy.displayName)),i.status===H.ActivityStatus.NotRequired&&r.a.createElement("span",{style:{paddingLeft:"5px"}},r.a.createElement("i",null,"Not Required"))))),r.a.createElement(Vt.a,null,r.a.createElement(he.a,{container:!0,spacing:0,style:{margin:0,padding:0}},r.a.createElement(he.a,{item:!0,xs:12},r.a.createElement("div",{className:n.activityDescriptionColumn+" rte",dangerouslySetInnerHTML:{__html:Ut.a.sanitize(y.description)}})),p&&p.length>0&&r.a.createElement(pt,{origin:l,attachments:p,labelText:"Job Aids"})),r.a.createElement("div",{className:n.activityAttachmentsColumn},r.a.createElement(ea,{classes:n,allowActions:this.allowActions,isUpdatingResponsibleParty:g,responsibleParty:i.responsibleParty,availableResponsibleParties:c,onResponsiblePartyChange:this.handleResponsiblePartyChange}),y.allowAttachments&&r.a.createElement(oa,{classes:n,allowActions:this.allowActions,isUploadingAttachment:v,attachments:i.attachments,origin:l,process:u,onAttachmentClicked:this.handleAttachmentClicked,onAttachmentUpload:this.handleAttachmentUpload,onAttachmentDelete:this.handleAttachmentDelete}))),r.a.createElement(_t.a,null,r.a.createElement(va,{classes:n,allowActions:this.allowActions,isUpdatingComments:O,comments:this.state.comments,onCommentsChange:this.handleCommentsChange,expanded:o,activity:i}),r.a.createElement("div",{style:{flexBasis:"30%"}},r.a.createElement(ta,{classes:n,isPerformingAction:f,activity:i,allowActions:this.props.allowActions,canCompleteActivity:this.canCompleteActivity,onMarkAsComplete:this.handleMarkAsCompleteClicked,onMarkAsIncomplete:this.handleMarkAsIncompleteClicked,onMarkAsNotRequired:this.handleMarkAsNotRequiredClicked,onMarkAsReviewed:this.handleMarkAsReviewedClicked}),r.a.createElement(ka,{notRequiredDialogOpen:m,handleNRDClose:this.handleNRDClose,handleNRDSave:this.handleNRDSave,notRequiredComments:h,onNotRequiredCommentChange:this.onNotRequiredCommentChange}))),r.a.createElement(_t.a,{style:{padding:"0"}},y.requiresReview&&r.a.createElement(de.a,{variant:"caption",style:{paddingRight:"15px"}},"Requires Secondary Review"),y.dependsOnPreviousActivity&&r.a.createElement(de.a,{variant:"caption",style:{paddingRight:"15px"}},"Depends on Previous Activity"),y.requireAttachments&&r.a.createElement(de.a,{variant:"caption",style:{paddingRight:"15px"}},"Attachments are required"))),r.a.createElement(wa,{open:b,title:"Activity has a completed dependent child activity",onClose:this.handleCloseInactivateWarningDialog},r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"The activity you have just marked as incomplete had a dependent child activity that was already completed."),r.a.createElement("p",null,"This is just a notification that you did this, and there's nothing wrong with doing so, it's just that you did it and here we are."),r.a.createElement("p",null,"Keep Calm and Carry On."))))}},{key:"allowActions",get:function(){if(!this.props.allowActions)return!1;switch(this.props.activity.status){case H.ActivityStatus.Complete:case H.ActivityStatus.CompleteRequiresReview:case H.ActivityStatus.NotRequired:return!1;default:return!0}}},{key:"canCompleteActivity",get:function(){var e=this.props,t=e.activity,a=e.isPreviousActivityCompleted,n=this.state.activityTemplate;return!(n.requireAttachments&&(!t.attachments||t.attachments.length<=0))&&!(n.dependsOnPreviousActivity&&!a)}},{key:"activitySummaryText",get:function(){var e=this.state.activityTemplate,t=(new DOMParser).parseFromString(e.description,"text/html");return t.body&&t.body.textContent?Lt()((t.body.textContent||"").trim(),{length:50}):"[ Not Available ]"}},{key:"activityActionTooltipText",get:function(){switch(this.props.activity.status){case H.ActivityStatus.Incomplete:return"This activity has yet to be completed.";case H.ActivityStatus.CompleteRequiresReview:return"This activity has been completed, but requires secondary review.";default:return""}}}]),t}(r.a.Component),kt.contextType=ue,wt=Et,Object(x.a)(wt.prototype,"handleMarkAsCompleteClicked",[D.a],Object.getOwnPropertyDescriptor(wt.prototype,"handleMarkAsCompleteClicked"),wt.prototype),Object(x.a)(wt.prototype,"handleMarkAsIncompleteClicked",[D.a],Object.getOwnPropertyDescriptor(wt.prototype,"handleMarkAsIncompleteClicked"),wt.prototype),Object(x.a)(wt.prototype,"handleMarkAsReviewedClicked",[D.a],Object.getOwnPropertyDescriptor(wt.prototype,"handleMarkAsReviewedClicked"),wt.prototype),Object(x.a)(wt.prototype,"handleMarkAsNotRequiredClicked",[D.a],Object.getOwnPropertyDescriptor(wt.prototype,"handleMarkAsNotRequiredClicked"),wt.prototype),Object(x.a)(wt.prototype,"handleNRDClose",[D.a],Object.getOwnPropertyDescriptor(wt.prototype,"handleNRDClose"),wt.prototype),Object(x.a)(wt.prototype,"handleNRDSave",[D.a],Object.getOwnPropertyDescriptor(wt.prototype,"handleNRDSave"),wt.prototype),Object(x.a)(wt.prototype,"handleAttachmentClicked",[D.a],Object.getOwnPropertyDescriptor(wt.prototype,"handleAttachmentClicked"),wt.prototype),Object(x.a)(wt.prototype,"handleAttachmentUpload",[D.a],Object.getOwnPropertyDescriptor(wt.prototype,"handleAttachmentUpload"),wt.prototype),Object(x.a)(wt.prototype,"handleAttachmentDelete",[D.a],Object.getOwnPropertyDescriptor(wt.prototype,"handleAttachmentDelete"),wt.prototype),Object(x.a)(wt.prototype,"handleResponsiblePartyChange",[D.a],Object.getOwnPropertyDescriptor(wt.prototype,"handleResponsiblePartyChange"),wt.prototype),Object(x.a)(wt.prototype,"handleCommentsChange",[D.a],Object.getOwnPropertyDescriptor(wt.prototype,"handleCommentsChange"),wt.prototype),Object(x.a)(wt.prototype,"onNotRequiredCommentChange",[D.a],Object.getOwnPropertyDescriptor(wt.prototype,"onNotRequiredCommentChange"),wt.prototype),Object(x.a)(wt.prototype,"performCommentsChange",[D.a],Object.getOwnPropertyDescriptor(wt.prototype,"performCommentsChange"),wt.prototype),Object(x.a)(wt.prototype,"handleCloseInactivateWarningDialog",[D.a],Object.getOwnPropertyDescriptor(wt.prototype,"handleCloseInactivateWarningDialog"),wt.prototype),wt),Pa=Object(R.a)(ba)(Ea),Ca=a(1312),xa=a(284),ja=a.n(xa),Aa=a(573),Sa=a.n(Aa),Ta=a(574),Da=a.n(Ta),Na=a(379),Ra=a.n(Na),Ia=a(572),Fa=a.n(Ia),La=(Pt=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(E.a)(this,Object(P.a)(t).call(this,e))).state={rejectOpen:!1,anchorEl:null},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"handleRejectActions",value:function(e){this.props.beginReject("1"),this.setState({rejectOpen:!1,anchorEl:null})}},{key:"handleToggle",value:function(e){var t=e.currentTarget.parentElement;t&&this.setState(function(e,a){return{rejectOpen:!e.rejectOpen,anchorEl:t}})}},{key:"handleRejectClose",value:function(e){this.setState({rejectOpen:!1,anchorEl:null})}},{key:"handleGoToRejectedProcess",value:function(e){this.props.onNavigateToRejectedProcess&&this.props.onNavigateToRejectedProcess(e)}},{key:"getAssociatedRejectedInfo",value:function(e){var t=this;return e.relatedRejectedProcessInstance&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,"Associated rejected process:"),r.a.createElement("div",{style:{marginTop:10}},r.a.createElement(Ne.a,{size:"small",onClick:function(){e.relatedRejectedProcessInstance&&t.handleGoToRejectedProcess(e.relatedRejectedProcessInstance.id)}},r.a.createElement(Fa.a,null),r.a.createElement("span",{style:{fontWeight:800}}," ".concat(e.relatedRejectedProcessInstance.name)," "))))}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.process,o=t.beginSignOff,i=t.beginUnsign;return r.a.createElement(Re.a,null,r.a.createElement(Ie.a,{title:"Process Status:"}),function(){switch(n.status){case H.ProcessStatus.Initiated:return r.a.createElement(r.a.Fragment,null,r.a.createElement(Fe.a,null,r.a.createElement(ja.a,{className:a.processIcon}),r.a.createElement("div",null,"This Process is newly initiated"),e.getAssociatedRejectedInfo(n)),r.a.createElement(Ca.a,null,r.a.createElement("div",{style:{marginTop:5}},r.a.createElement(Ne.a,{title:"Reject Process Instance",onClick:e.handleRejectActions,color:"primary",style:{flex:1}},"Reject (with reason)"))));case H.ProcessStatus.Active:return r.a.createElement(r.a.Fragment,null,r.a.createElement(Fe.a,null,r.a.createElement(Sa.a,{className:a.processIcon}),r.a.createElement("div",null,"This Process is currently active"),e.getAssociatedRejectedInfo(n)),r.a.createElement(Ca.a,null,r.a.createElement("div",{style:{marginTop:5}},r.a.createElement(Ne.a,{title:"Reject Process Instance",onClick:e.handleRejectActions,color:"primary",style:{flex:1}},"Reject (with reason)"))));case H.ProcessStatus.CompletedNotSigned:return r.a.createElement(r.a.Fragment,null,r.a.createElement(Fe.a,null,r.a.createElement(Da.a,{className:a.processIcon}),r.a.createElement("div",null,"All activities associated with this process have been completed. This process now requires final signoff."),r.a.createElement("div",{style:{paddingTop:"20px"}},r.a.createElement("strong",null,"By clicking the Sign Off button below, I acknowledge that all activities have been reviewed and completed.")),e.getAssociatedRejectedInfo(n)),r.a.createElement(Ca.a,null,r.a.createElement(Ne.a,{onClick:o,color:"primary",style:{flex:1}},"Sign off"),r.a.createElement("div",{style:{marginTop:5}},r.a.createElement(Ne.a,{title:"Reject Process Instance",onClick:e.handleRejectActions,color:"primary",style:{flex:1}},"Reject (with reason)"))));case H.ProcessStatus.CompletedAndSigned:return r.a.createElement(Fe.a,null,r.a.createElement(Ra.a,{className:a.processIcon}),r.a.createElement("div",null,r.a.createElement("strong",null,"This process has been completed and Signed Off:")),r.a.createElement("div",null,"Signed By: ",r.a.createElement("strong",null,n.signOff.signer.displayName)),r.a.createElement("div",null,"Signed On: ",r.a.createElement("strong",null,ge()(n.signOff.timeStamp).format("lll"))),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(Ne.a,{onClick:i,color:"primary",style:{flex:1}},"Unsign Process")),e.getAssociatedRejectedInfo(n));case H.ProcessStatus.Rejected:return r.a.createElement(Fe.a,null,r.a.createElement(M.a,{title:"Reasons: ".concat(n.rejection.reason)},r.a.createElement("div",null,r.a.createElement(Ra.a,{className:a.processIcon}),r.a.createElement("div",null,r.a.createElement("strong",null,"This process has been rejected")),r.a.createElement("div",null,"Rejected By: ",r.a.createElement("strong",null,n.rejection.rejectedBy.displayName)),r.a.createElement("div",null,"Rejected On: ",r.a.createElement("strong",null,ge()(n.rejection.timeStamp).format("lll"))))),e.getAssociatedRejectedInfo(n));default:return r.a.createElement(Fe.a,null,"Unknown Status "+n.status)}}())}}]),t}(r.a.Component),Object(x.a)(Pt.prototype,"handleRejectActions",[D.a],Object.getOwnPropertyDescriptor(Pt.prototype,"handleRejectActions"),Pt.prototype),Object(x.a)(Pt.prototype,"handleToggle",[D.a],Object.getOwnPropertyDescriptor(Pt.prototype,"handleToggle"),Pt.prototype),Object(x.a)(Pt.prototype,"handleRejectClose",[D.a],Object.getOwnPropertyDescriptor(Pt.prototype,"handleRejectClose"),Pt.prototype),Object(x.a)(Pt.prototype,"handleGoToRejectedProcess",[D.a],Object.getOwnPropertyDescriptor(Pt.prototype,"handleGoToRejectedProcess"),Pt.prototype),Pt),Ma=(Ct=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(E.a)(this,Object(P.a)(t).call(this,e))).state={isDeleting:!1},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"handleOnClose",value:function(){this.props.onClose&&this.props.onClose()}},{key:"handleDeleteProcessActivityAttachment",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t,a,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({isDeleting:!0}),t=this.props,a=t.activity,n=t.attachment,a&&n){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this.props.onDeleteProcessTemplate(a,n);case 6:this.setState({isDeleting:!1});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.attachment,n=this.state.isDeleting;return r.a.createElement(Le.a,{open:this.props.open,onClose:this.handleOnClose,"aria-labelledby":"confirm-delete-process-activity-attachment-dialog-title",fullWidth:!0,maxWidth:"sm"},r.a.createElement(Me.a,{id:"confirm-delete-process-activity-attachment-dialog-title"},"Delete Process Activity Attachment?"),r.a.createElement(Ue.a,null,r.a.createElement("div",null,"Are you sure you wish to delete the attachment named"," ",r.a.createElement("strong",null,r.a.createElement("i",null,a&&(a.originalFileName?a.originalFileName:a.fileName))))),r.a.createElement(qe.a,null,n&&r.a.createElement(he.a,{container:!0,style:{margin:"15px"}},r.a.createElement(Te.a,{variant:"indeterminate",disableShrink:!0,className:t.progressSpinner,size:24,thickness:4})),!n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne.a,{onClick:this.handleOnClose,color:"primary"},"Cancel"),r.a.createElement(Ne.a,{onClick:this.handleDeleteProcessActivityAttachment,color:"primary"},"Delete"))))}}]),t}(r.a.Component),Object(x.a)(Ct.prototype,"handleOnClose",[D.a],Object.getOwnPropertyDescriptor(Ct.prototype,"handleOnClose"),Ct.prototype),Object(x.a)(Ct.prototype,"handleDeleteProcessActivityAttachment",[D.a],Object.getOwnPropertyDescriptor(Ct.prototype,"handleDeleteProcessActivityAttachment"),Ct.prototype),Ct),Ua=(At=jt=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(E.a)(this,Object(P.a)(t).call(this,e))).state={isDeleting:!1},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"handleOnClose",value:function(){this.props.onClose&&this.props.onClose(!1)}},{key:"deleteProcess",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t,a,n,r,o;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.onClose,n=t.process,r=this.context.processStore,n.id){e.next=5;break}return a&&a(!1),e.abrupt("return");case 5:return this.setState({isDeleting:!0}),e.next=8,r.deleteProcessById(n.id);case 8:o=e.sent,this.setState({isDeleting:!1}),a&&a(o);case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.process,n=this.state.isDeleting;return r.a.createElement(Le.a,{open:this.props.open,onClose:this.handleOnClose,"aria-labelledby":"confirm-delete-process-dialog-title",fullWidth:!0,maxWidth:"xs"},r.a.createElement(Me.a,{id:"confirm-delete-process-dialog-title"},"Delete Process Template?"),r.a.createElement(Ue.a,null,r.a.createElement("div",null,"Are you sure you wish to delete the process titled"," ",r.a.createElement("strong",null,r.a.createElement("i",null,a.name)))),r.a.createElement(qe.a,null,n&&r.a.createElement(he.a,{container:!0,style:{margin:"15px"}},r.a.createElement(Te.a,{variant:"indeterminate",disableShrink:!0,className:t.facebook2,size:24,thickness:4})),!n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne.a,{onClick:this.handleOnClose,color:"primary"},"Cancel"),r.a.createElement(Ne.a,{onClick:this.deleteProcess,color:"primary"},"Delete"))))}}]),t}(r.a.Component),jt.contextType=ue,xt=At,Object(x.a)(xt.prototype,"handleOnClose",[D.a],Object.getOwnPropertyDescriptor(xt.prototype,"handleOnClose"),xt.prototype),Object(x.a)(xt.prototype,"deleteProcess",[D.a],Object.getOwnPropertyDescriptor(xt.prototype,"deleteProcess"),xt.prototype),xt),Ba=Object(R.a)(Ve)(Ua),qa=a(1313),Va=a(213),_a=function(e){return function(t){return new Promise(function(a){setTimeout(function(){return a(t)},e)})}},za=a(189),Wa=a.n(za),Ya=function(){function e(){Object(w.a)(this,e)}return Object(k.a)(e,null,[{key:"renderProcess",value:function(e){var t="".concat(e.name.replace(/[^a-z0-9]/gi,"_"),".pdf"),a=(e.status,{display:"none"}),n=[{title:"Activity #",render:function(e,t){return t+1}},{title:"Description",render:function(t,a){var n=It()(e.template.activities,{id:t.id});if(n)return r.a.createElement("div",{dangerouslySetInnerHTML:{__html:Ut.a.sanitize(n.description)}})}},{title:"Responsible Party",render:function(e,t){return r.a.createElement("div",null,e.responsibleParty)}},{title:"Attachments",render:function(e,t){return r.a.createElement("div",null,r.a.createElement("ol",null,e.attachments.map(function(e,a){return r.a.createElement("li",null,r.a.createElement("a",{key:a,href:"./activity-".concat(t+1,"/").concat(e.originalFileName)},e.originalFileName))})))}},{title:"Activity Status",render:function(e,t){return r.a.createElement("div",null,Ce()(e.status))}},{title:"Completed By",render:function(e,t){return r.a.createElement("div",null,e.completedBy&&e.completedBy.displayName)}},{title:"Completion Date",render:function(e,t){return r.a.createElement("div",null,e.completedOn&&ge()(e.completedOn).format("lll"))}},{title:"Reviewed By",render:function(e,t){return r.a.createElement("div",null,e.reviewedBy&&e.reviewedBy.displayName)}},{title:"Reviewed Date",render:function(e,t){return r.a.createElement("div",null,e.reviewedOn&&ge()(e.reviewedOn).format("lll"))}},{title:"Notes",render:function(e,t){return r.a.createElement("div",{dangerouslySetInnerHTML:{__html:Ut.a.sanitize(e.comments)}})}}],o=[{title:"Exception Noted",render:function(e,t){return r.a.createElement("div",{dangerouslySetInnerHTML:{__html:Ut.a.sanitize(e.exceptionNoted||"")}})}},{title:"Attachments",render:function(e,t){return r.a.createElement("div",null,r.a.createElement("ol",null,e.attachments&&e.attachments.map(function(e,t){return r.a.createElement("li",null,r.a.createElement("a",{key:t,href:"./MonitoringAndReview/".concat(e.originalFileName)},e.originalFileName))})))}},{title:"Suggested Corrective Action",render:function(e,t){return r.a.createElement("div",null,e.suggestedCorrectiveAction||"")}},{title:"Noted By",render:function(e,t){return r.a.createElement("div",null,e.exceptionNotedBy&&e.exceptionNotedBy.displayName)}},{title:"Noted Date",render:function(e,t){return r.a.createElement("div",null,e.exceptionNotedTimeStamp&&ge()(e.exceptionNotedTimeStamp).format("lll"))}},{title:"Process Owner Response",render:function(e,t){return r.a.createElement("div",null,e.processOwnerResponse||"")}},{title:"Process Owner",render:function(e,t){return r.a.createElement("div",null,e.processOwner&&e.processOwner.displayName)}},{title:"Response Date",render:function(e,t){return r.a.createElement("div",null,e.processOwnerResponseTimeStamp&&ge()(e.processOwnerResponseTimeStamp).format("lll"))}}],i=e&&e.monitoringAndReview&&("No"===e.monitoringAndReview.q1||"No"===e.monitoringAndReview.q2||"No"===e.monitoringAndReview.q3);return r.a.createElement("html",{lang:"en"},r.a.createElement("head",null,r.a.createElement("meta",{charSet:"utf-8"}),r.a.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1, shrink-to-fit=no"}),r.a.createElement("meta",{httpEquiv:"X-UA-Compatible",content:"IE=edge"}),r.a.createElement("link",{rel:"stylesheet",href:"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"}),r.a.createElement("link",{rel:"stylesheet",href:"https://cdn.datatables.net/1.10.15/css/jquery.dataTables.min.css"}),r.a.createElement("link",{rel:"stylesheet",href:"https://cdn.datatables.net/colreorder/1.3.3/css/colReorder.dataTables.min.css"}),r.a.createElement("link",{rel:"stylesheet",href:"https://cdn.datatables.net/rowgroup/1.0.0/css/rowGroup.dataTables.min.css"}),r.a.createElement("script",{src:"https://code.jquery.com/jquery-1.12.4.js"}),r.a.createElement("script",{src:"https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"}),r.a.createElement("script",{src:"https://cdn.datatables.net/colreorder/1.3.3/js/dataTables.colReorder.min.js"}),r.a.createElement("script",{src:"https://cdn.datatables.net/rowgroup/1.0.0/js/dataTables.rowGroup.min.js"}),r.a.createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:this.style}}),r.a.createElement("style",{type:"text/css",media:"print",dangerouslySetInnerHTML:{__html:this.printStyle}})),r.a.createElement("body",{style:{margin:"10px"}},r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("h1",null,e.template.title," - ",e.template.version," - ",e.name)),r.a.createElement("div",{className:"col-sm-4"},r.a.createElement("h4",null,e.template.description),r.a.createElement("h6",{style:a},r.a.createElement("a",{href:t},"Click here to download process pdf")),r.a.createElement("h6",null,"Status: ",Ce()(e.status)),r.a.createElement("h6",null,"Fiscal Year: ",e.fiscalYear),r.a.createElement("h6",null,"Initiated On: ",ge()(e.initiatedOn).format("lll")),r.a.createElement("h6",null,"Initiated By: ",e.initiatedBy&&e.initiatedBy.displayName)),r.a.createElement("div",{className:"col-sm-4"},r.a.createElement("h4",null,"This process has been completed and signed off"),r.a.createElement("h6",null,"Signed On: ",ge()(e.signOff.timeStamp).format("lll")),r.a.createElement("h6",null,"Signed By: ",e.signOff.signer.displayName)),r.a.createElement("table",{id:"data",className:"display",cellSpacing:"0",style:{width:"100%"}},r.a.createElement("thead",null,r.a.createElement("tr",null,n.map(function(e,t){return r.a.createElement("th",{key:t},e.title)}))),r.a.createElement("tfoot",null,r.a.createElement("tr",null,r.a.createElement("td",{colSpan:8},r.a.createElement("b",null,"Notes:"),e.notes))),r.a.createElement("tbody",null,e.activities.map(function(e,t){return r.a.createElement("tr",{key:t},n.map(function(a,n){return r.a.createElement("td",{key:n},a.render&&a.render(e,t))}))}))),e.monitoringAndReview&&r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("hr",{style:{width:"100%",textAlign:"left",marginLeft:0}}),r.a.createElement("h1",null,"Monitoring And Review Section"),r.a.createElement("div",{className:"col-sm-12"},r.a.createElement("h5",null,"Status: ",r.a.createElement("b",null,Ce()(e.monitoringAndReview?e.monitoringAndReview.status:oe.NotStarted))),r.a.createElement("h5",null,"Signed On: ",r.a.createElement("b",null,e.monitoringAndReview.signOff&&e.monitoringAndReview.signOff.timeStamp&&ge()(e.monitoringAndReview.signOff.timeStamp).format("lll"))),r.a.createElement("h5",null,"Signoff By: ",r.a.createElement("b",null,e.monitoringAndReview.signOff&&e.monitoringAndReview.signOff.signer&&e.monitoringAndReview.signOff.signer.displayName))),r.a.createElement("p",{className:"col-sm-12"},r.a.createElement("b",null,e.monitoringAndReview.q1||"")," - Verify the activities in the checklist were reviewed by the appropriate personnel(s)."),r.a.createElement("p",{className:"col-sm-12"},r.a.createElement("b",null,e.monitoringAndReview.q2||"N/A")," - Verify the checklist is completed in a sufficiently timely manner. And verify each activity in the checklist was completed properly by inspecting the attachments/evidences, if available, and as needed."),r.a.createElement("p",{className:"col-sm-12"},r.a.createElement("b",null,e.monitoringAndReview.q3||"N/A")," - Verify the final review signature of the checklist was signed by the appropriate personnel."),!0===i&&r.a.createElement("p",{className:"col-sm-12"},r.a.createElement("b",null,e.monitoringAndReview.q4||"N/A")," - If the checklist fails any of the first three steps above, see exceptions."),e.monitoringAndReview.notedExceptions&&r.a.createElement("div",null,r.a.createElement("h4",null,"Noted Exceptions"),r.a.createElement("table",{id:"dataNotedExceptions",className:"display",cellSpacing:"0",style:{width:"100%"}},r.a.createElement("thead",null,r.a.createElement("tr",null,o.map(function(e,t){return r.a.createElement("th",{key:t},e.title)}))),r.a.createElement("tbody",null,e.monitoringAndReview&&e.monitoringAndReview.notedExceptions&&e.monitoringAndReview.notedExceptions.map(function(e,t){return r.a.createElement("tr",{key:t},o.map(function(a,n){return r.a.createElement("td",{key:n},a.render&&a.render(e,t))}))})))),e.monitoringAndReview.generalNotes&&r.a.createElement("div",null,r.a.createElement("h4",null,"General Notes:"),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:Ut.a.sanitize(e.monitoringAndReview.generalNotes||"")}}))),r.a.createElement("script",{type:"text/javascript",dangerouslySetInnerHTML:{__html:this.script}})))}},{key:"exportProcess",value:function(){var e=Object(O.a)(v.a.mark(function e(t,a,n,r){var o,i,s,c,l,p,u,d,h,m,y,f,g,b,O,w;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=new Wa.a,this.updateStatus("Generating Process Export...",r),e.next=4,_a(this.defaultDelayMs);case 4:return i=Object(Va.renderToStaticMarkup)(this.renderProcess(t)),o.file("index.html",i),e.next=8,_a(this.defaultDelayMs);case 8:return this.updateStatus("Exporting Activity Attachments...",r),e.next=11,_a(this.defaultDelayMs);case 11:s=0;case 12:if(!(s<t.activities.length)){e.next=52;break}if(!(c=t.activities[s]).attachments){e.next=28;break}l=0;case 16:if(!(l<c.attachments.length)){e.next=28;break}return p=c.attachments[l],this.updateStatus("Retrieving ".concat(p.originalFileName,"..."),r),u="/"+p.serverRelativeUrl.split("/")[1],d="".concat(n+u,"/_layouts/15/download.aspx?SourceUrl=").concat(p.serverRelativeUrl),e.next=23,V.a.get(d,{responseType:"blob"});case 23:h=e.sent,o.file("activity-".concat(s+1,"/").concat(p.originalFileName),h.data);case 25:l++,e.next=16;break;case 28:if(!t.monitoringAndReview||!t.monitoringAndReview.notedExceptions){e.next=49;break}m=0;case 30:if(!(m<t.monitoringAndReview.notedExceptions.length)){e.next=49;break}if(!(y=t.monitoringAndReview.notedExceptions[m]).attachments){e.next=46;break}f=0;case 34:if(!(f<y.attachments.length)){e.next=46;break}return g=y.attachments[f],this.updateStatus("Retrieving ".concat(g.originalFileName,"..."),r),b="/"+g.serverRelativeUrl.split("/")[1],O="".concat(n+b,"/_layouts/15/download.aspx?SourceUrl=").concat(g.serverRelativeUrl),e.next=41,V.a.get(O,{responseType:"blob"});case 41:w=e.sent,o.file("MonitoringAndReview/".concat(g.originalFileName),w.data);case 43:f++,e.next=34;break;case 46:m++,e.next=30;break;case 49:s++,e.next=12;break;case 52:return e.abrupt("return",o);case 53:case"end":return e.stop()}},e,this)}));return function(t,a,n,r){return e.apply(this,arguments)}}()},{key:"updateStatus",value:function(e,t){t&&t(e)}}]),e}();Ya.defaultDelayMs=1e3,Ya.style="\n  .dataTables_scroll div.dataTables_scrollBody>table>tbody>tr>td {\n        vertical-align: top !important;\n    }\n  .dataTables_scroll div.dataTables_scrollBody {\n      position: initial !important;\n      width: 100% !important;\n      height: unset !important;\n  }\n  #data_info{\n    display:none;\n  }\n    ",Ya.printStyle="\n      body {zoom: 82%;\n        orientation:landscape;\n    ",Ya.script="\n  $(document).ready(function () {\n      window.mytable = $('#data').DataTable({\n          'paging': false,\n          'lengthMenu': [\n              [10, 25, 50, 100, -1],\n              [10, 25, 50, 100, 'All']\n          ],\n          \"scrollX\": false,\n          \"responsive\": true\n      });\n\n      window.mytable.columns().every(function () {\n          var that = this;\n          $('input', this.footer()).on('keyup change', function () {\n              if (that.search() !== this.value) {\n                  that.search(this.value).draw();\n              }\n          });\n      });\n\n      window.mytable = $('#dataNotedExceptions').DataTable({\n        'paging': false,\n        'lengthMenu': [\n            [10, 25, 50, 100, -1],\n            [10, 25, 50, 100, 'All']\n        ],\n        \"scrollX\": false,\n        \"responsive\": true\n      });\n\n  });";var Ha,Ka,Ga,Ja,Qa,Xa,Za,$a,en,tn,an,nn,rn,on,sn,cn,ln,pn,un,dn,hn,mn,yn,fn,gn,vn,bn,On,wn,kn,En,Pn,Cn,xn,jn,An,Sn,Tn,Dn,Nn,Rn,In,Fn,Ln,Mn,Un,Bn,qn,Vn,_n,zn,Wn,Yn,Hn,Kn,Gn,Jn,Qn,Xn,Zn,$n,er,tr,ar,nr,rr,or,ir,sr,cr=(Dt=Tt=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(E.a)(this,Object(P.a)(t).call(this,e))).state={currentStatus:"Initializing..."},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"handleOnClose",value:function(){var e=Object(O.a)(v.a.mark(function e(t){var a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.onClose){e.next=10;break}if(!t){e.next=9;break}return e.next=4,t.generateAsync({type:"blob"});case 4:return a=e.sent,this.props.onClose(a),e.abrupt("return");case 9:this.props.onClose();case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"exportProcess",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t,a,n,r,o,i=this;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.origin,n=t.process,e.next=3,this.context.processStore.getProcessPathByProcessId(n.id);case 3:return r=e.sent,e.next=6,Ya.exportProcess(n,r,a,function(e){i.setState({currentStatus:e})});case 6:o=e.sent,this.handleOnClose(o);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){var e=Object(O.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.open){e.next=3;break}return e.next=3,this.exportProcess();case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.currentStatus;return r.a.createElement(Le.a,{open:this.props.open,onClose:function(){return e.handleOnClose()},"aria-labelledby":"export-process-dialog-title",fullWidth:!0,maxWidth:"xs",disableBackdropClick:!0},r.a.createElement(Me.a,{id:"export-process-dialog-title"},"Exporting Process..."),r.a.createElement(Ue.a,null,r.a.createElement("div",null,t),r.a.createElement(qa.a,null)),r.a.createElement(qe.a,null))}}]),t}(r.a.Component),Tt.contextType=ue,St=Dt,Object(x.a)(St.prototype,"handleOnClose",[D.a],Object.getOwnPropertyDescriptor(St.prototype,"handleOnClose"),St.prototype),Object(x.a)(St.prototype,"exportProcess",[D.a],Object.getOwnPropertyDescriptor(St.prototype,"exportProcess"),St.prototype),St),lr=Object(R.a)(Ve)(cr),pr=a(285),ur=a(5),dr=a(1314),hr=a(141),mr=a.n(hr),yr=a(142),fr=a.n(yr),gr=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(E.a)(this,Object(P.a)(t).call(this,e))).state={isEditField:!1,isError:!1,fieldBuffer:""},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.field,o=t.label,i=t.title,s=t.isLoading,c=t.readOnly,l=t.size,p=this.state,u=p.fieldBuffer,d=p.isError;return r.a.createElement(r.a.Fragment,null,!this.state.isEditField&&r.a.createElement(ot.a,{component:"div",style:{display:"flex",alignItems:"center",paddingRight:"40px",backgroundColor:"inherit"},elevation:0},l&&"small"===l&&r.a.createElement(de.a,{variant:"body1",component:"span",color:"inherit",noWrap:!0,className:a.textField},i," ",n),!l&&r.a.createElement(de.a,{variant:"h5",component:"span",color:"inherit",noWrap:!0,className:a.textField},i," ",n),!s&&!c&&r.a.createElement(M.a,{title:o?"Edit "+o:""},r.a.createElement("span",null,r.a.createElement(He.a,{"aria-label":"Edit",disabled:this.state.isEditField,onClick:function(t){t.preventDefault(),t.stopPropagation(),e.setState({fieldBuffer:n,isEditField:!0})}},r.a.createElement(mr.a,null))))),this.state.isEditField&&r.a.createElement(ot.a,{style:{display:"flex",alignItems:"center",width:"100%",padding:"2px 4px"},square:!1},r.a.createElement(De.a,{autoFocus:!0,fullWidth:!0,error:d,label:o,id:"renameProcessTemplateTitle",value:this.state.fieldBuffer,onChange:function(t){if(!0!==c){var a=t.target.value;e.setState({fieldBuffer:a}),0===a.length?e.setState({isError:!0}):e.setState({isError:!1})}}}),r.a.createElement(dr.a,{style:{width:1,margin:4}}),r.a.createElement(He.a,{disabled:d,"aria-label":"Save",onClick:function(t){t.preventDefault(),t.stopPropagation(),!0!==c&&(u&&u.length>0?(e.setState({isEditField:!1}),e.props.onSave(u)):e.setState({isError:!0}))}},r.a.createElement(Qt.a,null)),r.a.createElement(He.a,{"aria-label":"Cancel",onClick:function(t){t.preventDefault(),t.stopPropagation(),!0!==c&&e.setState({fieldBuffer:"",isEditField:!1,isError:!1})}},r.a.createElement(fr.a,null))))}}]),t}(r.a.Component),vr=Object(R.a)(function(e){return Object(N.a)({textField:{marginTop:5,marginBottom:5}})})(gr),br=a(1315),Or=a(1345),wr=a(1318),kr=a(1352),Er=a(1322),Pr=a(577),Cr=a.n(Pr),xr=a(1291),jr=a(1316),Ar=a(1351),Sr=Object(br.a)(function(e){return Object(N.a)({root:{width:"100%",padding:e.spacing(.5)}})}),Tr=function(e){e.questionId;var t=e.questionText,a=e.questionAnswer,n=e.onAnswerChange,o=e.disabled,i=Sr(),s=r.a.useState(a),c=Object(f.a)(s,2),l=c[0],p=c[1];r.a.useEffect(function(){p(a)},[a]);return r.a.createElement(Or.a,{display:"flex",className:i.root,justifyContent:"flex-start"},r.a.createElement(Or.a,{p:0,bgcolor:"grey.100"},r.a.createElement(xr.a,{component:"fieldset",style:{minWidth:150}},r.a.createElement(jr.a,{value:l,onChange:function(e){p(e.target.value),n(e.target.value)},row:!0},r.a.createElement(wr.a,{disabled:o,value:"Yes",control:r.a.createElement(Ar.a,{color:"primary"}),label:"Yes",labelPlacement:"end"}),r.a.createElement(wr.a,{disabled:o,value:"No",control:r.a.createElement(Ar.a,{color:"primary"}),label:"No",labelPlacement:"end"})))),r.a.createElement(Or.a,{p:1,bgcolor:"grey.100"},r.a.createElement(de.a,{component:"p"},t," ")))},Dr=a(1319),Nr=a(1320),Rr=a(1321),Ir=(Ha=function(e){function t(){return Object(w.a)(this,t),Object(E.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(k.a)(t,[{key:"handleAttachmentDrop",value:function(e){if(e&&1===e.length){if(this.props.onAttachmentUpload){if(this.isFileNameInvalid(e[0]))return;this.props.onAttachmentUpload(e[0])}}else 0===e.length&&alert("Please select one file at a time.")}},{key:"isFileNameInvalid",value:function(e){if(e.name.substring(0,e.name.lastIndexOf(".")).length>52)return alert("Filename is too long, max limit is 52 chars"),!0;var t=/\.(ade|adp|asa|exe|ashx|asp|cmd|db|tmp|config|dll|ini|aspx|svc|lnk)$/i.test(e.name);if(t)return alert("Invalid File"),t;var a=/^(?!\.)(?!com[0-9]$)(?!con$)(?!lpt[0-9]$)(?!nul$)(?!prn$)[^\|\*\?\\:%&{}~#<>/"]*[^\.\|\*\?\\:<>/$"]+$/.test(e.name);return a||alert("Invalid Filename"),!a}},{key:"handleAttachmentClicked",value:function(e){this.props.onAttachmentClicked&&this.props.onAttachmentClicked(e)}},{key:"handleAttachmentDelete",value:function(e){this.props.onAttachmentDelete&&this.props.onAttachmentDelete(e)}},{key:"getAttachmentAreaStyle",value:function(e){return e?{backgroundColor:"#eee"}:{}}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.allowActions,o=t.isUploadingAttachment,i=t.attachments,s=t.origin;return r.a.createElement(r.a.Fragment,null,o&&r.a.createElement(Te.a,{variant:"indeterminate",disableShrink:!0,className:a.progressSpinner,size:24,thickness:4}),!o&&r.a.createElement(r.a.Fragment,null,r.a.createElement(aa.a,{onDrop:this.handleAttachmentDrop,multiple:!1,disabled:!n},function(t){var o=t.getRootProps,c=t.getInputProps,l=t.isDragActive;return r.a.createElement(r.a.Fragment,null,r.a.createElement(de.a,{variant:"caption",style:e.getAttachmentAreaStyle(l)},r.a.createElement("div",o(),r.a.createElement("input",c()),r.a.createElement(Dr.a,{style:{margin:"2px",padding:"2px"}},r.a.createElement(Nr.a,null,r.a.createElement(ra.a,{style:{cursor:"pointer"},className:a.uploadIcon})),r.a.createElement(Rr.a,{style:{margin:"0",padding:0},primary:e.props.placeholderText||"Job Aid Attachments"})),r.a.createElement("div",null,(!i||i.length<=0)&&r.a.createElement(de.a,{variant:"caption"},r.a.createElement("i",null,"No Attachments")),i&&i.length>0&&we()(i,["fileName"],["asc"]).map(function(t){return r.a.createElement(st.a,{classes:{label:a.attachmentChipLabel,deleteIcon:a.attachmentChipDeleteIcon},className:a.attachmentChip,key:t.fileName,avatar:r.a.createElement(it.a,{className:a.attachmentAvatar,src:"".concat(s).concat(t.fileIconUrl||"/_layouts/images/ICGEN.GIF")}),label:t.fileName,color:"primary",onClick:function(){return e.handleAttachmentClicked(t)},onDelete:n?function(){return e.handleAttachmentDelete(t)}:void 0})})))))})))}}]),t}(r.a.Component),Object(x.a)(Ha.prototype,"handleAttachmentDrop",[D.a],Object.getOwnPropertyDescriptor(Ha.prototype,"handleAttachmentDrop"),Ha.prototype),Object(x.a)(Ha.prototype,"handleAttachmentClicked",[D.a],Object.getOwnPropertyDescriptor(Ha.prototype,"handleAttachmentClicked"),Ha.prototype),Object(x.a)(Ha.prototype,"handleAttachmentDelete",[D.a],Object.getOwnPropertyDescriptor(Ha.prototype,"handleAttachmentDelete"),Ha.prototype),Ha),Fr=Object(R.a)(function(e){return Object(N.a)({activityDescriptionColumn:{flexBasis:"70%"},activityAttachmentsColumn:{flexBasis:"30%",borderLeft:"2px solid ".concat(e.palette.divider),padding:"".concat(e.spacing(),"px ").concat(2*e.spacing(),"px")},activityCardHeading:{},activityCommentsTextField:{flexBasis:"70%",marginLeft:e.spacing(),marginRight:e.spacing()},activityCommentsInput:{fontSize:"12px"},attachmentChip:{height:"24px",margin:"2px"},attachmentChipLabel:{paddingLeft:"0"},attachmentChipDeleteIcon:{height:"15px",width:"15px"},attachmentAvatar:{margin:"5px",height:"15px",width:"15px"}})})(Ir),Lr=Object(br.a)(function(e){return Object(N.a)({root:{},textField:{padding:e.spacing(1),marginTop:e.spacing(2)},infoArea:{padding:e.spacing(1),marginTop:e.spacing(2),backgroundColor:e.palette.grey[100]},parentOverlay:{position:"relative",flexBasis:"70%"},overlay:{position:"absolute",top:0,left:5,"z-index":10}})}),Mr=function(e){var t=Lr(),a=r.a.useState(e.notedException),n=Object(f.a)(a,2),o=n[0],i=n[1];r.a.useEffect(function(){i(Object(W.a)({},e.notedException))},[e.notedException.id]);var s,c=function(){e.onClose()},l=function(){var t=Object(O.a)(v.a.mark(function t(a){var n;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!o.attachments){t.next=4;break}if(!o.attachments.find(function(e){return e.fileName.toLowerCase()===a.name.toLowerCase()})){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,e.onAttachmentUpload(o,a);case 6:(n=t.sent)&&i(Object(W.a)({},o,{attachments:[].concat(Object(b.a)(o.attachments||[]),[n])}));case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),p=function(){var e=Object(O.a)(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i(Object(W.a)({},o,{exceptionNoted:t}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(Le.a,{open:e.open,onClose:c,fullWidth:!0,maxWidth:"md","aria-labelledby":"new-noted-exception"},r.a.createElement(Me.a,{id:"form-dialog-title"},"Noted Exception "),r.a.createElement(Ue.a,null,r.a.createElement(Be.a,null,"Enter Exception Noted "),r.a.createElement(Or.a,null,r.a.createElement("div",{className:t.parentOverlay},r.a.createElement(ga,{placeholder:"Exception Noted ...",rawText:o&&o.exceptionNoted||"",onChange:p,waitForDebounce:200})),r.a.createElement(Or.a,{m:1},r.a.createElement(De.a,{id:"SuggestedCorrectiveActionInput",label:"Suggested corrective action",placeholder:"Suggested corrective action",className:t.textField,style:{},fullWidth:!0,value:o&&o.suggestedCorrectiveAction||"",onChange:(s="suggestedCorrectiveAction",function(e){i(Object(W.a)({},o,Object(j.a)({},s,e.target.value)))}),InputLabelProps:{shrink:!0}})),r.a.createElement(Or.a,{m:1},r.a.createElement(Fr,{allowActions:!0,isUploadingAttachment:!1,attachments:o&&o.attachments,origin:e.origin||"",onAttachmentClicked:function(t){window.open(e.origin+t.serverRelativeUrl,"_blank")},onAttachmentUpload:l,onAttachmentDelete:function(e){if(e&&o&&o.attachments){var t=o.attachments.findIndex(function(t){return t.fileName===e.fileName});t>=0&&(o.attachments.splice(t,1),i(Object(W.a)({},o,{attachments:Object(b.a)(o.attachments)})))}},placeholderText:"Add Attachment"})))),r.a.createElement(qe.a,null,r.a.createElement(Ne.a,{onClick:c,color:"primary",variant:"outlined",disabled:e.disabled},"Cancel"),r.a.createElement(Ne.a,{onClick:function(){e.onSubmitNotedException(Object(W.a)({},o))},color:"primary",variant:"outlined",disabled:e.disabled},"Ok")))},Ur=a(191),Br=a.n(Ur),qr=a(575),Vr=a.n(qr),_r=Object(br.a)(function(e){return Object(N.a)({root:{margin:e.spacing(2),backgroundColor:e.palette.grey[50]},textField:{},infoArea:{padding:e.spacing(1),marginTop:e.spacing(2)},otherArea:{margin:e.spacing(1)},lableArea:{marginLeft:e.spacing(1)}})}),zr=function(e){var t,a=e.notedException,n=e.disabled,o=e.onEditNotedExceptionClickOpen,i=e.onDeleteNotedException,s=e.onEditProcessOwner,c=e.origin,l=_r(),p=r.a.useState(a),u=Object(f.a)(p,2),d=u[0],h=u[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(ot.a,{className:l.root,style:{}},r.a.createElement(he.a,{container:!0,spacing:0,direction:"row",wrap:"nowrap",justify:"center"},r.a.createElement(he.a,{item:!0,xs:!0,zeroMinWidth:!0},r.a.createElement(Or.a,{className:l.otherArea},r.a.createElement(de.a,{variant:"body1",component:"span",color:"inherit",noWrap:!0,className:l.textField},"Exception Noted:\xa0"),r.a.createElement("div",{className:"rte",style:{fontSize:"1.2em"},dangerouslySetInnerHTML:(t=a.exceptionNoted,{__html:Ut.a.sanitize(t||"<p></p>")})})),r.a.createElement(Or.a,{className:l.otherArea},r.a.createElement(de.a,{variant:"body1",component:"span",color:"inherit",className:l.textField},"Suggested Corrective Action:\xa0"),r.a.createElement(de.a,{variant:"body1",component:"span",color:"inherit",className:l.textField},a.suggestedCorrectiveAction)),r.a.createElement(Or.a,{className:l.otherArea},"Noted on\xa0",r.a.createElement(Or.a,{component:"span",fontWeight:"fontWeightMedium",fontStyle:"italic"},ge()(a.exceptionNotedTimeStamp).format("lll")),"\xa0by\xa0",r.a.createElement(Or.a,{component:"span",fontWeight:"fontWeightMedium",fontStyle:"italic"},a.exceptionNotedBy&&a.exceptionNotedBy.displayName)),r.a.createElement(Or.a,{className:l.otherArea},r.a.createElement(pt,{origin:c||"",labelText:"Attachments",attachments:a&&a.attachments})),r.a.createElement(Or.a,{className:l.otherArea},r.a.createElement(vr,{readOnly:!0===n,isLoading:!1,label:"Process Owner Response",title:"Process Owner Response: ",field:d&&d.processOwnerResponse||"",size:"small",onSave:function(){var e=Object(O.a)(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:h(Object(W.a)({},d,{processOwnerResponse:t})),s(a.id,t);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()})),a.processOwner&&r.a.createElement(Or.a,{className:l.lableArea},"Responded\xa0on\xa0",r.a.createElement(Or.a,{component:"span",fontWeight:"fontWeightMedium",fontStyle:"italic"},a.processOwnerResponseTimeStamp&&ge()(a.processOwnerResponseTimeStamp).format("lll")),"\xa0by\xa0",r.a.createElement(Or.a,{component:"span",fontWeight:"fontWeightMedium",fontStyle:"italic"},a.processOwner&&a.processOwner.displayName))),!1===n&&r.a.createElement(he.a,{item:!0},r.a.createElement(He.a,{disabled:n,edge:"end","aria-label":"Delete View","data-id":a.id,onClick:function(){return e=a.id,void o(e);var e}},r.a.createElement(Vr.a,null)),r.a.createElement(He.a,{disabled:n,edge:"end","aria-label":"Delete View","data-id":a.id,onClick:function(){return e=a.id,void i(e);var e}},r.a.createElement(Ge.a,null))))))},Wr=Object(br.a)(function(e){return Object(N.a)({root:{width:"100%"},heading:{flexBasis:"80.33%",flexShrink:0},panelSummary:{backgroundColor:e.palette.grey[200]},extendedIcon:{marginRight:e.spacing(1)},margin:{margin:e.spacing(1)},OpenInNewStyle:{color:e.palette.primary.dark,marginLeft:"auto"},parentOverlay:{position:"relative",flexBasis:"70%"},overlay:{position:"absolute",top:-30,left:5,"z-index":10}})}),Yr=function(e){var t=e.monitoringAndReview,a=e.origin,n=e.onEditQuestions,o=e.onEditNotedExceptions,i=e.onNotesChange,c=e.onMonitoringAndReviewComplete,l=e.onUpdateMonitoringAndReviewProcessOwner,p=e.onNotedExceptiononAttachmentUpload,u=Wr(),d=Object(T.h)(),h=!(!d||"true"!==d.mr)&&"panel1",m=r.a.useState(d&&"true"===d.mr),y=Object(f.a)(m,2),g=y[0],w=y[1],k=r.a.useState(h),E=Object(f.a)(k,2),P=E[0],C=E[1],x=r.a.useState(!1),j=Object(f.a)(x,2),A=j[0],S=j[1],D=r.a.useState(!1),N=Object(f.a)(D,2),R=N[0],I=N[1],F=r.a.useState(!1),L=Object(f.a)(F,2),M=L[0],U=L[1],B=r.a.useState({id:""}),q=Object(f.a)(B,2),V=q[0],_=q[1],z=r.a.useState(!1),W=Object(f.a)(z,2),Y=W[0],H=W[1],K=function(e){var t=document.getElementById(e);if(t){var a=t.getClientRects(),n=a[0]?a[0].top:0;!!document.documentMode?document.documentElement.scrollTop=n:window.scrollTo(0,n)}};r.a.useEffect(function(){K&&h&&g&&(w(!1),K("MonitoringAndReviewComponentView"))},[]);var G,J=function(){var e=Object(O.a)(v.a.mark(function e(a){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return U(!0),H(!0),e.next=5,i(a);case 5:H(!1),U(!1);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),Q=function(e){if(S(!0),t&&t.notedExceptions){var a=t.notedExceptions.find(function(t){return t.id===e});a&&_(a)}},X=function(){return!(!t||t.status!==oe.Completed)},Z=function(){var e=Object(O.a)(v.a.mark(function e(a){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.notedExceptions){e.next=8;break}if(!((n=t.notedExceptions.findIndex(function(e){return e.id===a}))>=0)){e.next=8;break}return t.notedExceptions.splice(n,1),U(!0),e.next=7,o(t.notedExceptions);case 7:U(!1);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(O.a)(v.a.mark(function e(a){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return U(!0),t?t.notedExceptions?(n=t.notedExceptions.findIndex(function(e){return e.id===a.id}))>=0?t.notedExceptions[n]=a:t.notedExceptions=[].concat(Object(b.a)(t.notedExceptions),[a]):t.notedExceptions=[a]:t={status:oe.NotStarted,notedExceptions:[a]},e.next=4,o(t.notedExceptions);case 4:U(!1),S(!1);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(O.a)(v.a.mark(function e(a,n){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=a,e.next="q1"===e.t0?3:"q2"===e.t0?5:"q3"===e.t0?7:"q4"===e.t0?9:11;break;case 3:return t.q1=n,e.abrupt("break",11);case 5:return t.q2=n,e.abrupt("break",11);case 7:return t.q3=n,e.abrupt("break",11);case 9:return t.q4=n,e.abrupt("break",11);case 11:te(t);case 12:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),te=Ee()(function(){var e=Object(O.a)(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return U(!0),e.next=3,n(t);case 3:U(!1);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),1350),ae=function(){var e=Object(O.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:U(!0),setTimeout(Object(O.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:U(!1);case 3:case"end":return e.stop()}},e,this)})),3500);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(O.a)(v.a.mark(function e(a,n){var r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=9;break}if(!t.notedExceptions){e.next=9;break}if(!((r=t.notedExceptions.findIndex(function(e){return e.id===a}))>=0)){e.next=9;break}return t.notedExceptions[r].processOwnerResponse=n,U(!0),e.next=8,l(a,n);case 8:U(!1);case 9:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),re=function(){var e=Object(O.a)(v.a.mark(function e(t,a){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return U(!0),e.next=3,p(t,a);case 3:return n=e.sent,U(!1),e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:u.root},r.a.createElement(Bt.a,{expanded:"panel1"===P,onChange:(G="panel1",function(e,t){C(!!t&&G)})},r.a.createElement(qt.a,{className:u.panelSummary,expandIcon:r.a.createElement(Wt.a,null),"aria-controls":"panel1bh-content",id:"panel1bh-header"},r.a.createElement(de.a,{className:u.heading,variant:"h5"},"Monitoring and Review"),r.a.createElement(s.b,{className:u.OpenInNewStyle,to:"/process/".concat(d.id,"/true"),target:"_blank"},r.a.createElement(Cr.a,{style:{verticalAlign:"middle",paddingRight:5,fontSize:"2em"}}))),r.a.createElement(Vt.a,null,r.a.createElement(he.a,{container:!0},t&&r.a.createElement(he.a,{item:!0,xs:12},r.a.createElement(Tr,{disabled:M||X(),questionId:"q1",onAnswerChange:function(e){return ee("q1",e)},questionText:"Verify the activities in the checklist were reviewed by the appropriate personnel(s).",questionAnswer:t.q1}),r.a.createElement(Tr,{disabled:M||X(),questionId:"q2",onAnswerChange:function(e){return ee("q2",e)},questionText:"Verify the checklist is completed in a sufficiently timely manner.  And verify each activity in the checklist was completed properly by inspecting the attachments/evidences, if available, and as needed.",questionAnswer:t.q2}),r.a.createElement(Tr,{disabled:M||X(),questionId:"q3",onAnswerChange:function(e){return ee("q3",e)},questionText:"Verify the final review signature of the checklist was signed by the appropriate personnel.",questionAnswer:t.q3}),r.a.createElement(Tr,{disabled:!(t&&("No"===t.q1||"No"===t.q2||"No"===t.q3))||M||X(),questionId:"q4",onAnswerChange:function(e){return ee("q4",e)},questionText:"If the checklist fails any of the first three steps above, see exceptions.",questionAnswer:t.q4})),r.a.createElement(he.a,{item:!0,xs:12},r.a.createElement(he.a,{container:!0},r.a.createElement(he.a,{item:!0,xs:6},r.a.createElement(de.a,{variant:"h6"},"Noted Exceptions (and responses)")),r.a.createElement(he.a,{item:!0,xs:6},!1===X()&&r.a.createElement(Er.a,{disabled:M,variant:"extended",size:"small",color:"primary","aria-label":"add",className:u.margin,onClick:function(){S(!0),_({id:Object(ur.h)()})}},r.a.createElement(Br.a,{className:u.extendedIcon}),r.a.createElement(Or.a,{fontSize:"small"},"Add Noted Exception"))))),t&&t.notedExceptions&&t.notedExceptions.map(function(e,t){return r.a.createElement(he.a,{item:!0,xs:12,key:t},r.a.createElement(zr,{key:t,disabled:M||X(),origin:a,notedException:e,onEditNotedExceptionClickOpen:Q,onDeleteNotedException:Z,onEditProcessOwner:ne}))}),r.a.createElement(he.a,{item:!0,xs:12},r.a.createElement(he.a,{container:!0,direction:"row",spacing:1,alignItems:"stretch",style:{paddingTop:"10px"}},r.a.createElement(he.a,{item:!0,xs:6},r.a.createElement(Re.a,{style:{height:"100%"}},r.a.createElement(Ie.a,{title:"General Notes"}),r.a.createElement(Fe.a,null,function(){return t&&X()?r.a.createElement("div",{className:"rte",dangerouslySetInnerHTML:(e=t.generalNotes||"",{__html:Ut.a.sanitize(e||"<p></p>")})}):r.a.createElement("div",{className:u.parentOverlay},Y&&r.a.createElement(Te.a,{variant:"indeterminate",disableShrink:!0,className:u.overlay,size:24,thickness:4}),r.a.createElement(ga,{readOnly:!1,placeholder:"General Notes ...",rawText:t&&t.generalNotes||"",onChange:J,waitForDebounce:1350}));var e}()))),r.a.createElement(he.a,{item:!0,xs:6},r.a.createElement(Re.a,{style:{height:"100%"}},r.a.createElement(Ie.a,{title:"Monitoring and Review Signoff"}),r.a.createElement(Fe.a,null,r.a.createElement("div",{className:u.parentOverlay},M&&r.a.createElement(Te.a,{variant:"indeterminate",disableShrink:!0,className:u.overlay,size:24,thickness:4}),t&&X()&&r.a.createElement(Or.a,{component:"div",m:1},r.a.createElement(de.a,{className:u.heading,variant:"h6"},"Monitoring and Review Completed"),r.a.createElement(Or.a,null,"Completed\xa0",r.a.createElement(Or.a,{component:"span",fontWeight:"fontWeightMedium",fontStyle:"italic"},t.signOff&&ge()(t.signOff.timeStamp).format("lll")),"\xa0 by\xa0",r.a.createElement(Or.a,{component:"span",fontWeight:"fontWeightMedium",fontStyle:"italic"},t.signOff&&t.signOff.signer&&t.signOff.signer.displayName))),t&&!1===X()&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Or.a,{component:"div",m:1},r.a.createElement(wr.a,{disabled:M,control:r.a.createElement(kr.a,{checked:R,onChange:function(e){I(e.target.checked)},value:R,color:"primary"}),label:"I acknowledge that I have reviewed this process and confirm that it has been completed correctly."})),r.a.createElement(Or.a,{component:"div",m:1},r.a.createElement(Ne.a,{size:"large",color:"primary",onClick:ae,disabled:M||!R},"Monitoring and Review Complete")))))))))))),r.a.createElement(Mr,{onClose:function(){S(!1)},origin:a,open:A,disabled:M,notedException:V,onSubmitNotedException:$,onAttachmentUpload:re}))},Hr=a(1323),Kr=a(1325),Gr=a(1296),Jr=(Ja=Ga=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(E.a)(this,Object(P.a)(t).call(this,e))).state={isMoving:!1,to:"FY",isInvalidEntry:!0},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"handleOnClose",value:function(){this.props.onClose&&this.props.onClose()}},{key:"handleChange",value:function(e){var t=e.target.value.toLocaleUpperCase().slice(0,4),a=new Date;this.setState({isInvalidEntry:!0,to:t}),t.startsWith("FY")&&4===t.length&&(4!==t.length||Number("20"+t.substring(2,4))>=2015&&Number("20"+t.substring(2,4))<=a.getFullYear()+5)&&this.setState({isInvalidEntry:!1})}},{key:"moveProcessToAnotherFiscalYear",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t,a,n,r,o,i;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.onClose,n=t.id,r=this.state.to,o=this.context.processStore,n&&this.state.to){e.next=6;break}return a&&a(""),e.abrupt("return");case 6:return this.setState({isMoving:!0}),e.prev=7,e.next=10,o.moveProcessToAnotherFiscalYear(n,r);case 10:i=e.sent,a&&a(i,r),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(7),console.log(e.t0);case 17:return e.prev=17,this.setState({isMoving:!1}),e.finish(17);case 20:case"end":return e.stop()}},e,this,[[7,14,17,20]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.to,n=t.isMoving;return r.a.createElement(Le.a,{open:this.props.open,onClose:this.handleOnClose,"aria-labelledby":"confirm-move-process-dialog-title",fullWidth:!0,maxWidth:"sm"},r.a.createElement(Me.a,{id:"confirm-move-process-dialog-title"},"Move Process to Another Fiscal Year?"),r.a.createElement(Ue.a,null,r.a.createElement("div",null,"Are you sure you wish to move this process instance to"," ",r.a.createElement("strong",null,r.a.createElement("i",null,a))),r.a.createElement("div",{style:{marginTop:15}},r.a.createElement(xr.a,null,r.a.createElement(De.a,{required:!0,label:"To Fiscal Year",onChange:this.handleChange,value:this.state.to,variant:"outlined",error:this.state.isInvalidEntry}),r.a.createElement(Gr.a,{id:"standard-weight-helper-text"},"Fiscal year format is 'FY19', 'FY20' etc. Only 4 characters are allowed.")))),r.a.createElement(qe.a,null,n&&r.a.createElement(he.a,{container:!0,style:{margin:"15px"}},r.a.createElement(Te.a,{variant:"indeterminate",disableShrink:!0,className:e.facebook2,size:24,thickness:4})),!n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne.a,{onClick:this.handleOnClose,color:"primary"},"Cancel"),r.a.createElement(Ne.a,{onClick:this.moveProcessToAnotherFiscalYear,color:"primary",disabled:this.state.isInvalidEntry},"Move"))))}}]),t}(r.a.Component),Ga.contextType=ue,Ka=Ja,Object(x.a)(Ka.prototype,"handleOnClose",[D.a],Object.getOwnPropertyDescriptor(Ka.prototype,"handleOnClose"),Ka.prototype),Object(x.a)(Ka.prototype,"handleChange",[D.a],Object.getOwnPropertyDescriptor(Ka.prototype,"handleChange"),Ka.prototype),Object(x.a)(Ka.prototype,"moveProcessToAnotherFiscalYear",[D.a],Object.getOwnPropertyDescriptor(Ka.prototype,"moveProcessToAnotherFiscalYear"),Ka.prototype),Ka),Qr=Object(R.a)(Ve)(Jr),Xr=(Za=Xa=function(e){function t(e){var a;Object(w.a)(this,t),(a=Object(E.a)(this,Object(P.a)(t).call(this,e)))._isMounted=!1;var n=Se.a.parse(a.props.location.search);return a.state={isUpdatingNotes:!1,isLoadingProcess:!0,showSignoffDialog:!1,isSigningOff:!1,isUnsigning:!1,isRejecting:!1,origin:"",notes:"",responsibleParties:[],showDeleteAttachmentDialog:!1,showProcessLog:!1,showDeleteProcessDialog:!1,showMoveProcessDialog:!1,activeActivityId:n.aaid,showExportProcessDialog:!1,showUnsignDialog:!1,showRejectDialog:!1,information:{open:!1,text:"",isError:!1}},a.performNoteUpdate=Ee()(a.performNoteUpdate,3e3),a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"getNextIncompleteProcessActivityId",value:function(e){var t=this.state.process;if(t)for(var a=be()(t.activities,{id:e})+1;a<t.activities.length;a++){var n=t.activities[a];if(n.status===H.ActivityStatus.Incomplete||n.status===H.ActivityStatus.CompleteRequiresReview)return n.id}}},{key:"shouldShowWarningIfStatusChanges",value:function(e,t){if(!t||!t.template.activities)return!1;if(e<0||e>t.activities.length-1)return!1;var a=t.activities[e];if(a.status===H.ActivityStatus.Complete||a.status===H.ActivityStatus.CompleteRequiresReview){var n=t.activities[e+1];if(!n)return!1;var r=t.template.activities.find(function(e){return e.id===n.id});if(!r)return!1;if(!0===r.dependsOnPreviousActivity&&(n.status===H.ActivityStatus.Complete||n.status===H.ActivityStatus.CompleteRequiresReview))return!0}return!1}},{key:"markProcessActivityAsComplete",value:function(){var e=Object(O.a)(v.a.mark(function e(t){var a,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.state.process){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.context.processStore.markProcessActivityAsComplete(a.id,t.id);case 5:n=e.sent,this.setState({process:n,notes:n.notes,activeActivityId:this.getNextIncompleteProcessActivityId(t.id)});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"markProcessActivityAsIncomplete",value:function(){var e=Object(O.a)(v.a.mark(function e(t){var a,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.state.process){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.context.processStore.markProcessActivityAsIncomplete(a.id,t.id);case 5:n=e.sent,this.setState({process:n,notes:n.notes,activeActivityId:t.id});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"markProcessActivityAsNotRequired",value:function(){var e=Object(O.a)(v.a.mark(function e(t,a){var n,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state.process){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.context.processStore.markProcessActivityAsNotRequired(n.id,t.id,a);case 5:r=e.sent,this.setState({process:r,notes:r.notes,activeActivityId:this.getNextIncompleteProcessActivityId(t.id)});case 7:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"markProcessActivityAsReviewed",value:function(){var e=Object(O.a)(v.a.mark(function e(t){var a,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.state.process){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.context.processStore.markProcessActivityAsReviewed(a.id,t.id);case 5:n=e.sent,this.setState({process:n,notes:n.notes,activeActivityId:this.getNextIncompleteProcessActivityId(t.id)});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"performNoteUpdate",value:function(){var e=Object(O.a)(v.a.mark(function e(t,a){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isUpdatingNotes:!0}),e.next=3,this.context.processStore.updateProcessNotes(t,a);case 3:this.setState({isUpdatingNotes:!1});case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"handleNoteChanged",value:function(){var e=Object(O.a)(v.a.mark(function e(t){var a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.state.process){e.next=3;break}return e.abrupt("return");case 3:this.setState({notes:t.target.value}),this.performNoteUpdate(a.id,t.target.value);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"beginSignOff",value:function(){this.setState({showSignoffDialog:!0})}},{key:"beginUnsign",value:function(){this.setState({showUnsignDialog:!0})}},{key:"beginRejection",value:function(){var e=Object(O.a)(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({showRejectDialog:!0});case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleCompleteRejectProcess",value:function(){var e=Object(O.a)(v.a.mark(function e(t,a){var n,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state.process){e.next=3;break}return e.abrupt("return");case 3:return this.setState({isRejecting:!0}),e.next=6,this.context.processStore.rejectProcess(n.id,t);case 6:r=e.sent,this.setState({isRejecting:!1,showRejectDialog:!1,process:r}),void 0===a?this.props.history.push("/processes"):a&&a.templateId&&this.props.history.push("/templates?pt=".concat(a.templateId,"&start=").concat(a.procInstanceId,"&name=").concat(a.procInstanceName));case 9:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"handleUnsignDialogClose",value:function(){this.setState({showUnsignDialog:!1})}},{key:"handleRejectDialogClose",value:function(){this.setState({showRejectDialog:!1})}},{key:"handleSignOffDialogClose",value:function(){this.setState({showSignoffDialog:!1})}},{key:"unsignProcess",value:function(){var e=Object(O.a)(v.a.mark(function e(t){var a,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.state.process){e.next=3;break}return e.abrupt("return");case 3:return this.setState({isUnsigning:!0}),e.next=6,this.context.processStore.unsignProcess(a.id,t);case 6:n=e.sent,this.setState({isUnsigning:!1,notes:n.notes,showUnsignDialog:!1,process:n});case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleSignOff",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t,a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.process){e.next=3;break}return e.abrupt("return");case 3:return this.setState({isSigningOff:!0}),e.next=6,this.context.processStore.signCompletedProcess(t.id);case 6:a=e.sent,this.setState({process:a,notes:a.notes,isSigningOff:!1,showSignoffDialog:!1});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleAttachmentUpload",value:function(){var e=Object(O.a)(v.a.mark(function e(t,a){var n,r,o,i;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state.process){e.next=3;break}return e.abrupt("return");case 3:return r=a.name,o=Object(ur.h)()+r.substr(r.lastIndexOf(".")),e.next=7,this.context.processStore.uploadProcessActivityAttachment(n.id,t.id,o,r,a);case 7:i=e.sent,this.setState({process:i,notes:i.notes,activeActivityId:t.id});case 9:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"handleDeleteAttachmentDialogClosed",value:function(){this.setState({showDeleteAttachmentDialog:!1,deleteAttachmentActivity:void 0,deleteAttachmentAttachment:void 0})}},{key:"beginAttachmentDelete",value:function(){var e=Object(O.a)(v.a.mark(function e(t,a){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({showDeleteAttachmentDialog:!0,deleteAttachmentActivity:t,deleteAttachmentAttachment:a});case 1:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"handleAttachmentDelete",value:function(){var e=Object(O.a)(v.a.mark(function e(t,a){var n,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state.process){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.context.processStore.removeProcessActivityAttachment(n.id,t.id,a.fileName);case 5:r=e.sent,this.setState({process:r,notes:r.notes,activeActivityId:t.id,showDeleteAttachmentDialog:!1,deleteAttachmentActivity:void 0,deleteAttachmentAttachment:void 0});case 7:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"handleResponsiblePartyUpdated",value:function(){var e=Object(O.a)(v.a.mark(function e(t,a){var n,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state.process){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.context.processStore.updateProcessActivityResponsibleParty(n.id,t.id,a);case 5:r=e.sent,this.setState({process:r,notes:r.notes,activeActivityId:t.id});case 7:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"handleEditMonitoringAndReviewQuestions",value:function(){var e=Object(O.a)(v.a.mark(function e(t){var a,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=this.state.process)){e.next=12;break}return e.prev=2,e.next=5,this.context.processStore.updateMonitoringAndReviewQuestions(a.id,t);case 5:n=e.sent,this.setState({process:n}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),this.setState({information:{open:!0,text:"There was a problem autoSaving data. Please refresh page and try again.",isError:!0}});case 12:case"end":return e.stop()}},e,this,[[2,9]])}));return function(t){return e.apply(this,arguments)}}()},{key:"handleEditMonitoringAndReviewNotedExceptions",value:function(){var e=Object(O.a)(v.a.mark(function e(t){var a,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=this.state.process)){e.next=12;break}return e.prev=2,e.next=5,this.context.processStore.updateMonitoringAndReviewNotedExceptions(a.id,t);case 5:n=e.sent,this.setState({process:n}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),this.setState({information:{open:!0,text:"There was a problem autoSaving data. Please refresh page and try again.",isError:!0}});case 12:case"end":return e.stop()}},e,this,[[2,9]])}));return function(t){return e.apply(this,arguments)}}()},{key:"handleEditMonitoringAndReviewNotes",value:function(){var e=Object(O.a)(v.a.mark(function e(t){var a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({isUpdatingNotes:!0}),!this.state.process){e.next=6;break}return e.next=4,this.context.processStore.updateMonitoringAndReviewNotes(this.state.process.id,t);case 4:a=e.sent,this.setState({process:a});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleMonitoringAndReviewComplete",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.process){e.next=15;break}return e.prev=1,this.setState({isUpdatingNotes:!0}),e.next=5,this.context.processStore.markMonitoringAndReviewAsComplete(this.state.process.id);case 5:t=e.sent,this.setState({isUpdatingNotes:!1,process:t}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),this.setState({information:{open:!0,text:"Could not complete due to incomplete data.",isError:!0}});case 12:return e.prev=12,this.setState({isUpdatingNotes:!1}),e.finish(12);case 15:case"end":return e.stop()}},e,this,[[1,9,12,15]])}));return function(){return e.apply(this,arguments)}}()},{key:"handleUpdateMonitoringAndReviewProcessOwner",value:function(){var e=Object(O.a)(v.a.mark(function e(t,a){var n,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.process){e.next=16;break}return n=this.state.process.id,e.prev=2,this.setState({isUpdatingNotes:!0}),e.next=6,this.context.processStore.updateMonitoringAndReviewProcessOwner(n,t,a);case 6:r=e.sent,this.setState({isUpdatingNotes:!1,process:r}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),this.setState({information:{open:!0,text:"Could not update process owner.",isError:!0}});case 13:return e.prev=13,this.setState({isUpdatingNotes:!1}),e.finish(13);case 16:case"end":return e.stop()}},e,this,[[2,10,13,16]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"getIsActivityExpanded",value:function(e){var t=this.state.activeActivityId,a=!1;return Array.isArray(t)?a=!!t.find(function(t){return t===e.id}):t&&(a=t===e.id),a}},{key:"handleActivityExpanded",value:function(){var e=Object(O.a)(v.a.mark(function e(t,a){var n,r,o,i;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=this.state.activeActivityId,Array.isArray(n)||(n="string"===typeof n?[n]:[]),(r=n.indexOf(t.id))>=0&&n.splice(r,1),a&&n.unshift(t.id),o=Se.a.parse(this.props.location.search),i=n.slice(0,5),o.aaid=i,this.props.location.search!==Se.a.stringify(o)&&this.props.history.replace("".concat(this.props.location.pathname,"?").concat(Se.a.stringify(o))),this.setState({activeActivityId:n});case 10:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"handleActivityCommentsUpdated",value:function(){var e=Object(O.a)(v.a.mark(function e(t,a){var n,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.state.process){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.context.processStore.updateProcessActivityComments(n.id,t.id,a);case 5:r=e.sent,this.setState({process:r,notes:r.notes,activeActivityId:t.id});case 7:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"handleInfoClose",value:function(){var e=Object(O.a)(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({information:{open:!1,text:"",isError:!1}});case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"beginDeleteProcess",value:function(){this.state.process&&this.setState({showDeleteProcessDialog:!0})}},{key:"beginMoveProcess",value:function(){this.state.process&&this.setState({showMoveProcessDialog:!0})}},{key:"handleDeleteProcessDialogClosed",value:function(e){this.setState({showDeleteProcessDialog:!1}),!0===e&&this.props.history.replace("/processes")}},{key:"handleMoveProcessToFiscalYearDialogClosed",value:function(e,t){var a=this.state.process;a&&t&&(a.fiscalYear=t),this.setState({showMoveProcessDialog:!1}),e&&e.length>0&&this.setState({process:a,information:{open:!0,text:"".concat(e),isError:!1}})}},{key:"showProcessLog",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t,a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.process){e.next=3;break}return e.abrupt("return");case 3:return this.setState({showProcessLog:!0,processLog:void 0}),e.next=6,this.getProcessLog(t);case 6:a=e.sent,this.setState({processLog:a});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"hideProcessLog",value:function(){this.setState({showProcessLog:!1})}},{key:"getSharePointOrigin",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t,a,n,r,o,i;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return e.next=4,this.context.spContext.getContextInfo();case 4:return t=e.sent,(a=document.createElement("a")).setAttribute("href",t.WebFullUrl),n=a.hostname,r=a.port,o=a.protocol,i="".concat(o,"//").concat(n).concat(r.length?":".concat(r):""),e.abrupt("return",i);case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getProcessLog",value:function(){var e=Object(O.a)(v.a.mark(function e(t){var a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.context.processLogStore,e.next=3,a.getProcessLogByProcessId(t.id);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"isPreviousActivityCompleted",value:function(e,t){if(0===e)return!0;if(e>t.length-1)return!1;switch(t[e-1].status){case H.ActivityStatus.Complete:case H.ActivityStatus.CompleteRequiresReview:case H.ActivityStatus.NotRequired:return!0;default:return!1}}},{key:"activityDepth",value:function(e,t){if(t&&t>=5)return 5;if(!e)return t||0;var a=this.state.process;if(!a||!a.template||!a.template.activities||a.template.activities.length<=0)return t||0;var n=be()(a.template.activities,{id:e});return n<=0?t||0:a.template.activities[n].dependsOnPreviousActivity?this.activityDepth(a.template.activities[n-1].id,(t||0)+1):t||0}},{key:"componentDidMount",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t,a,n,r,o,i,s;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._isMounted=!0,t=this.props.match,a=this.context,n=a.processStore,r=a.processTemplateStore,e.next=5,this.getSharePointOrigin();case 5:return o=e.sent,e.next=8,n.getProcessById(t.params.id);case 8:return i=e.sent,e.next=11,r.getPartiesList();case 11:s=e.sent,s=we()(s,["text"],"asc"),!0===this._isMounted&&this.setState({isLoadingProcess:!1,process:i,notes:i.notes,origin:o,responsibleParties:s});case 14:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(O.a)(v.a.mark(function e(t){var a,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((a=this.props.match).params.id===t.match.params.id){e.next=6;break}return e.next=4,this.context.processStore.getProcessById(a.params.id);case 4:(n=e.sent)&&!0===this._isMounted&&this.setState({isLoadingProcess:!1,process:n,notes:n.notes});case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"exportToZip",value:function(){var e=Object(O.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({showExportProcessDialog:!0});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleExportProcessDialogClosed",value:function(e){var t=this.state.process;t&&(e&&Object(pr.saveAs)(e,je()("".concat(t.name))+".zip"),this.setState({showExportProcessDialog:!1}))}},{key:"handleJobAidAttachments",value:function(e,t){var a=It()(e.template.activities,{id:t});if(a)return a.jobAidAttachments}},{key:"handleNavigateToRejectedProcess",value:function(e){this.props.history.push("/process/".concat(e))}},{key:"handleNotedExceptionAttachmentUpload",value:function(){var e=Object(O.a)(v.a.mark(function e(t,a){var n,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.context.processStore,r=this.state.process){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,n.uploadNotedExceptionAttachment(r.id,a.name,a,t.id);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.currentUser,o=this.state,i=o.isLoadingProcess,c=o.isUpdatingNotes,l=o.isSigningOff,p=o.showSignoffDialog,u=o.origin,d=o.process,h=o.notes,m=o.showDeleteAttachmentDialog,y=o.showDeleteProcessDialog,f=o.showProcessLog,g=o.showExportProcessDialog,b=o.showMoveProcessDialog,w=o.processLog,k=o.showUnsignDialog,E=o.isUnsigning,P=this.context.spContext.isAdministrator(n),C=this.context.spContext.isSystemAdministrator(n),x="",j="none";return d&&P&&(x="none",j=""),r.a.createElement(r.a.Fragment,null,i&&r.a.createElement(Te.a,{className:a.progress,size:30,thickness:5}),!i&&d&&r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,r.a.createElement(s.b,{to:"/"},"Home")),r.a.createElement(de.a,{variant:"h5",color:"inherit",noWrap:!0,className:a.toolbarTitle},r.a.createElement(ot.a,{style:{display:"flex"},square:!1},r.a.createElement(M.a,{title:"Share Process via Email"},r.a.createElement("a",{href:this.processLinkHref,style:{margin:"auto",marginRight:10,padding:0,height:24}},r.a.createElement(Ze.a,{color:"secondary"}))),r.a.createElement("div",{style:{display:"",width:"100%"}},r.a.createElement(vr,{readOnly:!P,isLoading:i,label:"Process Instance Name",title:"Process: ",field:d.name,onSave:function(){var t=Object(O.a)(v.a.mark(function t(a){var n;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoadingProcess:!0}),t.next=3,e.context.processStore.updateProcessName(d.id,a);case 3:n=t.sent,e.setState({process:n,isLoadingProcess:!1});case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()})))),r.a.createElement(Nt,{classes:a,process:d,origin:this.state.origin}),r.a.createElement("h4",null,"Activities ",r.a.createElement("i",null,"(",d.activities.length," Total)"),":"),d.activities.map(function(t,a){return r.a.createElement(Pa,{index:a,key:t.id,process:d,expanded:e.getIsActivityExpanded(t),activity:t,activityDepth:e.activityDepth(t.id),template:d.template,origin:u,responsibleParties:e.state.responsibleParties,isPreviousActivityCompleted:e.isPreviousActivityCompleted(a,d.activities),shouldShowWarningIfStatusChanges:e.shouldShowWarningIfStatusChanges(a,d),allowActions:!(d.status===H.ProcessStatus.CompletedAndSigned||d.status===H.ProcessStatus.Rejected),onExpanded:e.handleActivityExpanded,onMarkAsComplete:e.markProcessActivityAsComplete,onMarkAsIncomplete:e.markProcessActivityAsIncomplete,onMarkAsNotRequired:e.markProcessActivityAsNotRequired,onMarkAsReviewed:e.markProcessActivityAsReviewed,onAttachmentUpload:e.handleAttachmentUpload,onAttachmentDelete:e.beginAttachmentDelete,onResponsiblePartyUpdated:e.handleResponsiblePartyUpdated,onCommentsUpdated:e.handleActivityCommentsUpdated,jobAidAttachments:e.handleJobAidAttachments(d,t.id)})}),r.a.createElement(he.a,{container:!0,spacing:8,style:{paddingTop:"10px"}},r.a.createElement(he.a,{item:!0,xs:6},r.a.createElement(Re.a,null,r.a.createElement(Ie.a,{title:"Notes:"}),r.a.createElement(Fe.a,null,r.a.createElement("div",{className:a.parentOverlay},c&&r.a.createElement(Te.a,{variant:"indeterminate",disableShrink:!0,className:a.overlay,size:24,thickness:4}),r.a.createElement(De.a,{fullWidth:!0,variant:"filled",placeholder:"Enter any comments or notes associated with the process",rows:"6",rowsMax:"6",multiline:!0,value:h,onChange:this.handleNoteChanged,margin:"normal",InputLabelProps:{shrink:!0}}))))),r.a.createElement(he.a,{item:!0,xs:6},r.a.createElement(La,{classes:a,process:d,beginSignOff:this.beginSignOff,beginUnsign:this.beginUnsign,beginReject:this.beginRejection,onNavigateToRejectedProcess:this.handleNavigateToRejectedProcess})),r.a.createElement(he.a,{item:!0,xs:12,style:{textAlign:"right",paddingBottom:1}},r.a.createElement(M.a,{title:"Show Process Log"},r.a.createElement("span",null,r.a.createElement(He.a,{onClick:this.showProcessLog},r.a.createElement(Qe.a,{style:{fontSize:"24px"}})))),r.a.createElement(M.a,{title:"Export Process"},r.a.createElement("span",null,r.a.createElement(He.a,{disabled:"CompletedAndSigned"!==d.status,onClick:this.exportToZip},r.a.createElement(et.a,{style:{fontSize:"24px"}})))),C&&r.a.createElement(M.a,{title:"Move Process to Another Fiscal Year"},r.a.createElement("span",null,r.a.createElement(He.a,{onClick:this.beginMoveProcess},r.a.createElement(at.a,{style:{fontSize:"24px"}})))),r.a.createElement(M.a,{title:"Delete Process",style:{display:j}},r.a.createElement("span",null,r.a.createElement(He.a,{onClick:this.beginDeleteProcess},r.a.createElement(Ge.a,{style:{fontSize:"24px"}})))),r.a.createElement(M.a,{style:{display:x},title:"A process instance cannot be deleted (even after un-signing) if it has ever been approved and signed. Please contact the BPM tool admin if you want it removed"},r.a.createElement(Ge.a,{style:{display:x,fontSize:"24px",color:"#c4c2c2",position:"relative",top:"8px",left:"10px"}}))),!0===P&&r.a.createElement(he.a,{item:!0,xs:12},r.a.createElement("div",{id:"MonitoringAndReviewComponentView"},r.a.createElement(Yr,{origin:u,monitoringAndReview:d.monitoringAndReview||{status:oe.NotStarted},onEditQuestions:this.handleEditMonitoringAndReviewQuestions,onEditNotedExceptions:this.handleEditMonitoringAndReviewNotedExceptions,onNotesChange:this.handleEditMonitoringAndReviewNotes,onMonitoringAndReviewComplete:this.handleMonitoringAndReviewComplete,onUpdateMonitoringAndReviewProcessOwner:this.handleUpdateMonitoringAndReviewProcessOwner,onNotedExceptiononAttachmentUpload:this.handleNotedExceptionAttachmentUpload})))),r.a.createElement(Le.a,{open:p,onClose:this.handleSignOffDialogClose,"aria-labelledby":"responsive-dialog-title"},r.a.createElement(Me.a,{id:"responsive-dialog-title"},"Confirm Process Sign Off"),r.a.createElement(Ue.a,null,r.a.createElement(Be.a,null,"By approving this process checklist, I am verifying that I have confirmed: i) all process steps were completed; ii) appropriate individual(s) completed each respective step and, in combination, a sufficient number of individuals were involved in the process cycle to ensure adequate segregation of duties; and iii) all process steps were completed in a sufficiently timely manner. Where any of these conditions were not previously met, I alerted the applicable individual(s) and had this process checklist recirculated for revision.")),r.a.createElement(qe.a,null,l&&r.a.createElement(he.a,{container:!0,style:{margin:"15px"}},r.a.createElement(Te.a,{variant:"indeterminate",disableShrink:!0,className:a.progressSpinner,size:24,thickness:4})),!l&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne.a,{onClick:this.handleSignOffDialogClose,color:"primary"},"Cancel"),r.a.createElement(Ne.a,{onClick:this.handleSignOff,color:"primary",autoFocus:!0},"Sign Off")))),r.a.createElement(Le.a,{open:f,onClose:this.hideProcessLog},r.a.createElement(Me.a,{id:"process-log-dialog-title"},"Process Log"),r.a.createElement(Ue.a,null,r.a.createElement(de.a,{variant:"caption"},!w&&r.a.createElement(Te.a,{variant:"indeterminate",disableShrink:!0,className:a.progressSpinner,size:24,thickness:4}),w&&we()(w.logEntries,["timeStamp"],["desc"]).map(function(e,t){return r.a.createElement("div",{key:t},ge()(e.timeStamp).format("lll")," - ",Ce()(e.kind)," - ",e.user.displayName)})))),r.a.createElement(ze,{open:k,onClose:this.handleUnsignDialogClose,handleUnsign:this.unsignProcess,process:d,isUnsigning:E}),r.a.createElement(Ye,{open:this.state.showRejectDialog,onClose:this.handleRejectDialogClose,handleReject:this.handleCompleteRejectProcess,process:d,isRejectinging:this.state.isRejecting}),r.a.createElement(Ma,{classes:a,open:m,onClose:this.handleDeleteAttachmentDialogClosed,onDeleteProcessTemplate:this.handleAttachmentDelete,activity:this.state.deleteAttachmentActivity,attachment:this.state.deleteAttachmentAttachment}),r.a.createElement(Ba,{open:y,process:d,onClose:this.handleDeleteProcessDialogClosed}),g&&r.a.createElement(lr,{open:g,origin:u,process:d,onClose:this.handleExportProcessDialogClosed}),C&&r.a.createElement(Qr,{open:b,id:d.id,from:"N/A",onClose:this.handleMoveProcessToFiscalYearDialogClosed}),r.a.createElement(Hr.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.information.open,autoHideDuration:6e3,onClose:this.handleInfoClose},r.a.createElement(Kr.a,{classes:{root:!0===this.state.information.isError?a.snackbarError:a.snackbarInfo},message:this.state.information.text,action:[r.a.createElement(He.a,{key:"close","aria-label":"Close",color:"inherit",className:a.close,onClick:this.handleInfoClose},r.a.createElement(rt.a,null))]}))))}},{key:"processLinkHref",get:function(){var e=this.state.process;return e?"mailto:\n?subject=".concat(encodeURIComponent("Sharing BPM Process '".concat(e.name,"'")),"\n&body=").concat(encodeURIComponent("This process can be viewed on the OFS Business Process Management Portal (BPM Portal) using the following link: ".concat(window.location))):""}}]),t}(r.a.Component),Xa.contextType=ue,Qa=Za,Object(x.a)(Qa.prototype,"getNextIncompleteProcessActivityId",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"getNextIncompleteProcessActivityId"),Qa.prototype),Object(x.a)(Qa.prototype,"shouldShowWarningIfStatusChanges",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"shouldShowWarningIfStatusChanges"),Qa.prototype),Object(x.a)(Qa.prototype,"markProcessActivityAsComplete",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"markProcessActivityAsComplete"),Qa.prototype),Object(x.a)(Qa.prototype,"markProcessActivityAsIncomplete",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"markProcessActivityAsIncomplete"),Qa.prototype),Object(x.a)(Qa.prototype,"markProcessActivityAsNotRequired",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"markProcessActivityAsNotRequired"),Qa.prototype),Object(x.a)(Qa.prototype,"markProcessActivityAsReviewed",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"markProcessActivityAsReviewed"),Qa.prototype),Object(x.a)(Qa.prototype,"performNoteUpdate",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"performNoteUpdate"),Qa.prototype),Object(x.a)(Qa.prototype,"handleNoteChanged",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"handleNoteChanged"),Qa.prototype),Object(x.a)(Qa.prototype,"beginSignOff",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"beginSignOff"),Qa.prototype),Object(x.a)(Qa.prototype,"beginUnsign",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"beginUnsign"),Qa.prototype),Object(x.a)(Qa.prototype,"beginRejection",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"beginRejection"),Qa.prototype),Object(x.a)(Qa.prototype,"handleCompleteRejectProcess",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"handleCompleteRejectProcess"),Qa.prototype),Object(x.a)(Qa.prototype,"handleUnsignDialogClose",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"handleUnsignDialogClose"),Qa.prototype),Object(x.a)(Qa.prototype,"handleRejectDialogClose",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"handleRejectDialogClose"),Qa.prototype),Object(x.a)(Qa.prototype,"handleSignOffDialogClose",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"handleSignOffDialogClose"),Qa.prototype),Object(x.a)(Qa.prototype,"unsignProcess",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"unsignProcess"),Qa.prototype),Object(x.a)(Qa.prototype,"handleSignOff",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"handleSignOff"),Qa.prototype),Object(x.a)(Qa.prototype,"handleAttachmentUpload",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"handleAttachmentUpload"),Qa.prototype),Object(x.a)(Qa.prototype,"handleDeleteAttachmentDialogClosed",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"handleDeleteAttachmentDialogClosed"),Qa.prototype),Object(x.a)(Qa.prototype,"beginAttachmentDelete",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"beginAttachmentDelete"),Qa.prototype),Object(x.a)(Qa.prototype,"handleAttachmentDelete",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"handleAttachmentDelete"),Qa.prototype),Object(x.a)(Qa.prototype,"handleResponsiblePartyUpdated",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"handleResponsiblePartyUpdated"),Qa.prototype),Object(x.a)(Qa.prototype,"handleEditMonitoringAndReviewQuestions",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"handleEditMonitoringAndReviewQuestions"),Qa.prototype),Object(x.a)(Qa.prototype,"handleEditMonitoringAndReviewNotedExceptions",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"handleEditMonitoringAndReviewNotedExceptions"),Qa.prototype),Object(x.a)(Qa.prototype,"handleEditMonitoringAndReviewNotes",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"handleEditMonitoringAndReviewNotes"),Qa.prototype),Object(x.a)(Qa.prototype,"handleMonitoringAndReviewComplete",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"handleMonitoringAndReviewComplete"),Qa.prototype),Object(x.a)(Qa.prototype,"handleUpdateMonitoringAndReviewProcessOwner",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"handleUpdateMonitoringAndReviewProcessOwner"),Qa.prototype),Object(x.a)(Qa.prototype,"getIsActivityExpanded",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"getIsActivityExpanded"),Qa.prototype),Object(x.a)(Qa.prototype,"handleActivityExpanded",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"handleActivityExpanded"),Qa.prototype),Object(x.a)(Qa.prototype,"handleActivityCommentsUpdated",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"handleActivityCommentsUpdated"),Qa.prototype),Object(x.a)(Qa.prototype,"handleInfoClose",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"handleInfoClose"),Qa.prototype),Object(x.a)(Qa.prototype,"beginDeleteProcess",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"beginDeleteProcess"),Qa.prototype),Object(x.a)(Qa.prototype,"beginMoveProcess",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"beginMoveProcess"),Qa.prototype),Object(x.a)(Qa.prototype,"handleDeleteProcessDialogClosed",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"handleDeleteProcessDialogClosed"),Qa.prototype),Object(x.a)(Qa.prototype,"handleMoveProcessToFiscalYearDialogClosed",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"handleMoveProcessToFiscalYearDialogClosed"),Qa.prototype),Object(x.a)(Qa.prototype,"showProcessLog",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"showProcessLog"),Qa.prototype),Object(x.a)(Qa.prototype,"hideProcessLog",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"hideProcessLog"),Qa.prototype),Object(x.a)(Qa.prototype,"getSharePointOrigin",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"getSharePointOrigin"),Qa.prototype),Object(x.a)(Qa.prototype,"getProcessLog",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"getProcessLog"),Qa.prototype),Object(x.a)(Qa.prototype,"isPreviousActivityCompleted",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"isPreviousActivityCompleted"),Qa.prototype),Object(x.a)(Qa.prototype,"activityDepth",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"activityDepth"),Qa.prototype),Object(x.a)(Qa.prototype,"exportToZip",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"exportToZip"),Qa.prototype),Object(x.a)(Qa.prototype,"handleExportProcessDialogClosed",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"handleExportProcessDialogClosed"),Qa.prototype),Object(x.a)(Qa.prototype,"handleJobAidAttachments",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"handleJobAidAttachments"),Qa.prototype),Object(x.a)(Qa.prototype,"handleNavigateToRejectedProcess",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"handleNavigateToRejectedProcess"),Qa.prototype),Object(x.a)(Qa.prototype,"handleNotedExceptionAttachmentUpload",[D.a],Object.getOwnPropertyDescriptor(Qa.prototype,"handleNotedExceptionAttachmentUpload"),Qa.prototype),Qa),Zr=Object(T.i)(Object(R.a)(ba)(Xr)),$r=Zr,eo=function(e){function t(e){return Object(w.a)(this,t),Object(E.a)(this,Object(P.a)(t).call(this,e))}return Object(C.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.data,n=e.path,o=e.isUploadingAttachment,i=e.origin;return r.a.createElement("div",{className:t.root},r.a.createElement(ot.a,{className:t.paper},r.a.createElement(he.a,{container:!0,className:t.container,spacing:6},r.a.createElement(he.a,{item:!0,xs:9},r.a.createElement(De.a,{fullWidth:!0,label:"Path",className:t.textField,value:n,InputProps:{readOnly:!0}})),r.a.createElement(he.a,{item:!0,xs:3},r.a.createElement(De.a,{fullWidth:!0,label:"Version",className:t.textField,value:"".concat(a.status?a.status.toString():"N/A",", ").concat(a.version?a.version:"0"),InputProps:{readOnly:!0}})),r.a.createElement(he.a,{item:!0,xs:9},r.a.createElement(De.a,{fullWidth:!0,label:"Created By",className:t.textField,value:a.createdBy?a.createdBy.displayName:"",InputProps:{readOnly:!0}})),r.a.createElement(he.a,{item:!0,xs:3},r.a.createElement(De.a,{fullWidth:!0,label:"Created Date",className:t.textField,value:a.created?ge()(a.created).format("lll"):"",InputProps:{readOnly:!0}})),r.a.createElement(he.a,{item:!0,xs:12},r.a.createElement(he.a,{container:!0,spacing:0,justify:"flex-start"},r.a.createElement(Fr,{allowActions:!0,isUploadingAttachment:o,attachments:this.props.data.jobAidAttachments,origin:i,onAttachmentClicked:this.props.onAttachmentClicked,onAttachmentUpload:this.props.onProcessAttachmentUpload,onAttachmentDelete:this.props.onProcessAttachmentDelete}))))))}}]),t}(r.a.Component),to=Object(R.a)(function(e){return Object(N.a)({root:{flexGrow:1},paper:{padding:"5px",textAlign:"center",color:e.palette.text.secondary},formControl:{margin:e.spacing(),width:"100%"}})})(eo),ao=a(216),no=a.n(ao),ro=a(591),oo=a.n(ro),io=a(592),so=a.n(io),co=a(384),lo=a.n(co),po=a(593),uo=a.n(po),ho=a(1326),mo=a(1356),yo=($a=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(E.a)(this,Object(P.a)(t).call(this,e))).waitForDebounce=2e3,a.state={id:Object(ur.h)(),description:"",allowAttachments:!0,dependsOnPreviousActivity:!1,responsibleParty:"",requireAttachments:!1,requiresReview:!1,showTooltip:!1,editorState:{},isPerformingAction:!1,jobAidAttachments:[],isUploadingAttachment:!1},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"setEditor",value:function(e){this.editor=e}},{key:"focusEditor",value:function(){this.editor&&this.editor.focus()}},{key:"onChange",value:function(e){this.setState({editorState:e})}},{key:"handleClose",value:function(e){e.preventDefault(),e.stopPropagation(),this.props.onClose("")}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),e.stopPropagation(),this.setState({isPerformingAction:!0},function(){setTimeout(function(){t.props.onSave(t.state,t.props.index),t.setState({isPerformingAction:!1})},t.waitForDebounce+500)})}},{key:"handleStringChange",value:function(e){var t=this.props,a=t.onActivityTemplateChange,n=t.index,r=Object(W.a)({},this.state);return function(t){switch(e){case"description":r.description=t.target.value,a(r,n);break;case"tooltip":r.tooltip=t.target.value,a(r,n);break;case"responsibleParty":r.responsibleParty=t.target.value,a(r,n)}}}},{key:"handleBooleanChange",value:function(e){var t=this.props,a=t.onActivityTemplateChange,n=t.index,r=Object(W.a)({},this.state);return function(t){switch(e){case"allowAttachments":r.allowAttachments=t.target.checked,a(r,n);break;case"requireAttachments":r.requireAttachments=t.target.checked,a(r,n);break;case"dependsOnPreviousActivity":r.dependsOnPreviousActivity=t.target.checked,a(r,n);break;case"requiresReview":r.requiresReview=t.target.checked,a(r,n);break;case"showTooltip":!1===t.target.checked?r.tooltip=void 0:r.tooltip="",a(r,n)}}}},{key:"focusTooltipInputField",value:function(e){e&&e.focus()}},{key:"handleDescriptionRTChange",value:function(e){var t=this.props,a=t.onActivityTemplateChange,n=t.index,r=Object(W.a)({},this.state);r.description=e,a(r,n)}},{key:"handleAttachmentClicked",value:function(e){window.open(this.props.origin+e.serverRelativeUrl,"_blank")}},{key:"handleAttachmentUpload",value:function(){var e=Object(O.a)(v.a.mark(function e(t){var a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isPerformingAction:!0,isUploadingAttachment:!0}),a=this.state,e.next=4,this.props.onAttachmentUpload(a,t);case 4:this.setState({isPerformingAction:!1,isUploadingAttachment:!1});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleAttachmentDelete",value:function(){var e=Object(O.a)(v.a.mark(function e(t){var a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isPerformingAction:!0,isUploadingAttachment:!0}),a=this.state,e.next=4,this.props.onAttachmentDelete(a,t);case 4:this.setState({isPerformingAction:!1,isUploadingAttachment:!1});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.description,a=e.isPerformingAction,n=e.isUploadingAttachment,o=this.props,i=o.classes,s=o.index,c=o.origin,l="".concat(s>=0?"Edit":"Add"," Activity");return r.a.createElement(Le.a,{fullWidth:!0,maxWidth:"md",open:this.props.open,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",disableBackdropClick:!0},r.a.createElement(Me.a,{id:"form-dialog-title",style:{padding:5}},l),r.a.createElement(Ue.a,null,r.a.createElement(he.a,{container:!0,spacing:0},r.a.createElement(he.a,{item:!0,xs:12},r.a.createElement(ga,{placeholder:"Description...",rawText:t,onChange:this.handleDescriptionRTChange,waitForDebounce:this.waitForDebounce})),r.a.createElement(he.a,{item:!0,xs:12},r.a.createElement(he.a,{container:!0},r.a.createElement(he.a,{item:!0,xs:8},r.a.createElement(he.a,{container:!0},r.a.createElement(he.a,{item:!0,xs:12},r.a.createElement(wr.a,{className:i.formControl,style:{paddingTop:5},control:r.a.createElement(kr.a,{className:i.formControl,checked:this.state.allowAttachments,onChange:this.handleBooleanChange("allowAttachments"),value:"allowAttachments"}),label:"Allow Attachments"})),r.a.createElement(he.a,{item:!0,xs:1}),r.a.createElement(he.a,{item:!0,xs:11},r.a.createElement(wr.a,{control:r.a.createElement(kr.a,{className:i.formControl,checked:this.state.requireAttachments,onChange:this.handleBooleanChange("requireAttachments"),value:"requireAttachments",disabled:!this.state.allowAttachments}),label:"Require Attachments"})),r.a.createElement(he.a,{item:!0,xs:12},r.a.createElement(wr.a,{control:r.a.createElement(kr.a,{className:i.formControl,style:{paddingBottom:"13px"},checked:this.state.dependsOnPreviousActivity,onChange:this.handleBooleanChange("dependsOnPreviousActivity"),value:"dependsOnPreviousActivity"}),label:"Depends on Prior Activity"})),r.a.createElement(he.a,{item:!0,xs:8},r.a.createElement(xr.a,{fullWidth:!0,style:{paddingBottom:"15px"}},r.a.createElement(mo.a,{htmlFor:"responsible-party"},"Responsible Party"),r.a.createElement($t.a,{value:this.state.responsibleParty,onChange:this.handleStringChange("responsibleParty"),inputProps:{name:"responsibleParty",id:"responsibleParty"}},r.a.createElement(ho.a,{value:""},r.a.createElement("em",null,"None")),this.props.parties.map(function(e){return r.a.createElement(ho.a,{key:e.value,value:e.text},e.text)})))),r.a.createElement(he.a,{item:!0,xs:4}),r.a.createElement(he.a,{item:!0,xs:12},r.a.createElement(wr.a,{control:r.a.createElement(kr.a,{className:i.formControl,checked:this.state.requiresReview,onChange:this.handleBooleanChange("requiresReview"),value:"requiresReview"}),label:"Requires Secondary Review"})))),r.a.createElement(he.a,{item:!0,xs:4,className:i.activityAttachmentsColumn},r.a.createElement(Fr,{allowActions:!0,isUploadingAttachment:n,attachments:this.state.jobAidAttachments,origin:c,onAttachmentClicked:this.handleAttachmentClicked,onAttachmentUpload:this.handleAttachmentUpload,onAttachmentDelete:this.handleAttachmentDelete})))),r.a.createElement(he.a,{item:!0,xs:12},r.a.createElement(wr.a,{control:r.a.createElement(kr.a,{className:i.formControl,checked:this.state.showTooltip,onChange:this.handleBooleanChange("showTooltip"),value:"showTooltip"}),label:"Tooltip?"})),this.state.showTooltip?r.a.createElement(he.a,{item:!0,xs:12},r.a.createElement(De.a,{inputRef:this.focusTooltipInputField,className:i.formControl,fullWidth:!0,id:"activityTemplateTooltipTextField",multiline:!0,placeholder:"Tooltip",rows:"4",value:this.state.tooltip,margin:"normal",onChange:this.handleStringChange("tooltip")})):null)),r.a.createElement(qe.a,null,r.a.createElement(he.a,{container:!0,direction:"row",justify:"flex-end",spacing:8,alignItems:"flex-start",style:{width:"100%",margin:0}},a&&r.a.createElement(he.a,{item:!0,style:{marginBottom:25,marginRight:30}},r.a.createElement(Te.a,{size:25})),!a&&r.a.createElement(he.a,{item:!0},r.a.createElement(Ne.a,{style:{margin:5},variant:"outlined",color:"primary",onClick:this.handleSubmit},"Submit"),r.a.createElement(Ne.a,{style:{margin:5},variant:"outlined",color:"primary",onClick:this.handleClose},"Cancel")))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var a=e.activityTemplate;if(a){var n=void 0!==a.tooltip;return{id:a.id,description:a.description,responsibleParty:a.responsibleParty,allowAttachments:a.allowAttachments,dependsOnPreviousActivity:a.dependsOnPreviousActivity,requireAttachments:a.requireAttachments,requiresReview:a.requiresReview,tooltip:a.tooltip,showTooltip:n,jobAidAttachments:a.jobAidAttachments}}return null}}]),t}(r.a.PureComponent),Object(x.a)($a.prototype,"setEditor",[D.a],Object.getOwnPropertyDescriptor($a.prototype,"setEditor"),$a.prototype),Object(x.a)($a.prototype,"focusEditor",[D.a],Object.getOwnPropertyDescriptor($a.prototype,"focusEditor"),$a.prototype),Object(x.a)($a.prototype,"onChange",[D.a],Object.getOwnPropertyDescriptor($a.prototype,"onChange"),$a.prototype),Object(x.a)($a.prototype,"handleClose",[D.a],Object.getOwnPropertyDescriptor($a.prototype,"handleClose"),$a.prototype),Object(x.a)($a.prototype,"handleSubmit",[D.a],Object.getOwnPropertyDescriptor($a.prototype,"handleSubmit"),$a.prototype),Object(x.a)($a.prototype,"handleStringChange",[D.a],Object.getOwnPropertyDescriptor($a.prototype,"handleStringChange"),$a.prototype),Object(x.a)($a.prototype,"handleBooleanChange",[D.a],Object.getOwnPropertyDescriptor($a.prototype,"handleBooleanChange"),$a.prototype),Object(x.a)($a.prototype,"focusTooltipInputField",[D.a],Object.getOwnPropertyDescriptor($a.prototype,"focusTooltipInputField"),$a.prototype),Object(x.a)($a.prototype,"handleDescriptionRTChange",[D.a],Object.getOwnPropertyDescriptor($a.prototype,"handleDescriptionRTChange"),$a.prototype),Object(x.a)($a.prototype,"handleAttachmentClicked",[D.a],Object.getOwnPropertyDescriptor($a.prototype,"handleAttachmentClicked"),$a.prototype),Object(x.a)($a.prototype,"handleAttachmentUpload",[D.a],Object.getOwnPropertyDescriptor($a.prototype,"handleAttachmentUpload"),$a.prototype),Object(x.a)($a.prototype,"handleAttachmentDelete",[D.a],Object.getOwnPropertyDescriptor($a.prototype,"handleAttachmentDelete"),$a.prototype),$a),fo=Object(R.a)(function(e){return Object(N.a)({root:{display:"flex",flexWrap:"wrap"},paper:Object(W.a)({},e.mixins.gutters(),{paddingTop:2*e.spacing(),paddingBottom:2*e.spacing()}),formControl:{padding:"2px"},selectEmpty:{marginTop:2*e.spacing()},editor:{border:"1px solid grey",minHeight:"6em"},activityAttachmentsColumn:{borderLeft:"2px solid ".concat(e.palette.divider),padding:"".concat(e.spacing(),"px ").concat(2*e.spacing(),"px"),marginTop:e.spacing()}})})(yo),go=a(66),vo=a(1327),bo=a(1317),Oo=a(581),wo=a.n(Oo),ko=a(583),Eo=a.n(ko),Po=a(582),Co=a.n(Po),xo=a(580),jo=a.n(xo),Ao=(en=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(E.a)(this,Object(P.a)(t).call(this,e))).state={id:"",description:"",responsibleParty:"",allowAttachments:!1,dependsOnPreviousActivity:!1,requireAttachments:!1,requiresReview:!1,showTooltip:!1,dependsOnClassname:e.classes.dependsOnRow,jobAidAttachments:[]},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"handleDeleteActionTemplate",value:function(e,t,a){this.props.onClickDelete(t,a)}},{key:"handleBooleanChange",value:function(e){var a=this,n=this.props,r=n.onActivityTemplateChange,o=n.index,i=Object(W.a)({},this.state);return function(n){switch(e){case"allowAttachments":i.allowAttachments=n.target.checked,r(i,o);break;case"requireAttachments":i.requireAttachments=n.target.checked,r(i,o);break;case"dependsOnPreviousActivity":var s=(void 0===a.props.index||0!==a.props.index)&&n.target.checked;i.dependsOnPreviousActivity=s,i.dependsOnClassname=t.setDependsOnClassname(a.props,n.target.checked),r(i,o);break;case"requiresReview":i.requiresReview=n.target.checked,r(i,o)}}}},{key:"render",value:function(){var e=this,a=this.state,n=a.id,o=a.description,i=a.dependsOnPreviousActivity,s=a.allowAttachments,c=a.requireAttachments,l=a.requiresReview,p=a.responsibleParty,u=a.tooltip,d=a.jobAidAttachments,h=a.dependsOnClassname,m=this.props,y=m.classes,f=m.activityDepth,g=m.index,v=m.readOnly;return r.a.createElement(ot.a,{className:y.paper+" "+h,style:{marginLeft:"".concat(15*f,"px")},id:n},r.a.createElement(he.a,{container:!0,spacing:0,direction:"row",wrap:"nowrap",justify:"center"},r.a.createElement(he.a,{item:!0,style:{padding:10}},r.a.createElement(it.a,null,r.a.createElement(wo.a,null))),r.a.createElement(he.a,{item:!0,xs:!0,zeroMinWidth:!0},r.a.createElement(he.a,{container:!0,className:y.listItemContent,direction:"column",spacing:0,justify:"flex-start"},r.a.createElement(he.a,{item:!0},r.a.createElement(de.a,{variant:"subtitle2"},"Activity #".concat(g+1))),r.a.createElement(he.a,{item:!0,className:"rte",dangerouslySetInnerHTML:{__html:Ut.a.sanitize(o)}}),r.a.createElement(he.a,{item:!0,style:{paddingTop:5}},p&&r.a.createElement(r.a.Fragment,null,r.a.createElement(de.a,{variant:"subtitle1"},r.a.createElement(Er.a,{size:"small",color:"primary",className:y.responsiblePartyInitials},t.getInitials(p)),r.a.createElement("span",{style:{paddingLeft:7}},p)))),r.a.createElement(he.a,{container:!0,justify:"flex-end"},r.a.createElement(xr.a,null,r.a.createElement(bo.a,{row:!0},u&&u.length>0&&r.a.createElement(wr.a,{control:r.a.createElement(M.a,{title:u||"",enterDelay:500,leaveDelay:200},r.a.createElement(Co.a,{color:"action"})),label:""}),g>0&&r.a.createElement(wr.a,{hidden:void 0!==g&&0===g,control:r.a.createElement(vo.a,{onChange:this.handleBooleanChange("dependsOnPreviousActivity"),checked:i}),label:"Depends On Previous"}),r.a.createElement(wr.a,{control:r.a.createElement(vo.a,{onChange:this.handleBooleanChange("allowAttachments"),checked:s}),label:"Allow Attachments"}),r.a.createElement(wr.a,{control:r.a.createElement(vo.a,{onChange:this.handleBooleanChange("requireAttachments"),checked:c,disabled:!s}),label:"Require Attachments"}),r.a.createElement(wr.a,{control:r.a.createElement(vo.a,{onChange:this.handleBooleanChange("requiresReview"),checked:l}),label:"Requires Secondary  Review"})))))),!v&&r.a.createElement(he.a,{item:!0},d&&d.length>0&&r.a.createElement(M.a,{title:d.map(function(e){return e.fileName}).join(", "),enterDelay:500,leaveDelay:200},r.a.createElement(He.a,{onClick:function(t){t.preventDefault(),t.stopPropagation(),e.props.onClickEdit(e.state,e.props.index)},key:n},r.a.createElement(Eo.a,null))),r.a.createElement(He.a,{"aria-label":"Edit / View",onClick:function(t){t.preventDefault(),t.stopPropagation(),e.props.onClickEdit(e.state,e.props.index)},key:n},r.a.createElement(mr.a,null)),r.a.createElement(He.a,{onClick:function(t){t.preventDefault(),t.stopPropagation(),e.handleDeleteActionTemplate(t,e.state,e.props.index)}},r.a.createElement(Ge.a,{className:y.deleteButton})))))}}],[{key:"getDerivedStateFromProps",value:function(e,a){return e.activityTemplate.id===a.id&&e.activityTemplate.allowAttachments===a.allowAttachments&&e.activityTemplate.dependsOnPreviousActivity===a.dependsOnPreviousActivity&&e.activityTemplate.description===a.description&&e.activityTemplate.requireAttachments===a.requireAttachments&&e.activityTemplate.requiresReview===a.requiresReview&&e.activityTemplate.responsibleParty===a.responsibleParty&&e.activityTemplate.tooltip===a.tooltip&&jo()(e.activityTemplate.jobAidAttachments,a.jobAidAttachments)?null:{id:e.activityTemplate.id,description:e.activityTemplate.description,responsibleParty:e.activityTemplate.responsibleParty,allowAttachments:e.activityTemplate.allowAttachments,dependsOnPreviousActivity:e.activityTemplate.dependsOnPreviousActivity,requireAttachments:e.activityTemplate.requireAttachments,requiresReview:e.activityTemplate.requiresReview,tooltip:e.activityTemplate.tooltip,jobAidAttachments:e.activityTemplate.jobAidAttachments,dependsOnClassname:t.setDependsOnClassname(e,e.activityTemplate.dependsOnPreviousActivity)}}},{key:"setDependsOnClassname",value:function(e,t){return t?e.classes.dependsOnRow:e.classes.notDependsOnRow}},{key:"getInitials",value:function(e){var t=e.match(/\b\w/g)||[];return((t.shift()||"")+(t.pop()||"")).toUpperCase()}}]),t}(r.a.PureComponent),Object(x.a)(en.prototype,"handleDeleteActionTemplate",[D.a],Object.getOwnPropertyDescriptor(en.prototype,"handleDeleteActionTemplate"),en.prototype),Object(x.a)(en.prototype,"handleBooleanChange",[D.a],Object.getOwnPropertyDescriptor(en.prototype,"handleBooleanChange"),en.prototype),en),So=Object(R.a)(function(e){return Object(N.a)({root:{flexGrow:1,maxWidth:752},listitem:{backgroundColor:e.palette.background.paper},listItemContent:{paddingLeft:5,paddingRight:55},deleteButton:{color:e.palette.secondary.dark},dependsOnRow:{marginLeft:20},notDependsOnRow:{marginLeft:0},paper:{},responsiblePartyInitials:{fontWeight:100,minWidth:"30px",minHeight:"30px",height:"30px",width:"30px",backgroundColor:e.palette.primary.main,boxShadow:"none",cursor:"default"}})})(Ao),To=(tn=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(E.a)(this,Object(P.a)(t).call(this,e))).state={activities:[]},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"onDragEnd",value:function(e){if(e.destination&&this.state.activities){var t=function(e,t,a){var n=e.splice(t,1),r=Object(f.a)(n,1)[0];return e.splice(a,0,r),e}(this.state.activities,e.source.index,e.destination.index);this.props.onActivitiesOrderChange(t)}}},{key:"handleClickEdit",value:function(e,t){this.props.onClickEdit(e,t)}},{key:"handleClickDelete",value:function(e,t){this.props.onClickDelete(e,t)}},{key:"handleActivityTemplateChange",value:function(e,t){this.props.onActivityTemplateChange(e,t)}},{key:"activityDepth",value:function(e,t){if(t&&t>=5)return 5;if(!e)return t||0;var a=this.state.activities;if(!a||a.length<=0)return t||0;var n=be()(a,{id:e});return n<=0?t||0:a[n].dependsOnPreviousActivity?this.activityDepth(a[n-1].id,(t||0)+1):t||0}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.readOnly,o=this.state.activities;return r.a.createElement(go.a,{onDragEnd:this.onDragEnd},r.a.createElement(go.c,{droppableId:"droppable",isDropDisabled:n},function(t,i){return r.a.createElement("div",{ref:t.innerRef,className:a.list},o.map(function(t,o){return r.a.createElement(go.b,{key:t.id,draggableId:t.id,index:o,isDragDisabled:n},function(i,s){return r.a.createElement("div",Object.assign({key:t.id,className:a.listitem,ref:i.innerRef},i.draggableProps,i.dragHandleProps,{style:(c=s.isDragging,l=i.draggableProps.style,Object(W.a)({background:c?"lightgrey":""},l))}),r.a.createElement(So,{key:o,index:o,readOnly:n,activityTemplate:t,activityDepth:e.activityDepth(t.id),onClickEdit:e.handleClickEdit,onClickDelete:e.handleClickDelete,onActivityTemplateChange:e.handleActivityTemplateChange}));var c,l})}))}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return{activities:e.activities}}}]),t}(r.a.Component),Object(x.a)(tn.prototype,"onDragEnd",[D.a],Object.getOwnPropertyDescriptor(tn.prototype,"onDragEnd"),tn.prototype),Object(x.a)(tn.prototype,"handleClickEdit",[D.a],Object.getOwnPropertyDescriptor(tn.prototype,"handleClickEdit"),tn.prototype),Object(x.a)(tn.prototype,"handleClickDelete",[D.a],Object.getOwnPropertyDescriptor(tn.prototype,"handleClickDelete"),tn.prototype),Object(x.a)(tn.prototype,"handleActivityTemplateChange",[D.a],Object.getOwnPropertyDescriptor(tn.prototype,"handleActivityTemplateChange"),tn.prototype),Object(x.a)(tn.prototype,"activityDepth",[D.a],Object.getOwnPropertyDescriptor(tn.prototype,"activityDepth"),tn.prototype),tn),Do=Object(R.a)(function(e){return Object(N.a)({list:{padding:0,margin:0,listStyle:"none"},listitem:{margin:"0px",padding:"2px 2px"}})})(To),No=a(588),Ro=a.n(No),Io=a(589),Fo=a.n(Io),Lo=a(590),Mo=(rn=nn=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(E.a)(this,Object(P.a)(t).call(this,e))).state={isDeleting:!1},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"handleOnClose",value:function(){this.props.onClose&&(this.setState({isDeleting:!1}),this.props.onClose(!1))}},{key:"handleDelete",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t,a,n,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.onClose,n=t.activityTemplate,r=t.index,void 0!==n&&n.id){e.next=4;break}return a&&a(!1),e.abrupt("return");case 4:if(!n){e.next=12;break}return e.next=7,this.setState({isDeleting:!0});case 7:return e.next=9,new Promise(function(e){return setTimeout(e,500)});case 9:try{this.props.onDelete(n,r)}catch(o){}a&&a(!1),this.setState({isDeleting:!1});case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.activityTemplate,n=this.state.isDeleting;return r.a.createElement(Le.a,{open:this.props.open,onClose:this.handleOnClose,"aria-labelledby":"confirm-delete-Activity-dialog-title",fullWidth:!0,maxWidth:"xs"},r.a.createElement(Me.a,{id:"confirm-delete-activity-dialog-title"},"Delete Activity Template?"),r.a.createElement(Ue.a,null,a&&r.a.createElement("div",null,"Are you sure you wish to delete the activity titled"," ",r.a.createElement("strong",null,r.a.createElement("i",null,this.activitySummaryText)))),r.a.createElement(qe.a,null,n&&r.a.createElement(he.a,{container:!0,style:{marginLeft:"50%",marginBottom:"15px"}},r.a.createElement(Te.a,{variant:"indeterminate",disableShrink:!0,className:t.facebook2,size:24,thickness:4})),!n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne.a,{onClick:this.handleOnClose,color:"primary",tabIndex:1},"Cancel"),r.a.createElement(Ne.a,{onClick:this.handleDelete,color:"primary",tabIndex:2,disabled:n},"Delete"))))}},{key:"activitySummaryText",get:function(){var e=this.props.activityTemplate;if(e){var t=(new DOMParser).parseFromString(e.description,"text/html");if(t.body&&t.body.textContent)return Object(Lo.truncate)((t.body.textContent||"").trim(),{length:100})}return"[ Not Available ]"}}]),t}(r.a.Component),nn.contextType=ue,an=rn,Object(x.a)(an.prototype,"handleOnClose",[D.a],Object.getOwnPropertyDescriptor(an.prototype,"handleOnClose"),an.prototype),Object(x.a)(an.prototype,"handleDelete",[D.a],Object.getOwnPropertyDescriptor(an.prototype,"handleDelete"),an.prototype),an),Uo=Object(R.a)(Ve)(Mo),Bo=(cn=sn=function(e){function t(e){var a;Object(w.a)(this,t),(a=Object(E.a)(this,Object(P.a)(t).call(this,e)))._isMounted=!1;return a.state={readOnly:!0,data:{title:"",description:""},open:!1,path:"",parties:[],versionHistory:[],loading:!1,selectedActivityTemplateIndex:-1,deleteConfirmationOpen:!1,confirmationOpen:!1,confirmationTitle:"",confirmationMessage:"",isPerformingAction:!1,isUploadingAttachment:!1,dataIsDirty:!1,height:0,origin:""},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t,a,n,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._isMounted=!0,t=this.props.match,a=t.params,n=a.id,r=a.ver,this.getAllData(n,r);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"getSharePointOrigin",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t,a,n,r,o,i;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return e.next=4,this.context.spContext.getContextInfo();case 4:return t=e.sent,(a=document.createElement("a")).setAttribute("href",t.WebFullUrl),n=a.hostname,r=a.port,o=a.protocol,i="".concat(o,"//").concat(n).concat(r.length?":".concat(r):""),e.abrupt("return",i);case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleImport",value:function(e){if(e&&e.target&&e.target.files&&e.target.files.length>=0){var t=e.target.files[0];this.importFile(t,e.target)}}},{key:"importFile",value:function(e,t){var n=this;e&&this.setState({isPerformingAction:!0},function(){var r=new FileReader;r.addEventListener("load",function(){var e=Object(O.a)(v.a.mark(function e(r){var o,i,s,c,l,p,u,d,h,m,y,f,g,b,O,w,k,E,P,C,x,j;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(r&&r.currentTarget&&r.currentTarget.result)){e.next=33;break}for(o="",i=new Uint8Array(r.currentTarget.result),s=i.byteLength,c=0;c<s;c++)o+=String.fromCharCode(i[c]);return e.next=8,Promise.all([a.e(3),a.e(1)]).then(a.t.bind(null,1343,7));case 8:for(l=e.sent,p=l.read(o,{type:"binary"}),u=l.utils.sheet_to_json(p.Sheets[p.SheetNames[0]],{range:0}),h=n.state.data,m=0,y=!0,f=!1,g=void 0,e.prev=16,b=u[Symbol.iterator]();!(y=(O=b.next()).done);y=!0)void 0!==(d=O.value)&&void 0!==d.Activity&&(w=d.ResponsibleParty||"",k=n.getboolean(d.Attachments),E=n.getboolean(d.RequireAttachment),P=n.getboolean(d.DependsPrior),C=n.getboolean(d.ExternalReviewer),x=d.Tooltip,j={id:Object(ur.h)(),description:d.Activity,allowAttachments:k,dependsOnPreviousActivity:P,responsibleParty:w,requireAttachments:E,requiresReview:C,tooltip:x,jobAidAttachments:[]},void 0===h.activities&&(h.activities=[]),h.activities.push(j),m++);e.next=24;break;case 20:e.prev=20,e.t0=e.catch(16),f=!0,g=e.t0;case 24:e.prev=24,e.prev=25,y||null==b.return||b.return();case 27:if(e.prev=27,!f){e.next=30;break}throw g;case 30:return e.finish(27);case 31:return e.finish(24);case 32:m>0&&n.setState({data:h,dataIsDirty:!0,confirmationOpen:!0,confirmationTitle:"Import Activities",confirmationMessage:"".concat(m," Activities were imported successfully.")});case 33:e.next=39;break;case 35:e.prev=35,e.t1=e.catch(0),n.setState({isPerformingAction:!1}),console.log(e.t1);case 39:n.setState({isPerformingAction:!1}),t.value="";case 41:case"end":return e.stop()}},e,this,[[0,35],[16,20,24,32],[25,,27,31]])}));return function(t){return e.apply(this,arguments)}}(),!1),r.addEventListener("error",function(e){n.setState({isPerformingAction:!1})},!1),r&&setTimeout(function(){return r.readAsArrayBuffer(e)},200)})}},{key:"getboolean",value:function(e){return!(!e||void 0===e)&&((!e||0!==Ro()(e).length)&&(!((e=Fo()(e))&&e.length>0)||"N"!==e.charAt(0)&&"F"!==e.charAt(0)))}},{key:"handleSaveDraft",value:function(){var e=Object(O.a)(v.a.mark(function e(t){var a,n,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),t.stopPropagation(),!0!==this.state.readOnly){e.next=4;break}return e.abrupt("return");case 4:return a=this.state.data,n=this.context.processTemplateStore,e.prev=6,this.setState({isPerformingAction:!0}),e.next=10,n.saveProcessTemplateAsDraft(this.state.path,a);case 10:r=e.sent,this.setState({data:r,isPerformingAction:!1,dataIsDirty:!1}),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(6),console.log(e.t0),this.setState({isPerformingAction:!1});case 18:case"end":return e.stop()}},e,this,[[6,14]])}));return function(t){return e.apply(this,arguments)}}()},{key:"handleAddNewActivityClickOpen",value:function(){if(!0!==this.state.readOnly){var e={id:Object(ur.h)(),description:"",allowAttachments:!0,dependsOnPreviousActivity:!1,responsibleParty:"",requireAttachments:!1,requiresReview:!1,jobAidAttachments:[]};this.setState({selectedActivityTemplate:e,selectedActivityTemplateIndex:-1,open:!0})}}},{key:"handleClickEdit",value:function(e,t){!0!==this.state.readOnly&&this.state.data.activities&&t>=0&&this.setState({selectedActivityTemplate:this.state.data.activities[t],selectedActivityTemplateIndex:t,open:!0})}},{key:"handleClickDelete",value:function(e,t){!0!==this.state.readOnly&&this.setState({deleteConfirmationOpen:!0,selectedActivityTemplate:e,selectedActivityTemplateIndex:t})}},{key:"deleteActivity",value:function(e,t){var a=this.state.data.activities;if(void 0!==a){var n=Object(b.a)(a);if(e.id!==n[t].id)throw Error("ID doesnt match to delete.");n.splice(t,1),this.state.data.activities=n,this.setState({data:this.state.data,open:!1,dataIsDirty:!0})}}},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"handleActivitySave",value:function(e,t){var a=this;this.updateActivity(e,t),setTimeout(function(){a.highlightItem(e.id),t<0&&a.scrollToElement(e.id)},500)}},{key:"handlePublishTemplate",value:function(){var e=Object(O.a)(v.a.mark(function e(t){var a,n,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),t.stopPropagation(),a=this.context.processTemplateStore,!(void 0!==(n=this.state.data.id)&&n.length>0)){e.next=17;break}return e.prev=5,this._isMounted&&this.setState({isPerformingAction:!0}),e.next=9,a.publishProcessTemplateById(n);case 9:r=e.sent,this.setState({data:r,isPerformingAction:!1,dataIsDirty:!1,confirmationOpen:!0,confirmationTitle:"Published Template",confirmationMessage:"Process template ".concat(this.state.data.description," has been published successfully.")}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(5),console.log(e.t0),this.setState({isPerformingAction:!1,dataIsDirty:!1,confirmationOpen:!0,confirmationTitle:"Error Message",confirmationMessage:"Error pubishing template. Error: ".concat(e.t0,".")});case 17:case"end":return e.stop()}},e,this,[[5,13]])}));return function(t){return e.apply(this,arguments)}}()},{key:"handleCancelEdits",value:function(e){e.preventDefault(),e.stopPropagation();var t=this.props.match.params,a=t.id,n=t.ver;this._isMounted&&this.getTemplate(a,n)}},{key:"handleActivityTemplateChange",value:function(e,t){this.updateActivity(e,t)}},{key:"handleActivityTemplateDialogChange",value:function(e,t){this.setState({selectedActivityTemplate:e})}},{key:"handleAttachmentUpload",value:function(){var e=Object(O.a)(v.a.mark(function e(t,a){var n,r,o;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.context.processTemplateStore,!(r=this.state.data.id)){e.next=7;break}return e.next=5,n.uploadProcessTemplateAttachment(r,a.name,a,t.id);case 5:(o=e.sent)&&this.updateActivityJobAidAttachments(t.id,o);case 7:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"beginAttachmentDelete",value:function(){var e=Object(O.a)(v.a.mark(function e(t,a){var n,r,o,i;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=this.state.selectedActivityTemplate,this.state.data.id&&n&&(r=It()(n.jobAidAttachments,{fileName:a.fileName}))&&(o=n.jobAidAttachments.indexOf(r))>=0&&((i=Object(b.a)(n.jobAidAttachments)).splice(o,1),n.jobAidAttachments=i,this.setState({selectedActivityTemplate:n}));case 3:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"handleActivitiesOrderChange",value:function(e){!0!==this.state.readOnly&&(void 0===e&&(e=[]),this.state.data.activities=e,e.length>0&&(e[0].dependsOnPreviousActivity=!1),this.setState({data:this.state.data,dataIsDirty:!0}))}},{key:"getAllData",value:function(){var e=Object(O.a)(v.a.mark(function e(t,a){var n,r,o,i,s,c,l,p,u=this;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.context.processTemplateStore,!(t&&t.length>10)){e.next=20;break}return a&&a.length>0?this.setState({readOnly:!0,isPerformingAction:!0}):this.setState({readOnly:!1,isPerformingAction:!0}),e.prev=3,e.next=6,Promise.all([n.getProcessTemplateContainerById(t),n.getProcessTemplateById(t,a),n.getProcessTemplateVersionHistoryById(t),n.getPartiesList(),this.getSharePointOrigin()]);case 6:r=e.sent,o=Object(f.a)(r,5),i=o[0],s=o[1],c=o[2],l=o[3],p=o[4],this._isMounted&&this.setState({path:i,data:s,versionHistory:c,parties:l,isPerformingAction:!1,dataIsDirty:!1,readOnly:s.version!==s.currentVersionNumber,origin:p},function(){u.setState({height:window.innerHeight})}),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),console.log("ERROR -> ".concat(e.t0)),this.setState({isPerformingAction:!1});case 20:case"end":return e.stop()}},e,this,[[3,16]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"getTemplate",value:function(){var e=Object(O.a)(v.a.mark(function e(t,a){var n,r,o=this;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.context.processTemplateStore,!(t&&t.length>10)){e.next=14;break}return this.setState({isPerformingAction:!0}),e.prev=3,e.next=6,n.getProcessTemplateById(t);case 6:r=e.sent,this._isMounted&&this.setState({data:r,isPerformingAction:!1,dataIsDirty:!1,readOnly:!1},function(){o.setState({height:window.innerHeight})}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.log("ERROR -> ".concat(e.t0)),this.setState({isPerformingAction:!1});case 14:case"end":return e.stop()}},e,this,[[3,10]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"updateActivity",value:function(e,t){var a=this.state.data;!0!==this.state.readOnly&&(void 0===a.activities&&(a.activities=[]),e&&!1===e.allowAttachments&&!0===e.requireAttachments&&(e.requireAttachments=!1),e&&!1===e.allowAttachments&&!0===e.requireAttachments&&(e.allowAttachments=!0),void 0!==t&&t>=0?(a.activities[t].id=e.id,a.activities[t].description=e.description,a.activities[t].allowAttachments=e.allowAttachments,a.activities[t].dependsOnPreviousActivity=e.dependsOnPreviousActivity,a.activities[t].responsibleParty=e.responsibleParty,a.activities[t].requireAttachments=e.requireAttachments,a.activities[t].requiresReview=e.requiresReview,a.activities[t].tooltip=void 0!==e.tooltip?e.tooltip:void 0,e.jobAidAttachments?a.activities[t].jobAidAttachments=Object(b.a)(e.jobAidAttachments):a.activities[t].jobAidAttachments=[]):a.activities.push(e),a.activities.length>0&&(a.activities[0].dependsOnPreviousActivity=!1),this.setState({data:a,open:!1,dataIsDirty:!0},function(){}))}},{key:"updateActivityJobAidAttachments",value:function(e,t){var a=this.state.selectedActivityTemplate;!0!==this.state.readOnly&&(a&&a.id===e&&(a.jobAidAttachments||(a.jobAidAttachments=[]),It()(a.jobAidAttachments,{fileName:t.fileName})||(a.jobAidAttachments=[].concat(Object(b.a)(a.jobAidAttachments),[t]),this.setState({selectedActivityTemplate:a,dataIsDirty:!0}))))}},{key:"updateProcessJobAidAttachments",value:function(e,t){var a=this.state.data;!0!==this.state.readOnly&&(a.id&&a.id===e&&(a.jobAidAttachments||(a.jobAidAttachments=[]),It()(a.jobAidAttachments,{fileName:t.fileName})||(a.jobAidAttachments=[].concat(Object(b.a)(a.jobAidAttachments),[t]),this.setState({data:a,dataIsDirty:!0}))))}},{key:"scrollToElement",value:function(e){var t=document.getElementById(e);if(t){var a=t.getClientRects(),n=a[0]?a[0].top:0;if(n>window.pageYOffset+window.innerHeight||n<window.pageYOffset)!!document.documentMode?document.documentElement.scrollTop=n:window.scroll({top:n,behavior:"smooth"})}}},{key:"highlightItem",value:function(e){var t=document.getElementById(e);t&&(t.classList.add("backgroundAnimated"),setTimeout(function(){t.classList.remove("backgroundAnimated")},5e3))}},{key:"hasScrollbar",value:function(){var e=document.getElementsByTagName("body")[0];return!!e&&e.scrollHeight>window.innerHeight}},{key:"handleAttachmentClicked",value:function(e){window.open(this.state.origin+e.serverRelativeUrl,"_blank")}},{key:"handleProcessAttachmentUpload",value:function(){var e=Object(O.a)(v.a.mark(function e(t){var a,n,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.context.processTemplateStore,n=this.state.data.id,this.setState({isPerformingAction:!0,isUploadingAttachment:!0}),!t||!n){e.next=8;break}return e.next=6,a.uploadProcessTemplateAttachment(n,t.name,t);case 6:(r=e.sent)&&this.updateProcessJobAidAttachments(n,r);case 8:this.setState({isPerformingAction:!1,isUploadingAttachment:!1});case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleProcessAttachmentDelete",value:function(){var e=Object(O.a)(v.a.mark(function e(t){var a,n,r,o;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=this.state.data,this.setState({isPerformingAction:!0,isUploadingAttachment:!0}),a.id&&(n=It()(a.jobAidAttachments,{fileName:t.fileName}))&&void 0!==n&&a.jobAidAttachments&&(r=a.jobAidAttachments.indexOf(n))>=0&&((o=Object(b.a)(a.jobAidAttachments)).splice(r,1),a.jobAidAttachments=o,this.setState({data:a,dataIsDirty:!0})),this.setState({isPerformingAction:!1,isUploadingAttachment:!1});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=Object(y.a)(t,["classes"]),o=this.state,i=o.data,c=o.loading,l=o.isPerformingAction,p=o.isUploadingAttachment,u=o.dataIsDirty,d=o.path,h=o.readOnly,m=o.origin,f=d;return f&&(f=f.replace(/^\/|\/$/g,"").replace(/\//g," / ")),r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{when:u,message:"You have unsaved changes, are you sure you want to leave?"}),r.a.createElement("p",null,r.a.createElement(s.b,{to:"/"},"Home")," > ",r.a.createElement(s.b,{to:"/templates"},"Process Templates")),r.a.createElement(vr,{readOnly:h,isLoading:this.state.isPerformingAction,label:"Process Template Title",title:"Template Editor: ",field:this.state.data.title,onSave:function(t){i.title=t,e.setState({data:i,dataIsDirty:!0})}}),r.a.createElement(to,Object.assign({},n,{id:this.props.match.params.id,data:i,path:f,origin:m,isUploadingAttachment:p,onAttachmentClicked:this.handleAttachmentClicked,onProcessAttachmentUpload:this.handleProcessAttachmentUpload,onProcessAttachmentDelete:this.handleProcessAttachmentDelete})),r.a.createElement(he.a,{container:!0,direction:"row",alignItems:"center",justify:"space-between"},r.a.createElement(he.a,{item:!0,className:a.section},r.a.createElement(de.a,{variant:"h5",color:"inherit",noWrap:!0,className:a.toolbarTitle,id:"addActivityButton"},"Activities")),l&&r.a.createElement(he.a,{item:!0,xs:3,className:a.section},r.a.createElement(Te.a,{style:{margin:"2px"},variant:"indeterminate",disableShrink:!0,className:a.facebook2,size:30,thickness:4})),!l&&r.a.createElement(r.a.Fragment,null,r.a.createElement(he.a,{item:!0,className:a.section},r.a.createElement(Ne.a,{variant:"outlined",color:"primary",className:a.buttonActions,onClick:this.handleCancelEdits,disabled:!u||h},r.a.createElement(fr.a,{className:a.icons}),"Cancel Changes"),r.a.createElement(Ne.a,{variant:"outlined",color:"primary",className:a.buttonActions,onClick:this.handleSaveDraft,disabled:!u||h},r.a.createElement(oo.a,{className:a.icons}),"Save Draft"),r.a.createElement(Ne.a,{variant:"outlined",color:"primary",className:a.buttonActions,onClick:this.handlePublishTemplate,disabled:u||!i.activities||0===i.activities.length||h},r.a.createElement(so.a,{className:a.icons}),"Publish Template")))),r.a.createElement(he.a,{item:!0,className:a.section},r.a.createElement(he.a,{container:!0,justify:"space-between"},r.a.createElement(he.a,{item:!0},r.a.createElement(Ne.a,{variant:"contained",color:"primary",className:a.buttonActions,onClick:this.handleAddNewActivityClickOpen,disabled:h},r.a.createElement(Br.a,{className:a.icons})," Activity"),r.a.createElement("input",{accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",className:a.input,style:{display:"none"},id:"import-button-file",type:"file",onChange:this.handleImport}),r.a.createElement("label",{htmlFor:"import-button-file"},r.a.createElement(Ne.a,{component:"span",disabled:c||h},r.a.createElement(lo.a,{className:a.icons}),"Import Activities from Excel"),c&&r.a.createElement(Te.a,{size:24,className:a.buttonProgress})),r.a.createElement(Ne.a,{href:"ActivityTemplate.xlsx"},r.a.createElement(uo.a,{className:a.icons}),"Download Excel Template")))),i.activities&&r.a.createElement(Do,{readOnly:this.state.readOnly,activities:this.state.data.activities,onActivityTemplateChange:this.handleActivityTemplateChange,onClickEdit:this.handleClickEdit,onClickDelete:this.handleClickDelete,onActivitiesOrderChange:this.handleActivitiesOrderChange}),!l&&this.hasScrollbar()&&r.a.createElement(he.a,{container:!0,direction:"row",justify:"center",alignItems:"center",style:{padding:10}},r.a.createElement(Ne.a,{id:"scrollToBottomButton",style:{width:"300px"},onClick:function(){e.scrollToElement("addActivityButton")}},r.a.createElement(lo.a,null),r.a.createElement("span",{style:{paddingLeft:5}}," Scroll Up "))),r.a.createElement(fo,{activityTemplate:this.state.selectedActivityTemplate,index:this.state.selectedActivityTemplateIndex,parties:this.state.parties,open:this.state.open,onActivityTemplateChange:this.handleActivityTemplateDialogChange,onClose:this.handleClose,onSave:this.handleActivitySave,origin:this.state.origin,onAttachmentUpload:this.handleAttachmentUpload,onAttachmentDelete:this.beginAttachmentDelete}),r.a.createElement(wa,{open:this.state.confirmationOpen,title:this.state.confirmationTitle,message:this.state.confirmationMessage,onClose:function(){e.setState({confirmationOpen:!1})}}),r.a.createElement(Uo,{open:this.state.deleteConfirmationOpen,index:this.state.selectedActivityTemplateIndex,activityTemplate:this.state.selectedActivityTemplate,onClose:function(){e.setState({deleteConfirmationOpen:!1})},onDelete:function(t,a){t&&a>=0&&e.deleteActivity(t,a)}}))}}]),t}(r.a.Component),sn.contextType=ue,on=cn,Object(x.a)(on.prototype,"getSharePointOrigin",[D.a],Object.getOwnPropertyDescriptor(on.prototype,"getSharePointOrigin"),on.prototype),Object(x.a)(on.prototype,"handleImport",[D.a],Object.getOwnPropertyDescriptor(on.prototype,"handleImport"),on.prototype),Object(x.a)(on.prototype,"importFile",[D.a],Object.getOwnPropertyDescriptor(on.prototype,"importFile"),on.prototype),Object(x.a)(on.prototype,"handleSaveDraft",[D.a],Object.getOwnPropertyDescriptor(on.prototype,"handleSaveDraft"),on.prototype),Object(x.a)(on.prototype,"handleAddNewActivityClickOpen",[D.a],Object.getOwnPropertyDescriptor(on.prototype,"handleAddNewActivityClickOpen"),on.prototype),Object(x.a)(on.prototype,"handleClickEdit",[D.a],Object.getOwnPropertyDescriptor(on.prototype,"handleClickEdit"),on.prototype),Object(x.a)(on.prototype,"handleClickDelete",[D.a],Object.getOwnPropertyDescriptor(on.prototype,"handleClickDelete"),on.prototype),Object(x.a)(on.prototype,"deleteActivity",[D.a],Object.getOwnPropertyDescriptor(on.prototype,"deleteActivity"),on.prototype),Object(x.a)(on.prototype,"handleClose",[D.a],Object.getOwnPropertyDescriptor(on.prototype,"handleClose"),on.prototype),Object(x.a)(on.prototype,"handleActivitySave",[D.a],Object.getOwnPropertyDescriptor(on.prototype,"handleActivitySave"),on.prototype),Object(x.a)(on.prototype,"handlePublishTemplate",[D.a],Object.getOwnPropertyDescriptor(on.prototype,"handlePublishTemplate"),on.prototype),Object(x.a)(on.prototype,"handleCancelEdits",[D.a],Object.getOwnPropertyDescriptor(on.prototype,"handleCancelEdits"),on.prototype),Object(x.a)(on.prototype,"handleActivityTemplateChange",[D.a],Object.getOwnPropertyDescriptor(on.prototype,"handleActivityTemplateChange"),on.prototype),Object(x.a)(on.prototype,"handleActivityTemplateDialogChange",[D.a],Object.getOwnPropertyDescriptor(on.prototype,"handleActivityTemplateDialogChange"),on.prototype),Object(x.a)(on.prototype,"handleAttachmentUpload",[D.a],Object.getOwnPropertyDescriptor(on.prototype,"handleAttachmentUpload"),on.prototype),Object(x.a)(on.prototype,"beginAttachmentDelete",[D.a],Object.getOwnPropertyDescriptor(on.prototype,"beginAttachmentDelete"),on.prototype),Object(x.a)(on.prototype,"handleActivitiesOrderChange",[D.a],Object.getOwnPropertyDescriptor(on.prototype,"handleActivitiesOrderChange"),on.prototype),Object(x.a)(on.prototype,"getAllData",[D.a],Object.getOwnPropertyDescriptor(on.prototype,"getAllData"),on.prototype),Object(x.a)(on.prototype,"updateActivity",[D.a],Object.getOwnPropertyDescriptor(on.prototype,"updateActivity"),on.prototype),Object(x.a)(on.prototype,"updateActivityJobAidAttachments",[D.a],Object.getOwnPropertyDescriptor(on.prototype,"updateActivityJobAidAttachments"),on.prototype),Object(x.a)(on.prototype,"updateProcessJobAidAttachments",[D.a],Object.getOwnPropertyDescriptor(on.prototype,"updateProcessJobAidAttachments"),on.prototype),Object(x.a)(on.prototype,"handleAttachmentClicked",[D.a],Object.getOwnPropertyDescriptor(on.prototype,"handleAttachmentClicked"),on.prototype),Object(x.a)(on.prototype,"handleProcessAttachmentUpload",[D.a],Object.getOwnPropertyDescriptor(on.prototype,"handleProcessAttachmentUpload"),on.prototype),Object(x.a)(on.prototype,"handleProcessAttachmentDelete",[D.a],Object.getOwnPropertyDescriptor(on.prototype,"handleProcessAttachmentDelete"),on.prototype),on),qo=Object(T.i)(Object(R.a)(function(e){return{section:{marginTop:e.spacing(),marginBottom:e.spacing()},toolbarTitle:{},buttonActions:{margin:"0px 2px"},wrapper:{margin:e.spacing()},facebook2:{color:"#6798e5",animationDuration:"550ms"},icons:{marginRight:e.spacing()},buttonSuccess:{backgroundColor:no.a[500],"&:hover":{backgroundColor:no.a[700]}},fabProgress:{color:no.a[500],top:-6,left:-6,zIndex:1},buttonProgress:{color:no.a[500],top:"50%",left:"50%",marginTop:-12,marginLeft:-12},input:{}}})(Bo)),Vo=(a(1202),a(594)),_o=a.n(Vo),zo=a(1329),Wo=a(1304),Yo=a(1324),Ho=a(1293),Ko=a(1294),Go=a(1330),Jo=a(291),Qo=a.n(Jo),Xo=a(596),Zo=a.n(Xo),$o=a(597),ei=a.n($o),ti=a(595),ai=a.n(ti),ni=a(122),ri=a(1328),oi=Object(ni.a)((dn=un=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(E.a)(this,Object(P.a)(t).call(this,e))).state={open:!1,anchorEl:null,isSynching:!1,progress:0,syncInfo:{open:!1,text:"",isError:!1}},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"componentDidUpdate",value:function(){var e=Object(O.a)(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleMenuItemClick",value:function(e,t,a){this.setState({open:!1}),this.props.onViewChange(a)}},{key:"handleGlobalMenuItemClick",value:function(e,t,a){this.setState({open:!1}),this.props.onViewChange(a)}},{key:"handleToggle",value:function(e){var t=e.currentTarget.parentElement;t&&this.setState(function(e,a){return{open:!e.open,anchorEl:t}})}},{key:"getTitle",value:function(e){return e&&e.Title?e.Title:""}},{key:"handleDelete",value:function(){var e=Object(O.a)(v.a.mark(function e(t,a,n,r){var o;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==r||0!==a){e.next=4;break}alert("You cannot delete this view"),e.next=12;break;case 4:if(!confirm("Do you want to delete this view?")){e.next=12;break}if(!((o=this.context.personalizationStore.filterViews.filter(function(e){return e.id===n}))&&o.length>0)){e.next=12;break}return e.next=9,this.context.personalizationStore.deleteFilterById(o[0].id);case 9:return this.context.personalizationStore.selectedViewFilter&&this.context.personalizationStore.selectedViewFilter.id===n&&(this.context.personalizationStore.setDefaultFilter(),this.props.history.push("/processes/")),e.next=12,this.context.personalizationStore.loadViews();case 12:case"end":return e.stop()}},e,this)}));return function(t,a,n,r){return e.apply(this,arguments)}}()},{key:"handleClose",value:function(e){this.setState({open:!1,anchorEl:null})}},{key:"increaseProgress",value:function(e,t){this.setState(function(a,n){return{progress:t&&t>0?t:a.progress+e}})}},{key:"handleSyncRepository",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t,a,n,r,o,i,s,c,l,p;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=0,a=0,n=50,r=30,!1!==this.state.isSynching){e.next=45;break}return this.setState({isSynching:!0,progress:5,syncInfo:{open:!1,text:"",isError:!1}}),e.prev=6,e.next=9,this.context.spContext.buildReportingItemList();case 9:return this.increaseProgress(0,10),e.next=12,this.context.reportingStore.clearReportingSPList(n);case 12:o=e.sent;case 13:if(!(o>0)){e.next=20;break}return e.next=16,this.context.reportingStore.clearReportingSPList(n);case 16:o=e.sent,this.increaseProgress(1,void 0),e.next=13;break;case 20:if(this.setState({progress:35}),0!==o){e.next=38;break}return e.next=24,this.context.processStore.listAllProcesses();case 24:i=e.sent,this.increaseProgress(0,50),s=ai()(i,r),c=0;case 28:if(!(c<s.length)){e.next=37;break}return e.next=31,this.context.reportingStore.updateRepository(s[c]);case 31:(l=e.sent)&&(t+=l.processInstanceCount,l.processInError&&(a+=l.processInError.length,console.log("Batch ".concat(c+1," errors: "),l.processInError))),this.state.progress<100&&(p=Math.ceil(50/s.length),this.increaseProgress(p,void 0));case 34:c++,e.next=28;break;case 37:this.increaseProgress(0,100);case 38:this.setState({isSynching:!1,syncInfo:{open:!0,text:"The Data Synchronization operation completed. \n          ".concat(t," processes were synced with ").concat(a," errors. "),isError:!1}}),e.next=45;break;case 41:e.prev=41,e.t0=e.catch(6),console.log("There was an error with the Reporting Data Synchronization",JSON.stringify(e.t0)),this.setState({isSynching:!1,syncInfo:{open:!0,text:"There was an error Reporting Data Synchronization.",isError:!0}});case 45:case"end":return e.stop()}},e,this,[[6,41]])}));return function(){return e.apply(this,arguments)}}()},{key:"handleInfoClose",value:function(){var e=Object(O.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({syncInfo:{open:!1,text:"",isError:!1}});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getHyperlink",value:function(){return r.a.createElement(ot.a,null,r.a.createElement(Ne.a,{fullWidth:!0,color:"primary",onClick:this.handleIButtonClick},"Go To Sharepoint Reporting List"))}},{key:"handleIButtonClick",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.context.spContext.getSharePointOrigin();case 2:e.t0=e.sent,e.t1="/Lists/".concat(this.context.spContext.getReportingListViewName(),".aspx"),t=e.t0+e.t1,window.open(t,"_blank");case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.open,n=t.anchorEl,o=this.props.currentUser,i=this.context.personalizationStore,s=i.filterViews,c=i.selectedViewFilter;return r.a.createElement(r.a.Fragment,null,o&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Zo.a,{className:this.props.classes.profileIcon}),r.a.createElement(zo.a,{variant:"contained","aria-label":"Split button"},r.a.createElement(Ne.a,{title:"Logged User",onClick:this.handleToggle},this.getTitle(o)),r.a.createElement(Ne.a,{variant:"contained",size:"small","aria-owns":a?"menu-list-grow":void 0,"aria-haspopup":"true",onClick:this.handleToggle},r.a.createElement(Qo.a,null)))),r.a.createElement(Wo.a,{style:{width:400},open:a,anchorEl:n,transition:!0,disablePortal:!0},function(t){var a=t.TransitionProps,n=t.placement;return r.a.createElement(Yo.a,{onClickAway:e.handleClose},r.a.createElement(Ho.a,Object.assign({},a,{style:{transformOrigin:"bottom"===n?"center top":"center bottom"}}),r.a.createElement(ot.a,{id:"menu-list-grow"},r.a.createElement(Ko.a,null,s.filter(function(e,t){return!1===e.global}).map(function(t,a){return r.a.createElement(ho.a,{key:"l".concat(t.id),onClick:function(n){return e.handleMenuItemClick(n,a,t.id)}},c&&c.id===t.id&&r.a.createElement(Qt.a,{style:{paddingRight:5}}),t.name,0!==a&&r.a.createElement(Go.a,null,r.a.createElement(He.a,{edge:"end","aria-label":"Delete View",key:"l".concat(t.id,"-").concat(a),onClick:function(n){return e.handleDelete(n,a,t.id,!1)}},r.a.createElement(Ge.a,null))))})),r.a.createElement(dr.a,null),r.a.createElement(de.a,{style:{paddingLeft:5,paddingTop:5,fontWeight:600}},"Global Views/Searches"),r.a.createElement(Ko.a,null,s.filter(function(e,t){return!0===e.global}).map(function(t,a){return r.a.createElement(ho.a,{key:"g".concat(t.id),id:t.id,onClick:function(n){return e.handleGlobalMenuItemClick(n,a,t.id)}},c&&c.id===t.id&&r.a.createElement(Qt.a,{style:{paddingRight:5}}),t.name,e.context.spContext.isAdministrator(o)&&r.a.createElement(Go.a,null,r.a.createElement(He.a,{edge:"end","aria-label":"Delete View",key:"l".concat(t.id,"-").concat(a),onClick:function(n){return e.handleDelete(n,a,t.id,!0)}},r.a.createElement(Ge.a,null))))})),e.context.spContext.isAdministrator(o)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(dr.a,null),r.a.createElement(de.a,{style:{paddingLeft:5,paddingTop:5,fontWeight:600}},"Admin Functionality"),r.a.createElement(Ko.a,null,r.a.createElement(ho.a,{key:0,onClick:function(t){return e.handleSyncRepository()},disabled:e.state.isSynching},r.a.createElement(r.a.Fragment,null,!e.state.isSynching&&r.a.createElement(ei.a,{style:{paddingRight:5}}),e.state.isSynching&&r.a.createElement(Te.a,{variant:"static",value:e.state.progress,size:30,style:{padding:5}})),"Sync Reporting Data"))))))}),this.state.syncInfo&&this.state.syncInfo.isError&&r.a.createElement(wa,{message:this.state.syncInfo.text,title:"Error synching the Reporting List ",open:this.state.syncInfo.open,onClose:this.handleInfoClose}),this.state.syncInfo&&!1===this.state.syncInfo.isError&&r.a.createElement(wa,{message:this.state.syncInfo.text,title:"OFS PPP Reporting List ",children:this.getHyperlink(),open:this.state.syncInfo.open,onClose:this.handleInfoClose}))}}]),t}(r.a.Component),un.contextType=ue,pn=dn,Object(x.a)(pn.prototype,"componentDidUpdate",[D.a],Object.getOwnPropertyDescriptor(pn.prototype,"componentDidUpdate"),pn.prototype),Object(x.a)(pn.prototype,"handleMenuItemClick",[D.a],Object.getOwnPropertyDescriptor(pn.prototype,"handleMenuItemClick"),pn.prototype),Object(x.a)(pn.prototype,"handleGlobalMenuItemClick",[D.a],Object.getOwnPropertyDescriptor(pn.prototype,"handleGlobalMenuItemClick"),pn.prototype),Object(x.a)(pn.prototype,"handleToggle",[D.a],Object.getOwnPropertyDescriptor(pn.prototype,"handleToggle"),pn.prototype),Object(x.a)(pn.prototype,"getTitle",[D.a],Object.getOwnPropertyDescriptor(pn.prototype,"getTitle"),pn.prototype),Object(x.a)(pn.prototype,"handleDelete",[D.a],Object.getOwnPropertyDescriptor(pn.prototype,"handleDelete"),pn.prototype),Object(x.a)(pn.prototype,"handleClose",[D.a],Object.getOwnPropertyDescriptor(pn.prototype,"handleClose"),pn.prototype),Object(x.a)(pn.prototype,"handleSyncRepository",[D.a],Object.getOwnPropertyDescriptor(pn.prototype,"handleSyncRepository"),pn.prototype),Object(x.a)(pn.prototype,"handleInfoClose",[D.a],Object.getOwnPropertyDescriptor(pn.prototype,"handleInfoClose"),pn.prototype),Object(x.a)(pn.prototype,"getHyperlink",[D.a],Object.getOwnPropertyDescriptor(pn.prototype,"getHyperlink"),pn.prototype),Object(x.a)(pn.prototype,"handleIButtonClick",[D.a],Object.getOwnPropertyDescriptor(pn.prototype,"handleIButtonClick"),pn.prototype),ln=pn))||ln,ii=Object(T.i)(Object(R.a)(function(e){return Object(N.a)({profileIcon:{minWidth:40,minHeight:40,color:e.palette.grey.A200,marginRight:e.spacing()},snackbarError:{backgroundColor:e.palette.error.dark},snackbarInfo:{backgroundColor:ri.a[800]},close:{}})})(oi)),si=a(1340),ci=a(1277),li=Object(ci.a)({overrides:{MuiTableCell:{root:{padding:"1px, 1px, 1px, 1px"}}}}),pi=a(244),ui=a(1331),di=a(599),hi=a.n(di),mi=a(600),yi=a.n(mi),fi=a(601),gi=a.n(fi),vi=a(603),bi=a.n(vi),Oi=a(602),wi=a.n(Oi),ki=a(598),Ei=a.n(ki),Pi=a(1354),Ci=a(385),xi=a.n(Ci),ji=a(1295),Ai=Object(br.a)(function(e){return Object(N.a)({root:{width:60},title:{flexGrow:1},hide:{display:"none"},drawer:{width:300,flexShrink:0},drawerPaper:{width:300,backgroundColor:e.palette.grey[50]},drawerHeader:Object(W.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar,{justifyContent:"flex-start",backgroundColor:e.palette.grey[300]}),listItem:{marginBottom:1,"&.Mui-selected":{backgroundColor:e.palette.grey[100]}},listItemNewItem:{marginBottom:1,"&.Mui-selected":{},"&:hover":{}},content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginRight:-300},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:0},Icon:{padding:0,margin:0,minWidth:30},fabProgress:{position:"absolute",zIndex:1},spin:{animationName:"spin",animationDuration:"4000ms",animationIterationCount:"infinite",animationTimingFunction:"linear"}})}),Si=function(e){e.disabled;var t=e.currentUser,a=Ai(),o=Object(pi.a)(),i=Object(n.useContext)(ue),s=Object(T.g)(),c=r.a.useState(!1),l=Object(f.a)(c,2),p=l[0],u=l[1],d=r.a.useState(!1),h=Object(f.a)(d,2),m=h[0],y=h[1],g=r.a.useState(!1),b=Object(f.a)(g,2),w=b[0],k=b[1],E=r.a.useState(0),P=Object(f.a)(E,2),C=P[0],x=P[1],j=r.a.useState(),A=Object(f.a)(j,2),S=A[0],D=A[1],N=r.a.useState(!1),R=Object(f.a)(N,2),I=R[0],F=R[1],L=!1,U=void 0,B=function(e){return e&&e.Title?e.Title:""}(t),q=function(){var e=Object(O.a)(v.a.mark(function e(t){var a,n,r,o;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return F(!0),e.next=3,i.personalizationStore.getUserConfig();case 3:if(!(a=e.sent)||!a.notificationsSection){e.next=10;break}return!0===t&&(U=void 0),e.next=8,i.processLogStore.getProcessLogs(a.notificationsSection.lastToken,U);case 8:(n=e.sent)&&n.cacheId!==U&&(r=n.logEntries,!0!==a.notificationsSection.includeOwns&&(r=n.logEntries.filter(function(e){if(e&&e.user&&e.user.displayName.toLowerCase()===B.toLowerCase())return!0;return!0})),o=r.reduce(function(e,t){return t.timeStamp&&new Date(t.timeStamp)>new Date(a.notificationsSection.lastToken)?e+1:e},0),x(o),D(r||[]),U=n.cacheId);case 10:F(!1);case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();r.a.useEffect(function(){var e;return k(!1),t&&t.Title&&t.Title.length>1&&q().then(function(){e=setInterval(Object(O.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&t.Title&&t.Title.length>0)){e.next=5;break}return L=!0,e.next=4,q();case 4:L=!1;case 5:case"end":return e.stop()}},e,this)})),32e5)}),function(){e&&clearInterval(e)}},[t]);var V=function(){var e=Object(O.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:u(!0);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(O.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return x(0),e.next=3,i.personalizationStore.saveNotificationsToken();case 3:if(L){e.next=6;break}return e.next=6,q();case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(O.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(!0);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(O.a)(v.a.mark(function e(t){var a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.checked,e.next=3,i.personalizationStore.saveIncludeOwn(a);case 3:y(a);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:a.root,style:{margin:0,padding:0}},r.a.createElement(He.a,{onClick:V,style:{marginTop:5},"aria-label":"show 17 new notifications",color:"inherit"},r.a.createElement(ui.a,{badgeContent:C,color:"secondary"},r.a.createElement(hi.a,null))),r.a.createElement(Pi.a,{className:a.drawer,variant:"persistent",anchor:"right",open:p,classes:{paper:a.drawerPaper}},r.a.createElement("div",{className:a.drawerHeader},r.a.createElement(he.a,{container:!0,direction:"row",justify:"space-between"},r.a.createElement(he.a,{item:!0},r.a.createElement(He.a,{onClick:function(){u(!1)}},"rtl"===o.direction?r.a.createElement(yi.a,null):r.a.createElement(gi.a,null))),w&&r.a.createElement(he.a,{item:!0},r.a.createElement(M.a,{title:"Include or show my changes in the logs."},r.a.createElement("span",null,r.a.createElement(wr.a,{control:r.a.createElement(vo.a,{onChange:W,checked:m,color:"secondary"}),label:"Include mine",labelPlacement:"bottom"})))),r.a.createElement(he.a,{item:!0},r.a.createElement(M.a,{title:"Get or refresh logs"},r.a.createElement("span",null,r.a.createElement(He.a,{onClick:z,disabled:I},r.a.createElement(wi.a,null)," ",I&&r.a.createElement(Te.a,{size:32,className:a.fabProgress}))))),r.a.createElement(he.a,{item:!0},r.a.createElement(M.a,{title:"Mark Notifications as Read"},r.a.createElement("span",null,r.a.createElement(He.a,{onClick:_},r.a.createElement(bi.a,null)," ")))))),r.a.createElement(dr.a,null),r.a.createElement(ji.a,null,S&&S.map(function(e,t){return r.a.createElement(M.a,{title:e.processName,key:t,onClick:function(t){var a;(a=e)&&a.processId&&a.processId.length>10&&s.push("/process/".concat(a.processId))}},r.a.createElement(Dr.a,{button:!0,key:t,className:t<C?a.listItemNewItem:a.listItem,selected:t<C},r.a.createElement(Nr.a,{className:a.Icon},function(e){switch(e){case"ProcessCompleted":case"ProcessStarted":case"ProcessDeleted":case"ProcessRejected":case"ProcessCompleted":case"ProcessUnsigned":return r.a.createElement(xi.a,null);case"MonitoringAndReviewProcessCompleted":case"MonitoringAndReviewProcessOwnerChanged":return r.a.createElement(Ei.a,null);default:return r.a.createElement(xi.a,null)}}(e.kind)),r.a.createElement(Rr.a,{primary:r.a.createElement(de.a,{style:{fontWeight:t<C?500:void 0,fontSize:t<C?"1.3em":void 0}},e.kind.replace(/([a-z])([A-Z])/g,"$1 $2")),secondary:"".concat(ge()(e.timeStamp||"").format("lll")," by ").concat(e.user&&e.user.displayName||"")})))}))))},Ti=a(67),Di=a.n(Ti),Ni=a(143),Ri=a.n(Ni),Ii=a(1338),Fi=a(1359),Li=a(1339),Mi=a(1334),Ui=a(1332),Bi=a(1333),qi=a(1358),Vi=[{id:"functionArea",numeric:!1,disablePadding:!1,label:"OFS Function Area"},{id:"template.title",numeric:!1,disablePadding:!1,label:"Process Type"},{id:"name",numeric:!1,disablePadding:!1,label:"Name"},{id:"initiatedOn",numeric:!1,disablePadding:!1,label:"Date Initiated"},{id:"status",numeric:!1,disablePadding:!1,label:"Process Status"},{id:"transactionDate",numeric:!1,disablePadding:!1,label:"Transaction Date"},{id:"signOff.timestamp",numeric:!1,disablePadding:!1,label:"Date Signed"},{id:"signOff.signer.displayName",numeric:!1,disablePadding:!1,label:"Signed By"},{id:"monitoringAndReview.status",numeric:!1,disablePadding:!1,label:"M & R Status"},{id:"action",numeric:!1,disablePadding:!1,label:"Action"}],_i=(hn=function(e){function t(){return Object(w.a)(this,t),Object(E.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(k.a)(t,[{key:"createSortHandler",value:function(e){var t=this;return function(a){t.props.onRequestSort(a,e)}}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.showSelect,o=t.orderBy,i=t.order,s=Object(R.a)(function(e){return Object(N.a)({head:{backgroundColor:e.palette.primary.dark,color:e.palette.common.white,"&:hover":{backgroundColor:e.palette.primary.light}}})})(Ui.a);return r.a.createElement(Bi.a,null,r.a.createElement(Mi.a,null,!n&&r.a.createElement(s,{className:a.tableCell,align:"center"},"Select"),Vi.map(function(t){return r.a.createElement(s,{key:t.id,className:a.tableCell,align:"center",padding:t.disablePadding?"none":"default",sortDirection:o===t.id&&i},r.a.createElement(M.a,{title:t.label,placement:t.numeric?"bottom-end":"bottom-start",enterDelay:300},r.a.createElement(qi.a,{active:o===t.id,direction:i,onClick:e.createSortHandler(t.id),style:o===t.id?{color:ct.a[300]}:{}},t.label)))})))}}]),t}(r.a.PureComponent),Object(x.a)(hn.prototype,"createSortHandler",[D.a],Object.getOwnPropertyDescriptor(hn.prototype,"createSortHandler"),hn.prototype),hn),zi=a(1285),Wi=a(1290),Yi=a(1336),Hi=a(1307),Ki=a(980),Gi=a(606),Ji=a.n(Gi),Qi=a(386),Xi=a.n(Qi),Zi=a(387),$i=a.n(Zi),es=a(607),ts=a.n(es),as=a(193),ns=a(294),rs=(fn=yn=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(E.a)(this,Object(P.a)(t).call(this,e))).state={open:!1,name:"",requiredName:!1,global:!1,isDuplicate:!1,overwriteViewName:!1},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"isNewView",value:function(){var e=this.context.personalizationStore.selectedViewFilter;return!(e&&""!==e.id&&"0"!==e.id&&e.id.length>10)}},{key:"handleClickOpen",value:function(){var e="";!1===this.isNewView()&&(e=this.context.personalizationStore.selectedViewFilter.name),this.setState({open:!0,overwriteViewName:!1,name:e,requiredName:!1})}},{key:"handleClose",value:function(){this.setState({open:!1})}},{key:"handleSave",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t,a=this;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t="",this.state.global?this.context.personalizationStore.filterViews.filter(function(e){return!0===e.global}).forEach(function(e){a.state.name.toLowerCase()!==e.name.toLowerCase()||(t=e.id)}):this.context.personalizationStore.filterViews.filter(function(e){return!1===e.global}).forEach(function(e){a.state.name.toLowerCase()!==e.name.toLowerCase()||(t=e.id)}),0!==t.length&&!0!==this.state.overwriteViewName){e.next=7;break}return e.next=5,this.props.onSaveView(this.state.name,this.state.global,t);case 5:return this.setState({open:!1,isDuplicate:!1}),e.abrupt("return");case 7:this.setState({isDuplicate:t.length>=0});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleGlobalChkBox",value:function(e,t){this.setState({global:t})}},{key:"handleoverwriteViewNameChkBox",value:function(e,t){this.setState({overwriteViewName:t})}},{key:"handleViewNameChange",value:function(e){var t=this;e&&e.target&&this.setState({name:e.target.value},function(){t.setState({requiredName:""===t.state.name})})}},{key:"render",value:function(){var e=this.state,t=e.open,a=e.name,n=e.requiredName,o=e.isDuplicate,i=this.isNewView();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Er.a,{size:"small",variant:"extended",color:"primary","aria-label":"Save Filtered View",onClick:this.handleClickOpen,style:{margin:3,paddingTop:1,paddingBottom:1,fontSize:".8em",height:"25px"}},r.a.createElement(Br.a,{style:{fontSize:".9em"}})," Save Filtered View"),r.a.createElement(Le.a,{open:t,onClose:this.handleClose,"aria-labelledby":"form-dialog-title",maxWidth:"sm",fullWidth:!0},r.a.createElement(Me.a,{id:"form-dialog-title"},"Save New Filter View"),r.a.createElement(Ue.a,null,i&&r.a.createElement(Be.a,null,"Please enter a name for the new filter view. This view will then appear under your profile name."),!i&&r.a.createElement(Be.a,null,'Update view " ',a,' " or use a different view name to create a new one.'),r.a.createElement(xr.a,{error:n||o,fullWidth:!0},r.a.createElement(mo.a,{htmlFor:"component-error"},"View Name"),r.a.createElement(Wi.a,{fullWidth:!0,id:"viewname",value:a,onChange:this.handleViewNameChange,"aria-describedby":"viewname-text"}),n&&r.a.createElement(Gr.a,{id:"viewname-text"},"View Name is required."),o&&r.a.createElement(Gr.a,{id:"viewname-text"},"View name already exists."),o&&r.a.createElement(wr.a,{style:{marginLeft:50},control:r.a.createElement(kr.a,{value:"overwriteViewName",checked:this.state.overwriteViewName,onChange:this.handleoverwriteViewNameChkBox}),label:r.a.createElement("span",{style:{fontWeight:600}},"Overwrite?")})),r.a.createElement(wr.a,{control:r.a.createElement(kr.a,{value:"global",checked:this.state.global,onChange:this.handleGlobalChkBox}),label:"Global"})),r.a.createElement(qe.a,null,r.a.createElement(Ne.a,{onClick:this.handleClose,color:"primary"},"Cancel"),r.a.createElement(Ne.a,{onClick:this.handleSave,color:"primary",disabled:n},"Save"))))}}]),t}(r.a.Component),yn.contextType=ue,mn=fn,Object(x.a)(mn.prototype,"handleClickOpen",[D.a],Object.getOwnPropertyDescriptor(mn.prototype,"handleClickOpen"),mn.prototype),Object(x.a)(mn.prototype,"handleClose",[D.a],Object.getOwnPropertyDescriptor(mn.prototype,"handleClose"),mn.prototype),Object(x.a)(mn.prototype,"handleSave",[D.a],Object.getOwnPropertyDescriptor(mn.prototype,"handleSave"),mn.prototype),Object(x.a)(mn.prototype,"handleGlobalChkBox",[D.a],Object.getOwnPropertyDescriptor(mn.prototype,"handleGlobalChkBox"),mn.prototype),Object(x.a)(mn.prototype,"handleoverwriteViewNameChkBox",[D.a],Object.getOwnPropertyDescriptor(mn.prototype,"handleoverwriteViewNameChkBox"),mn.prototype),Object(x.a)(mn.prototype,"handleViewNameChange",[D.a],Object.getOwnPropertyDescriptor(mn.prototype,"handleViewNameChange"),mn.prototype),mn),os=Object(ni.a)((On=bn=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(E.a)(this,Object(P.a)(t).call(this,e))).state={anchorEl:void 0,collapse:{},keywords:void 0,byName:!0,byFuncArea:!0,byRespParty:!0,byProcTempName:!0},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"handleAddChangeFilterClick",value:function(e){this.setState({anchorEl:e.currentTarget})}},{key:"toggleCollapse",value:function(e){var t=this.state.collapse;t[e]?t[e]=!t[e]:t[e]=!0,this.setState({collapse:t})}},{key:"handleClose",value:function(){this.setState({anchorEl:void 0})}},{key:"handleAddFilter",value:function(e){this.props.onAddFilterFunction(e)}},{key:"handleFilterDelete",value:function(e){this.props.onRemoveFilterFunction(e)}},{key:"handleKeywordsSearchChange",value:function(e){this.setState({keywords:e.target.value})}},{key:"handleClearFilters",value:function(){this.props.onClearFilterFunction()}},{key:"handleSaveView",value:function(e,t,a){this.props.onSaveView(e,t,a)}},{key:"handleCheckboxChange",value:function(e){"byName"===e.target.name&&this.setState({byName:e.target.checked}),"byFuncArea"===e.target.name&&this.setState({byFuncArea:e.target.checked}),"byRespParty"===e.target.name&&this.setState({byRespParty:e.target.checked}),"byProcTempName"===e.target.name&&this.setState({byProcTempName:e.target.checked})}},{key:"handleApplyKeywords",value:function(e,t){this.state.keywords&&this.state.keywords.length>1&&(this.handleAddFilter({key:e.key,category:e.category,label:"".concat(t," : ").concat(this.state.keywords," (").concat(this.getFieldsToString(!0).replace(",",", "),")"),DateRange:e.DateRange,LessThan:e.LessThan,Date:"",keyword:this.state.keywords,keywordFields:this.getFieldsToString(!1)}),this.setState({keywords:void 0,byFuncArea:!0,byName:!0,byRespParty:!0,byProcTempName:!0}),this.setState({anchorEl:void 0}))}},{key:"handleKeypress",value:function(e,t,a){13===e.charCode&&this.handleApplyKeywords(t,a)}},{key:"getFieldsToString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];if(!0===this.state.byName&&t.push("byName"),!0===this.state.byFuncArea&&t.push("byFuncArea"),!0===this.state.byProcTempName&&t.push("byProcTempName"),!0===this.state.byRespParty&&t.push("byRespParty"),e&&!0===e){if(t.length>=4)return"All";t=t.map(function(e){return e.replace("by","").replace(/([A-Z])/g," $1")})}return t.join(",")}},{key:"renderFilters",value:function(e,t){var a=this,n=[],o=this.state,i=o.keywords,s=o.byName,c=o.byFuncArea,l=o.byProcTempName,p=o.byRespParty;return e&&e.map(function(e){e.DateRange?n.push(r.a.createElement(ho.a,{key:e.key},a.context.personalizationStore.selectedViewFilter.filterSet.filter(function(t){return t.key===e.key}).length>0?r.a.createElement(Xi.a,null):r.a.createElement($i.a,null),r.a.createElement(as.c,{utils:ns.a},r.a.createElement(as.a,{label:e.key,value:new Date(e.Date),format:"MM/dd/yyyy",onChange:function(n){e.Date=n,a.handleAddFilter({key:e.key,category:e.category,label:t+": "+e.label+" - "+new Date(n).toLocaleDateString("en-US"),DateRange:!0,LessThan:e.LessThan,Date:n})}})))):"Keywords"===e.category?n.push(r.a.createElement(ot.a,{className:a.props.classes.paper,key:e.key},r.a.createElement(he.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"stretch",spacing:0},r.a.createElement(he.a,{item:!0,xs:12},r.a.createElement(xr.a,{fullWidth:!0,className:"clsx(classes.margin, classes.textField)",variant:"filled"},r.a.createElement(mo.a,{htmlFor:"standard-adornment-keywords-filter"},"Text Filter"),r.a.createElement(Wi.a,{autoFocus:!0,required:!0,id:"textFilter",autoComplete:"text",onChange:a.handleKeywordsSearchChange,onKeyPress:function(n){return a.handleKeypress(n,e,t)},value:a.state.keywords||"",endAdornment:r.a.createElement(Yi.a,{position:"end"},r.a.createElement(He.a,{"aria-label":"clear keywords",onClick:function(){return a.setState({keywords:void 0})}},r.a.createElement(fr.a,null)))}),r.a.createElement(Gr.a,{id:"keywords-helper-text"},"Enter words or word framents. Then, hit apply below."))),r.a.createElement(he.a,{container:!0,justify:"flex-start"},r.a.createElement(xr.a,null,r.a.createElement(bo.a,{row:!0},r.a.createElement(wr.a,{className:a.props.classes.checkbox,control:r.a.createElement(kr.a,{color:"secondary",name:"byName",onChange:a.handleCheckboxChange,checked:a.state.byName}),label:"Name"}),r.a.createElement(wr.a,{className:a.props.classes.checkbox,control:r.a.createElement(kr.a,{color:"secondary",name:"byRespParty",onChange:a.handleCheckboxChange,checked:a.state.byRespParty}),label:"Responsible Party"}),r.a.createElement(wr.a,{className:a.props.classes.checkbox,control:r.a.createElement(kr.a,{color:"secondary",name:"byFuncArea",onChange:a.handleCheckboxChange,checked:a.state.byFuncArea}),label:"Functional Area"}),r.a.createElement(wr.a,{className:a.props.classes.checkbox,control:r.a.createElement(kr.a,{color:"secondary",name:"byProcTempName",onChange:a.handleCheckboxChange,checked:a.state.byProcTempName}),label:"Proc Template Name"})))),r.a.createElement(he.a,{container:!0,justify:"flex-end"},r.a.createElement(Ne.a,{variant:"contained",color:"primary",disabled:!0===(!i||i&&i.length<=1)||!1===[s,c,l,p].some(function(e){return!0===e}),onClick:function(){return a.handleApplyKeywords(e,t)}},"Apply"))))):n.push(r.a.createElement(ho.a,{disabled:a.props.isLoading,key:e.key,onClick:function(n){a.handleAddFilter({key:e.key,category:e.category,label:t+": "+e.label,DateRange:e.DateRange,LessThan:e.LessThan,Date:""})}},a.context.personalizationStore.selectedViewFilter.filterSet.filter(function(t){return t.key===e.key}).length>0?r.a.createElement(Xi.a,null):r.a.createElement($i.a,null),r.a.createElement(Rr.a,{inset:!0,primary:e.label})))}),n}},{key:"renderFilterMenu",value:function(){var e=this,t=[],a=this.state.collapse;return this.context.personalizationStore.filterConfig.categories&&this.context.personalizationStore.filterConfig.categories.map(function(n){return t.push(r.a.createElement(r.a.Fragment,{key:n.key},r.a.createElement(ho.a,{onClick:function(t){e.toggleCollapse(n.key)}},r.a.createElement(Rr.a,{inset:!1,primary:n.name}),a[n.key]?r.a.createElement(Ji.a,null):r.a.createElement(Wt.a,null)),r.a.createElement(Hi.a,{in:a[n.key],timeout:"auto",unmountOnExit:!0},r.a.createElement(Ko.a,{"test-id":"menu-list-".concat(n.key)},e.renderFilters(e.context.personalizationStore.filterConfig.filters.filter(function(e){return e.category===n.key}),n.name)))))}),t}},{key:"render",value:function(){var e=this,t=this.state.anchorEl,a=this.props.classes,n=Boolean(t),o=this.context.personalizationStore.selectedViewFilter,i=o.filterSet,s=o.name,c=o.isDirty;return r.a.createElement(r.a.Fragment,null,r.a.createElement(he.a,{item:!0,xs:12},r.a.createElement(Ne.a,{id:"add-change-filter-button",variant:"outlined","aria-owns":n?"filter-menu":void 0,"aria-haspopup":"true",onClick:this.handleAddChangeFilterClick,style:{padding:4,margin:5}},r.a.createElement(ts.a,null)," Add/Change Filter"),r.a.createElement(Or.a,{className:a.displayHeader,m:0,p:0,component:"span"},"Current View:  ".concat(s||"No View Selected").concat(!0===c?" *":"")),r.a.createElement(M.a,{title:"Clear All Filters"},r.a.createElement("span",null,r.a.createElement(Ne.a,{id:"clear-all-filters",variant:"outlined",style:{float:"right"},onClick:this.handleClearFilters},r.a.createElement(fr.a,null)))),r.a.createElement(Ki.a,{id:"filter-menu",anchorEl:t,open:n,onClose:this.handleClose,TransitionComponent:zi.a},r.a.createElement(Ko.a,null,r.a.createElement("div",null,this.renderFilterMenu())))),r.a.createElement(ot.a,{style:{padding:2,paddingBottom:1,marginBottom:8,flex:1}},"Filters:",i&&i.map(function(t){return r.a.createElement(st.a,{key:t.key,label:t.label,style:{margin:1},onDelete:function(a){e.handleFilterDelete(t)}})}),r.a.createElement(he.a,{container:!0,alignItems:"flex-start",justify:"flex-end",direction:"row",style:{margin:0,padding:0}},r.a.createElement(rs,{onSaveView:this.handleSaveView}))))}}]),t}(r.a.Component),bn.contextType=ue,vn=On,Object(x.a)(vn.prototype,"handleAddChangeFilterClick",[D.a],Object.getOwnPropertyDescriptor(vn.prototype,"handleAddChangeFilterClick"),vn.prototype),Object(x.a)(vn.prototype,"toggleCollapse",[D.a],Object.getOwnPropertyDescriptor(vn.prototype,"toggleCollapse"),vn.prototype),Object(x.a)(vn.prototype,"handleClose",[D.a],Object.getOwnPropertyDescriptor(vn.prototype,"handleClose"),vn.prototype),Object(x.a)(vn.prototype,"handleAddFilter",[D.a],Object.getOwnPropertyDescriptor(vn.prototype,"handleAddFilter"),vn.prototype),Object(x.a)(vn.prototype,"handleFilterDelete",[D.a],Object.getOwnPropertyDescriptor(vn.prototype,"handleFilterDelete"),vn.prototype),Object(x.a)(vn.prototype,"handleKeywordsSearchChange",[D.a],Object.getOwnPropertyDescriptor(vn.prototype,"handleKeywordsSearchChange"),vn.prototype),Object(x.a)(vn.prototype,"handleClearFilters",[D.a],Object.getOwnPropertyDescriptor(vn.prototype,"handleClearFilters"),vn.prototype),Object(x.a)(vn.prototype,"handleSaveView",[D.a],Object.getOwnPropertyDescriptor(vn.prototype,"handleSaveView"),vn.prototype),Object(x.a)(vn.prototype,"handleCheckboxChange",[D.a],Object.getOwnPropertyDescriptor(vn.prototype,"handleCheckboxChange"),vn.prototype),Object(x.a)(vn.prototype,"handleApplyKeywords",[D.a],Object.getOwnPropertyDescriptor(vn.prototype,"handleApplyKeywords"),vn.prototype),Object(x.a)(vn.prototype,"handleKeypress",[D.a],Object.getOwnPropertyDescriptor(vn.prototype,"handleKeypress"),vn.prototype),gn=vn))||gn,is=Object(R.a)(function(e){return Object(N.a)({displayHeader:{marginLeft:e.spacing(1),color:e.palette.primary.dark,fontSize:"1.4em"},paper:{padding:e.spacing(3),maxWidth:690},checkbox:{fontSize:".8rem",color:e.palette.text.secondary,fontStyle:"italic"},buttons:{display:"flex",justifyContent:"flex-end"}})})(os),ss=(En=kn=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(E.a)(this,Object(P.a)(t).call(this,e)))._isMount=!1,a.state={fiscalYear:Object(J.a)(),isLoading:!0,showSelect:!1,currentExportStatus:"",selectedProcesses:[],order:"desc",orderBy:"initiatedOn",selected:[],processes:[],page:0,rowsPerPage:25,availableResponsibleParties:[],functionalAreas:[],information:{open:!1,text:"",isError:!1}},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t=this;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._isMount=!0,Object(G.p)(function(){return t.context.personalizationStore.areFiltersLoaded&&t.context.personalizationStore.isConfiguredFiltersLoaded},Object(O.a)(v.a.mark(function e(){var a,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.props.match.params.viewId&&t.props.match.params.viewId.length>0)){e.next=10;break}if(a=t.props.match.params.viewId,!(n=t.context.personalizationStore.filterViews.find(function(e){return e.id===a}))){e.next=8;break}return t.context.personalizationStore.selectedViewFilter={id:n.id,name:n.name,global:n.global,filterSet:Object(b.a)(n.filterSet)},t.props.location.pathname.indexOf("/processes")>=0&&t.props.history.replace("/processes/".concat(a)),e.next=8,t.getFiscalYears();case 8:e.next=12;break;case 10:return e.next=12,t.getFiscalYears();case 12:case"end":return e.stop()}},e,this)})));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this._isMount=!1}},{key:"getFiscalYears",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t,a,n=this;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({processes:[],isLoading:!0}),t=this.context.personalizationStore.selectedViewFilter&&this.context.personalizationStore.selectedViewFilter.filterSet,a=t.map(function(e){if("FY"===e.category)return e.key}).filter(function(e){return e}),e.t0=this,e.next=6,this.context.processStore.listAllProcessesForFiscalYears(a);case 6:e.t1=e.sent,e.t2={processes:e.t1,isLoading:!1},e.t3=function(){n.context.personalizationStore.configureDataSpecificFilters(n.state.processes)},e.t0.setState.call(e.t0,e.t2,e.t3);case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleChangePage",value:function(e,t){this.setState({page:t})}},{key:"handleChangeRowsPerPage",value:function(e){var t=e.target.value;this.setState({rowsPerPage:Number(t)})}},{key:"handleRequestSort",value:function(e,t){var a=t,n="desc";this.state.orderBy===t&&"desc"===this.state.order&&(n="asc"),this.setState({order:n,orderBy:a})}},{key:"getFilterIndex",value:function(e,t){for(var a=0;a<e.length;a++)if(e[a].key===t.key)return a;return-1}},{key:"handleFilterDelete",value:function(){var e=Object(O.a)(v.a.mark(function e(t){var a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.context.personalizationStore.selectedViewFilter&&this.context.personalizationStore.selectedViewFilter.filterSet||[],!this.filterDelete(t,a)){e.next=6;break}return e.next=4,this.getFiscalYears();case 4:e.next=7;break;case 6:this.setState({processes:Object(b.a)(this.state.processes)});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleAddFilter",value:function(){var e=Object(O.a)(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isMount){e.next=7;break}if(!0!==this.addFilter(t)){e.next=6;break}return e.next=4,this.getFiscalYears();case 4:e.next=7;break;case 6:this.setState({processes:Object(b.a)(this.state.processes)});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"filterDelete",value:function(e,t){var a=!1;this.context.personalizationStore.selectedViewFilter.isDirty=!0;var n=t.filter(function(e){return"FY"===e.category});if("FY"===e.category){if(n.length>1){var r=this.getFilterIndex(t,e);t.splice(r,1),a=!0}}else{var o=this.getFilterIndex(t,e);t.splice(o,1)}return a}},{key:"addFilter",value:function(e){var t=!1,a=this.context.personalizationStore.selectedViewFilter&&this.context.personalizationStore.selectedViewFilter.filterSet||[];return this.context.personalizationStore.selectedViewFilter.isDirty=!0,"FY"===e.category&&(t=!0),e.DateRange?a.filter(function(t){return t.key===e.key}).length<1?a.push(e):(this.filterDelete(e,a),a.push(e)):a.filter(function(t){return t.label===e.label}).length<1?a.push(e):this.filterDelete(e,a),t}},{key:"handleClearFilters",value:function(){var e=Object(O.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.context.personalizationStore.setDefaultFilter(),e.next=3,this.getFiscalYears();case 3:this.props.history.replace("/processes");case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"applyFilters",value:function(e,t){var a,n,r,o,i,s,c;return n=e.filter(function(e){return"FunctionalArea"===e.category}),a=e.filter(function(e){return"status"===e.category}),r=e.filter(function(e){return"CreatedBy"===e.category}),o=e.filter(function(e){return"ResponsibleParty"===e.category}),i=e.filter(function(e){return"TransactionDate"===e.category}),s=e.filter(function(e){return"CreationDate"===e.category}),c=e.filter(function(e){return"Keywords"===e.category}),t.filter(function(e){var t=!0,l=!0,p=!0,u=!0,d=!0,h=!0;if(a&&a.length>0&&(t=a.some(function(t){return e.status===t.key})),n&&n.length>0&&(l=n.some(function(t){return e.functionArea===t.key})),r&&r.length>0&&(p=r.some(function(t){return!!e.initiatedBy&&e.initiatedBy.displayName===t.key})),o&&o.length>0&&(u=o.some(function(t){return e.activities.some(function(e){return e.responsibleParty===t.key})})),i&&i.length>0){var m=new Date(e.transactionDate);m.setHours(0,0,0,0),d=i.every(function(e){return e.LessThan?m<=new Date(e.Date):m>=new Date(e.Date)})}if(s&&s.length>0&&e.initiatedOn){var y=new Date(e.initiatedOn);y.setHours(0,0,0,0),p=s.every(function(e){return e.LessThan?y<=new Date(e.Date):y>=new Date(e.Date)})}return c&&c.length>0&&(h=c.every(function(t){var a=!1,n=!1,r=!1,o=!1;if(t.keyword&&e.name&&t.keywordFields&&t.keywordFields.split(",").findIndex(function(e){return"byName"===e})>=0&&(a=e.name.toLowerCase().indexOf(t.keyword.toLowerCase())>=0),t.keyword&&e.name&&t.keywordFields&&t.keywordFields.split(",").findIndex(function(e){return"byFuncArea"===e})>=0&&(n=e.functionArea.toLowerCase().indexOf(t.keyword.toLowerCase())>=0),t.keyword&&e.name&&t.keywordFields&&t.keywordFields.split(",").findIndex(function(e){return"byProcTempName"===e})>=0&&(r=e.template.title.toLowerCase().indexOf(t.keyword.toLowerCase())>=0),t.keyword&&e.name&&t.keywordFields&&t.keywordFields.split(",").findIndex(function(e){return"byRespParty"===e})>=0){var i=t.keyword.toLowerCase();o=e.activities.some(function(e){return e.responsibleParty.toLowerCase().indexOf(i)>=0})}return!0===a||!0===n||!0===r||!0===o})),h&&t&&l&&p&&u&&d&&!0})}},{key:"loadAllProcesses",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),e.next=3,this.context.processStore.listAllProcesses();case 3:t=e.sent,this.setState({processes:t,isLoading:!1});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleBeginExport",value:function(){this.setState({showSelect:!0})}},{key:"handleCancelExport",value:function(){this.setState({showSelect:!1,selectedProcesses:[]})}},{key:"getSharePointOrigin",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t,a,n,r,o,i;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return e.next=4,this.context.spContext.getContextInfo();case 4:return t=e.sent,(a=document.createElement("a")).setAttribute("href",t.WebFullUrl),n=a.hostname,r=a.port,o=a.protocol,i="".concat(o,"//").concat(n).concat(r.length?":".concat(r):""),e.abrupt("return",i);case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleCompleteExport",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t,a,n,r,o,i,s,c,l,p,u,d,h=this;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(t=this.state.selectedProcesses).length){e.next=4;break}return alert("Please select process"),e.abrupt("return");case 4:return this.setState({currentExportStatus:"Initiating...",showSelect:!1}),e.next=7,this.getSharePointOrigin();case 7:a=e.sent,n=new Wa.a,r=!0,o=!1,i=void 0,e.prev=12,s=t[Symbol.iterator]();case 14:if(r=(c=s.next()).done){e.next=31;break}return l=c.value,e.next=18,this.context.processStore.getProcessPathByProcessId(l.id);case 18:return p=e.sent,e.next=21,Ya.exportProcess(l,p,a,function(e){h.setState({currentExportStatus:e})});case 21:return u=e.sent,e.t0=n,e.t1="".concat(l.functionArea,"/").concat(je()(l.name),".zip"),e.next=26,u.generateAsync({type:"blob"});case 26:e.t2=e.sent,e.t0.file.call(e.t0,e.t1,e.t2);case 28:r=!0,e.next=14;break;case 31:e.next=37;break;case 33:e.prev=33,e.t3=e.catch(12),o=!0,i=e.t3;case 37:e.prev=37,e.prev=38,r||null==s.return||s.return();case 40:if(e.prev=40,!o){e.next=43;break}throw i;case 43:return e.finish(40);case 44:return e.finish(37);case 45:return e.next=47,n.generateAsync({type:"blob"});case 47:d=e.sent,Object(pr.saveAs)(d,"processes-bulk-export.zip"),this.setState({currentExportStatus:"",selectedProcesses:[]});case 50:case"end":return e.stop()}},e,this,[[12,33,37,45],[38,,40,44]])}));return function(){return e.apply(this,arguments)}}()},{key:"handleProcessSelectedChange",value:function(e,t,a){var n=this.state.selectedProcesses,r=n.indexOf(t);r>-1&&n.splice(r,1),a&&n.push(t),this.setState({selectedProcesses:n})}},{key:"handleSaveView",value:function(){var e=Object(O.a)(v.a.mark(function e(t,a,n){var r,o,i,s=this;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.context.personalizationStore.selectedViewFilter&&this.context.personalizationStore.selectedViewFilter.filterSet||[],o={id:"",global:a,name:t,filterSet:r},!(n&&n.length>0)){e.next=10;break}return e.prev=3,e.next=6,this.context.personalizationStore.deleteFilterById(n);case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(3);case 10:return e.prev=10,e.next=13,this.context.personalizationStore.saveFilter(o,a);case 13:if(!(i=e.sent)||200!==i){e.next=22;break}return this.setState({information:{open:!0,text:"View ".concat(t," was saved successfully."),isError:!1}}),e.next=18,this.context.personalizationStore.loadViews(this.props.currentUser.Title);case 18:return this.context.personalizationStore.filterViews.forEach(function(e){if(t.toUpperCase()===e.name.toUpperCase())return s.context.personalizationStore.selectedViewFilter=e,void s.props.history.replace("/processes/".concat(e.id))}),e.abrupt("return",i);case 22:this.setState({information:{open:!0,text:"Couldnt save view ".concat(t,". Status #").concat(i,"."),isError:!0}});case 23:e.next=28;break;case 25:e.prev=25,e.t1=e.catch(10),this.setState({information:{open:!0,text:"There was an error saving view ".concat(t,"."),isError:!0}});case 28:return e.abrupt("return",0);case 29:case"end":return e.stop()}},e,this,[[3,8],[10,25]])}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"handleInfoClose",value:function(){var e=Object(O.a)(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({information:{open:!1,text:"",isError:!1}});case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.onNavigateToProcess,o=this.state,i=o.isLoading,s=o.showSelect,c=o.selectedProcesses,l=o.currentExportStatus,p=o.processes,u=o.order,d=o.orderBy,h=o.selected,m=o.rowsPerPage,y=o.page,f=m-Math.min(m,p.length-y*m),g=this.context.personalizationStore.selectedViewFilter&&this.context.personalizationStore.selectedViewFilter.filterSet||[],v=this.applyFilters(g,p);return r.a.createElement(ot.a,{className:a.root},i&&r.a.createElement(Te.a,{className:a.progress,disableShrink:!0,size:50,thickness:5}),r.a.createElement(he.a,{container:!0,spacing:0},r.a.createElement(he.a,{item:!0,xs:12},r.a.createElement(is,{onAddFilterFunction:this.handleAddFilter,onRemoveFilterFunction:this.handleFilterDelete,onClearFilterFunction:this.handleClearFilters,onSaveView:this.handleSaveView,isLoading:this.state.isLoading}))),r.a.createElement("div",{className:a.tableWrapper},r.a.createElement(Ii.a,{className:a.table,"aria-labelledby":"Process instances"},r.a.createElement(_i,{classes:a,showSelect:s,numSelected:h.length,order:u,orderBy:d,onRequestSort:this.handleRequestSort,rowCount:p.length}),r.a.createElement(Li.a,null,we()(v,[d],[u]).slice(y*m,y*m+m).map(function(t,o){return r.a.createElement(Mi.a,{hover:!0,"aria-checked":!1,tabIndex:-1,key:t.id,selected:!1},!s&&r.a.createElement(Ui.a,{className:a.tableCell},r.a.createElement(kr.a,{disabled:"CompletedAndSigned"!==t.status,checked:!!c.find(function(e){return e===t}),onChange:function(a,n){return e.handleProcessSelectedChange(a,t,n)},value:""})),r.a.createElement(Ui.a,{className:a.tableCell},t.functionArea),r.a.createElement(Ui.a,{className:a.tableCell},t.template.title),r.a.createElement(Ui.a,{className:Ri()(a.tableCell,a.nameCell),onClick:function(){return n(t)}},t.name),r.a.createElement(Ui.a,{className:a.tableCell},ge()(t.initiatedOn).format("lll")),r.a.createElement(Ui.a,{className:a.tableCell},Ce()(t.status)),r.a.createElement(Ui.a,{className:a.tableCell},t.transactionDate?ge()(new Date(t.transactionDate)).format("MM-DD-YYYY"):""),r.a.createElement(Ui.a,{className:a.tableCell},t.signOff&&t.signOff.timeStamp&&ge()(t.signOff.timeStamp).format("lll")),r.a.createElement(Ui.a,{className:a.tableCell,style:{wordBreak:"break-word"}},t.signOff&&t.signOff.signer&&t.signOff.signer.displayName),r.a.createElement(Ui.a,{className:a.tableCell},Ce()(t.monitoringAndReview&&t.monitoringAndReview.status||oe.NotStarted)),r.a.createElement(Ui.a,null,r.a.createElement(Ne.a,{variant:"contained",color:"primary",onClick:function(){return n(t)}},"View")))}),f>0&&r.a.createElement(Mi.a,{style:{height:49*f}},r.a.createElement(Ui.a,{colSpan:6}))))),r.a.createElement(Fi.a,{rowsPerPageOptions:[5,10,25,50,100,1e3],component:"div",count:v.length,rowsPerPage:m,page:y,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}),r.a.createElement(Le.a,{open:""!==l},r.a.createElement(Me.a,{id:"export-dialog-title"},"Exporting Processes..."),r.a.createElement(Ue.a,null,r.a.createElement("div",null,l),r.a.createElement(qa.a,null)),r.a.createElement(qe.a,null)),r.a.createElement(Hr.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.information.open,autoHideDuration:6e3,onClose:this.handleInfoClose},r.a.createElement(Kr.a,{classes:{root:!0===this.state.information.isError?a.snackbarError:a.snackbarInfo},message:this.state.information.text,action:[r.a.createElement(He.a,{key:"close","aria-label":"Close",color:"inherit",className:a.close,onClick:this.handleInfoClose},r.a.createElement(rt.a,null))]})))}}]),t}(r.a.Component),kn.contextType=ue,wn=En,Object(x.a)(wn.prototype,"getFiscalYears",[D.a],Object.getOwnPropertyDescriptor(wn.prototype,"getFiscalYears"),wn.prototype),Object(x.a)(wn.prototype,"handleChangePage",[D.a],Object.getOwnPropertyDescriptor(wn.prototype,"handleChangePage"),wn.prototype),Object(x.a)(wn.prototype,"handleChangeRowsPerPage",[D.a],Object.getOwnPropertyDescriptor(wn.prototype,"handleChangeRowsPerPage"),wn.prototype),Object(x.a)(wn.prototype,"handleRequestSort",[D.a],Object.getOwnPropertyDescriptor(wn.prototype,"handleRequestSort"),wn.prototype),Object(x.a)(wn.prototype,"handleFilterDelete",[D.a],Object.getOwnPropertyDescriptor(wn.prototype,"handleFilterDelete"),wn.prototype),Object(x.a)(wn.prototype,"handleAddFilter",[D.a],Object.getOwnPropertyDescriptor(wn.prototype,"handleAddFilter"),wn.prototype),Object(x.a)(wn.prototype,"filterDelete",[D.a],Object.getOwnPropertyDescriptor(wn.prototype,"filterDelete"),wn.prototype),Object(x.a)(wn.prototype,"addFilter",[D.a],Object.getOwnPropertyDescriptor(wn.prototype,"addFilter"),wn.prototype),Object(x.a)(wn.prototype,"handleClearFilters",[D.a],Object.getOwnPropertyDescriptor(wn.prototype,"handleClearFilters"),wn.prototype),Object(x.a)(wn.prototype,"applyFilters",[D.a],Object.getOwnPropertyDescriptor(wn.prototype,"applyFilters"),wn.prototype),Object(x.a)(wn.prototype,"loadAllProcesses",[D.a],Object.getOwnPropertyDescriptor(wn.prototype,"loadAllProcesses"),wn.prototype),Object(x.a)(wn.prototype,"handleBeginExport",[D.a],Object.getOwnPropertyDescriptor(wn.prototype,"handleBeginExport"),wn.prototype),Object(x.a)(wn.prototype,"handleCancelExport",[D.a],Object.getOwnPropertyDescriptor(wn.prototype,"handleCancelExport"),wn.prototype),Object(x.a)(wn.prototype,"getSharePointOrigin",[D.a],Object.getOwnPropertyDescriptor(wn.prototype,"getSharePointOrigin"),wn.prototype),Object(x.a)(wn.prototype,"handleCompleteExport",[D.a],Object.getOwnPropertyDescriptor(wn.prototype,"handleCompleteExport"),wn.prototype),Object(x.a)(wn.prototype,"handleProcessSelectedChange",[D.a],Object.getOwnPropertyDescriptor(wn.prototype,"handleProcessSelectedChange"),wn.prototype),Object(x.a)(wn.prototype,"handleSaveView",[D.a],Object.getOwnPropertyDescriptor(wn.prototype,"handleSaveView"),wn.prototype),Object(x.a)(wn.prototype,"handleInfoClose",[D.a],Object.getOwnPropertyDescriptor(wn.prototype,"handleInfoClose"),wn.prototype),wn),cs=Object(T.i)(Object(R.a)(function(e){var t;return Object(N.a)({root:{width:"100%",minHeight:"400px"},table:{minWidth:"90%"},tableWrapper:{overflowX:"auto"},tableCell:{whiteSpace:"normal","-ms-word-wrap":"break-word",wordWrap:"break-word"},nameCell:{"&:hover":{textDecoration:"underline"},cursor:"pointer"},progress:(t={position:"fixed"},Object(j.a)(t,e.breakpoints.down("lg"),{marginLeft:"40%"}),Object(j.a)(t,e.breakpoints.up("xl"),{marginLeft:"30%"}),Object(j.a)(t,"marginTop",e.spacing(40)),t),close:{padding:e.spacing(.5)},snackbarError:{backgroundColor:e.palette.error.dark},snackbarInfo:{}})})(ss)),ls=a(608),ps=a(610),us=a.n(ps),ds=a(609),hs=a.n(ds),ms=(xn=Cn=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(E.a)(this,Object(P.a)(t).call(this,e)))._isMounted=!1,a.state={allowFunctionProcessSelection:!e.path,allowProcessTemplateSelection:!e.processTemplate,isLoadingFunctionProcesses:!1,isLoadingProcessTemplates:!1,isLoadingVersions:!0,isInitiating:!1,selectedFunctionProcess:e.path||"/",selectedProcessTemplate:e.processTemplate,selectedVersion:void 0,processName:"",fiscalYear:"",transactionDate:null,versions:[],showError:!1,errorMessage:"There was an error creating the process instance."},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"handleSelectedFunctionProcessChange",value:function(e){this.setState({selectedFunctionProcess:e.target.value}),this.loadProcessTemplates(e.target.value)}},{key:"handleSelectedProcessTemplateChange",value:function(e){var t=It()(this.state.processTemplates,{id:e.target.value});this.setState({selectedProcessTemplate:t}),this.loadProcessTemplateVersions(t)}},{key:"handleSelectedVersionChange",value:function(e){var t=It()(this.state.versions,{version:e.target.value});this.setState({selectedVersion:t})}},{key:"handleProcessNameChange",value:function(e){this.setState({processName:e.target.value})}},{key:"handleFiscalYearChange",value:function(e){4==e.target.value.length&&Number.isInteger(parseInt(e.target.value))&&this.setState({fiscalYear:e.target.value})}},{key:"handleTransactionDateChange",value:function(e){this.setState({transactionDate:e})}},{key:"handleClose",value:function(e){var t=this.props.onClose;this.setState({showError:!1}),t&&t(void 0)}},{key:"FiscalYearFormat",value:function(e){var t=Object(ls.a)({},e);return r.a.createElement(hs.a,Object.assign({},t,{mask:[/\d/,/\d/,/\d/,/\d/]}))}},{key:"initiateProcess",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t,a,n,r,o,i,s,c;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.onClose,a=this.state,n=a.selectedProcessTemplate,r=a.selectedVersion,o=a.processName,i=a.transactionDate,s=a.fiscalYear,n&&n.id&&r){e.next=4;break}return e.abrupt("return");case 4:return this.setState({isInitiating:!0}),""===s?s=Object(J.a)():4===s.length&&(s="FY"+s.substring(2)),e.prev=6,e.next=9,this.context.processStore.createProcessFromProcessTemplate(n.id,r.version,o,i,s,this.props.relatedRejectedProcessInstance);case 9:c=e.sent,t&&t(c),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(6),console.log("ERROR",e.t0),this.setState({showError:!0});case 17:return e.prev=17,this.setState({isInitiating:!1}),e.finish(17);case 20:case"end":return e.stop()}},e,this,[[6,13,17,20]])}));return function(){return e.apply(this,arguments)}}()},{key:"loadFunctionProcesses",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t,a,n,r,o;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return!0===this._isMounted&&this.setState({isLoadingFunctionProcesses:!0,isLoadingProcessTemplates:!0,isLoadingVersions:!0}),e.next=3,this.context.processTemplateStore.listAllProcessTemplates();case 3:for(t=e.sent,a=[],n=Object.keys(t),r=0;r<n.length;r++)o=n[r],t[o].length>0&&a.push(o);if(0!==a.length||!0!==this._isMounted){e.next=10;break}return this.setState({isLoadingFunctionProcesses:!1,functionProcesses:a,selectedFunctionProcess:void 0,isLoadingProcessTemplates:!1,selectedProcessTemplate:void 0,processTemplates:[]}),e.abrupt("return");case 10:return!0===this._isMounted&&this.setState({isLoadingFunctionProcesses:!1,functionProcesses:a,isLoadingProcessTemplates:!1,selectedFunctionProcess:a[0],processTemplates:t[a[0]],selectedProcessTemplate:t[a[0]][0]}),e.next=13,this.loadProcessTemplateVersions(t[a[0]][0]);case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"loadProcessTemplates",value:function(){var e=Object(O.a)(v.a.mark(function e(t){var a,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t||(t=this.state.selectedFunctionProcess),t){e.next=3;break}return e.abrupt("return");case 3:return this.setState({isLoadingProcessTemplates:!0,isLoadingVersions:!0}),e.next=6,this.context.processTemplateStore.listProcessTemplatesInContainer(t);case 6:if(a=e.sent,n=this.state.selectedProcessTemplate,this.setState({isLoadingProcessTemplates:!1,processTemplates:a,selectedProcessTemplate:0===a.length?void 0:a[0]}),a&&0!==a.length){e.next=12;break}return this.setState({isLoadingVersions:!1,selectedVersion:void 0,versions:[]}),e.abrupt("return");case 12:if(n&&n.id){e.next=16;break}return e.next=15,this.loadProcessTemplateVersions(a[0]);case 15:return e.abrupt("return");case 16:if(n.id===a[0].id){e.next=20;break}return e.next=19,this.loadProcessTemplateVersions(a[0]);case 19:return e.abrupt("return");case 20:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"loadProcessTemplateVersions",value:function(){var e=Object(O.a)(v.a.mark(function e(t){var a,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t||(t=this.state.selectedProcessTemplate),t&&t.id){e.next=3;break}return e.abrupt("return");case 3:return!0===this._isMounted&&this.setState({isLoadingVersions:!0}),e.next=6,this.context.processTemplateStore.getProcessTemplateVersionHistoryById(t.id);case 6:a=e.sent,(n=a.find(function(e){return e.isCurrentVersion&&e.version.endsWith(".0")}))||(n=a.find(function(e){return e.isCurrentVersion&&!e.version.endsWith(".0")})),!0===this._isMounted&&this.setState({isLoadingVersions:!1,versions:a,selectedVersion:n});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(O.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._isMounted=!0,!0===this._isMounted&&this.setState({showError:!1}),!this.state.allowFunctionProcessSelection){e.next=7;break}return e.next=5,this.loadFunctionProcesses();case 5:e.next=15;break;case 7:if(!this.state.selectedFunctionProcess||!this.state.allowProcessTemplateSelection){e.next=12;break}return e.next=10,this.loadProcessTemplates();case 10:e.next=15;break;case 12:if(!this.state.selectedFunctionProcess||!this.state.selectedProcessTemplate){e.next=15;break}return e.next=15,this.loadProcessTemplateVersions();case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.open,n=e.path,o=e.processTemplate,i=this.state,s=i.allowProcessTemplateSelection,c=i.allowFunctionProcessSelection,l=i.isLoadingFunctionProcesses,p=i.isLoadingProcessTemplates,u=i.isLoadingVersions,d=i.isInitiating,h=i.selectedFunctionProcess,m=i.selectedProcessTemplate,y=i.functionProcesses,f=i.processName,g=i.processTemplates,v=i.fiscalYear,b=i.transactionDate,O=i.versions,w=this.state.selectedVersion,k=[];return O&&(k=O.filter(function(e){return e.version.endsWith(".0")})),0===k.length&&(w=void 0),r.a.createElement(Le.a,{open:a,onClose:this.handleClose,"aria-labelledby":"initiate-process-dialog-title",fullWidth:!0,maxWidth:"sm"},r.a.createElement(Me.a,{id:"initiate-process-dialog-title"},"Initiate Process"),r.a.createElement(Ue.a,null,r.a.createElement(he.a,{container:!0,spacing:8,justify:"space-between",alignItems:"flex-end",style:{width:"100%",margin:0}},r.a.createElement(he.a,{item:!0,xs:12,style:{margin:0,paddingTop:0,paddingBottom:0}},l&&r.a.createElement(Te.a,{variant:"indeterminate",disableShrink:!0,className:t.facebook2,size:24,thickness:4}),!l&&c&&(!y||y.length<=0)&&r.a.createElement("i",null,"No Function Processes Defined"),!l&&c&&y&&y.length>0&&r.a.createElement(M.a,{title:h},r.a.createElement(De.a,{select:!0,fullWidth:!0,label:"OFS Function/Program",className:t.textField,value:h,onChange:this.handleSelectedFunctionProcessChange,SelectProps:{MenuProps:{className:t.versionMenuItem}},helperText:"Please select the OFS Function Program that contains the Process Template to initiate."},y&&we()(y).map(function(e){return r.a.createElement(ho.a,{key:e,value:e},e)}))),!c&&r.a.createElement(M.a,{title:h},r.a.createElement(De.a,{disabled:!0,fullWidth:!0,label:"OFS Function/Program",className:t.textField,value:n}))),r.a.createElement(he.a,{item:!0,xs:12,style:{margin:0,paddingTop:10,paddingBottom:0}},p&&r.a.createElement(Te.a,{variant:"indeterminate",disableShrink:!0,className:t.facebook2,size:24,thickness:4}),!p&&s&&(!g||g.length<=0)&&r.a.createElement("i",null,"No Process Templates"),!p&&s&&h&&g&&g.length>0&&r.a.createElement(De.a,{select:!0,fullWidth:!0,label:"Process Template",className:t.textField,value:m&&m.id,onChange:this.handleSelectedProcessTemplateChange,SelectProps:{MenuProps:{className:t.versionMenuItem}},helperText:"Please select the Process Template to initiate."},g&&we()(g,["title"],["asc"]).map(function(e){return r.a.createElement(ho.a,{key:e.id,value:e.id},e.title)})),!s&&r.a.createElement(De.a,{disabled:!0,fullWidth:!0,label:"Process Template",className:t.textField,value:o.title})),r.a.createElement(he.a,{item:!0,xs:12,style:{margin:0,paddingTop:10,paddingBottom:0}},u&&r.a.createElement(Te.a,{variant:"indeterminate",disableShrink:!0,className:t.facebook2,size:24,thickness:4}),!u&&(!O||O.length<=0)&&r.a.createElement("div",null),!u&&m&&r.a.createElement(De.a,{select:!0,fullWidth:!0,label:"Version",className:t.textField,value:w?w.version:"-1",onChange:this.handleSelectedVersionChange,SelectProps:{MenuProps:{className:t.versionMenuItem}},helperText:"Please select the version of the Process Template to initiate."},k.length>0&&we()(k,["version"],["desc"]).map(function(e){return r.a.createElement(ho.a,{key:e.version,value:e.version},e.version," ",r.a.createElement("i",null,"(Published On ",ge()(e.createdOn).format("lll"),")"))}),"}",k.length<1&&r.a.createElement(ho.a,{value:"-1"},r.a.createElement("i",null,"The selected Process Template has not been published."))),!u&&m&&r.a.createElement(De.a,{fullWidth:!0,label:"Name",className:t.textField,value:f,onChange:this.handleProcessNameChange,helperText:"Please enter a name to describe the initiating process."}),r.a.createElement("br",null),r.a.createElement(as.c,{utils:ns.a},r.a.createElement(he.a,{item:!0,xs:12},!u&&m&&r.a.createElement(as.b,{clearable:!0,className:t.textField,label:"Transaction Date",value:b,onChange:this.handleTransactionDateChange,format:"MM-dd-yyyy"}))),!u&&m&&r.a.createElement(xr.a,{className:t.textField},r.a.createElement(mo.a,{htmlFor:"fiscal-year-input"},"Fiscal Year"),r.a.createElement(Wi.a,{value:v,onChange:this.handleFiscalYearChange,id:"fiscal-year-input",inputComponent:this.FiscalYearFormat}),r.a.createElement(Gr.a,null,"4 digit fiscal year."))))),r.a.createElement(qe.a,null,d&&r.a.createElement(he.a,{container:!0,style:{margin:"15px"}},r.a.createElement(Te.a,{variant:"indeterminate",disableShrink:!0,className:t.facebook2,size:24,thickness:4})),!d&&r.a.createElement(r.a.Fragment,null,this.state.showError&&r.a.createElement(st.a,{size:"small",icon:r.a.createElement(us.a,null),label:this.state.errorMessage,color:"secondary"}),r.a.createElement(Ne.a,{onClick:this.handleClose,color:"primary"},"Cancel"),r.a.createElement(Ne.a,{onClick:this.initiateProcess,color:"primary",disabled:!m||!m.id||!w||!(f.length>=3)||!(parseInt(v)>1e3)},"Initiate"))))}}]),t}(r.a.Component),Cn.contextType=ue,Pn=xn,Object(x.a)(Pn.prototype,"handleSelectedFunctionProcessChange",[D.a],Object.getOwnPropertyDescriptor(Pn.prototype,"handleSelectedFunctionProcessChange"),Pn.prototype),Object(x.a)(Pn.prototype,"handleSelectedProcessTemplateChange",[D.a],Object.getOwnPropertyDescriptor(Pn.prototype,"handleSelectedProcessTemplateChange"),Pn.prototype),Object(x.a)(Pn.prototype,"handleSelectedVersionChange",[D.a],Object.getOwnPropertyDescriptor(Pn.prototype,"handleSelectedVersionChange"),Pn.prototype),Object(x.a)(Pn.prototype,"handleProcessNameChange",[D.a],Object.getOwnPropertyDescriptor(Pn.prototype,"handleProcessNameChange"),Pn.prototype),Object(x.a)(Pn.prototype,"handleFiscalYearChange",[D.a],Object.getOwnPropertyDescriptor(Pn.prototype,"handleFiscalYearChange"),Pn.prototype),Object(x.a)(Pn.prototype,"handleTransactionDateChange",[D.a],Object.getOwnPropertyDescriptor(Pn.prototype,"handleTransactionDateChange"),Pn.prototype),Object(x.a)(Pn.prototype,"handleClose",[D.a],Object.getOwnPropertyDescriptor(Pn.prototype,"handleClose"),Pn.prototype),Object(x.a)(Pn.prototype,"initiateProcess",[D.a],Object.getOwnPropertyDescriptor(Pn.prototype,"initiateProcess"),Pn.prototype),Object(x.a)(Pn.prototype,"loadFunctionProcesses",[D.a],Object.getOwnPropertyDescriptor(Pn.prototype,"loadFunctionProcesses"),Pn.prototype),Object(x.a)(Pn.prototype,"loadProcessTemplates",[D.a],Object.getOwnPropertyDescriptor(Pn.prototype,"loadProcessTemplates"),Pn.prototype),Object(x.a)(Pn.prototype,"loadProcessTemplateVersions",[D.a],Object.getOwnPropertyDescriptor(Pn.prototype,"loadProcessTemplateVersions"),Pn.prototype),Pn),ys=Object(R.a)(Ve)(ms),fs=a(301),gs=a.n(fs),vs=a(293),bs=a.n(vs),Os=a(613),ws=a.n(Os),ks=a(611),Es=a.n(ks),Ps=a(612),Cs=a.n(Ps),xs=function(e){return Object(N.a)({paper:{paddingTop:20,paddingBottom:20},modal:{top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"absolute",width:50*e.spacing(),backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:2*e.spacing()},caption:{fontSize:16,textAlign:"center"},progress:{margin:2*e.spacing(),color:"#00695c",marginLeft:"32px"},actionButton:{padding:0,minWidth:"auto"},initiateProcessActionButton:{padding:0,minWidth:"auto",paddingLeft:"15px",paddingRight:"15px"},treeNode:{height:30},treeNodeListItemIcon:{marginRight:"6px"},containerIcon:{marginRight:0,alignItems:"center",verticalAlign:"middle"},addSubFolderButton:{width:18,height:18,color:"#1B5E20"},addProcessTemplateButton:{width:18,height:18,color:"#1B5E20"},deleteContainerButton:{},treeIconButton:{color:e.palette.primary.light},treeText:{flex:"0 0 auto",paddingLeft:8,paddingRight:24},processTemplateNodeText:{"&:hover":{textDecoration:"underline"},paddingRight:"0px"},formControl:{},exportButton:{marginLeft:e.spacing(1),marginRight:e.spacing(1),marginTop:e.spacing(.5)},treeTextFlex:{flex:1},treeTextButton:{color:e.palette.primary.light},button:{minWidth:"auto",minHeight:"auto",width:"auto",height:"auto",fontSize:12,lineHeight:1,padding:4},listitemButton:{minWidth:"auto",minHeight:"auto",width:"auto",height:"auto",fontSize:10,lineHeight:1,color:"rgba(0, 0, 0, 0.50)",marginLeft:8}})},js=Object(ni.a)((Tn=Sn=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(E.a)(this,Object(P.a)(t).call(this,e))).state={versions:[],versionDisabled:!1},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"navigateToProcessTemplate",value:function(e){e.stopPropagation();var t=this.props,a=t.processTemplate,n=t.navigateToProcessTemplate;a.id&&n(a.id)}},{key:"initiateProcess",value:function(){var e=this.props,t=e.container,a=e.processTemplate,n=e.initiateProcess;n(t,a)}},{key:"getProcessTemplateListItemStyle",value:function(){var e={};return this.props.selectedProcessTemplateId===this.props.processTemplate.id&&(e.backgroundColor="#FFF3E0"),e}},{key:"selectProcessTemplate",value:function(){this.props.selectProcessTemplate(this.props.processTemplate.id)}},{key:"setVersionOptions",value:function(){var e=Object(O.a)(v.a.mark(function e(t){var a,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return this.setState({versionDisabled:!0}),e.next=4,this.context.processTemplateStore.getProcessTemplateVersionHistoryById(t);case 4:a=e.sent,n=[],a.forEach(function(e){!1===e.isCurrentVersion&&n.push(e.version)}),this.setState({versions:n,versionDisabled:!1});case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.processTemplate;if(n)return r.a.createElement(Dr.a,{id:"process-template-".concat(n.id),dense:!0,button:!0,className:a.treeNode,style:this.getProcessTemplateListItemStyle(),onClick:this.selectProcessTemplate},r.a.createElement(Nr.a,{classes:{root:a.treeNodeListItemIcon}},r.a.createElement(Or.a,{display:"flex",alignItems:"center"},"Active"===this.props.exportMode&&r.a.createElement(r.a.Fragment,null,r.a.createElement(kr.a,{edge:"start",onChange:function(t){var a=void 0;return t.target&&!0===t.target.checked&&(e.setVersionOptions(n.id),a=e.props.selectedVersionNumer||n.version),e.props.onSelectProcessTemplateForExport(n.id,a)},checked:!!(this.props.selectedVersionNumer&&this.props.selectedVersionNumer.length>0),tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":"Select to export"}}),r.a.createElement(xr.a,{variant:"outlined",className:a.formControl},r.a.createElement($t.a,{disabled:!(this.props.selectedVersionNumer&&this.props.selectedVersionNumer.length>0),native:!0,value:this.props.selectedVersionNumer,onChange:function(t){t.target&&t.target.value&&e.props.onSelectProcessTemplateForExport(n.id,t.target.value)},inputProps:{name:"version",id:"version-simple"}},r.a.createElement("option",{style:{fontWeight:"bold"},value:n.version||""},"".concat(n.version,"*")),this.state.versions&&this.state.versions.map(function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement(ja.a,null))),r.a.createElement(Rr.a,{onClick:this.navigateToProcessTemplate,inset:!0,primary:n.title,className:Ri()(a.treeText,a.processTemplateNodeText,Object(j.a)({},a.treeTextFlex,!1))}),r.a.createElement(M.a,{title:"Show more menu items"},r.a.createElement("span",null,r.a.createElement(Ne.a,{className:a.listitemButton,size:"small",onClick:function(t){return e.props.showProcessTemplateMenu(t,e.props.container,e.props.processTemplate)}},r.a.createElement(bs.a,null)))),r.a.createElement(M.a,{title:"Edit/View Process Template"},r.a.createElement(Ne.a,{className:a.listitemButton,size:"small","aria-label":"Edit Template",onClick:this.navigateToProcessTemplate},r.a.createElement(mr.a,null))),r.a.createElement(M.a,{title:"Initiate Process"},r.a.createElement("span",null,r.a.createElement(Ne.a,{color:"primary",size:"small","aria-label":"Initiate Process",onClick:this.initiateProcess},r.a.createElement(Di.a,null)))))}}]),t}(r.a.Component),Sn.contextType=ue,An=Tn,Object(x.a)(An.prototype,"navigateToProcessTemplate",[D.a],Object.getOwnPropertyDescriptor(An.prototype,"navigateToProcessTemplate"),An.prototype),Object(x.a)(An.prototype,"initiateProcess",[D.a],Object.getOwnPropertyDescriptor(An.prototype,"initiateProcess"),An.prototype),Object(x.a)(An.prototype,"getProcessTemplateListItemStyle",[D.a],Object.getOwnPropertyDescriptor(An.prototype,"getProcessTemplateListItemStyle"),An.prototype),Object(x.a)(An.prototype,"selectProcessTemplate",[D.a],Object.getOwnPropertyDescriptor(An.prototype,"selectProcessTemplate"),An.prototype),Object(x.a)(An.prototype,"setVersionOptions",[D.a],Object.getOwnPropertyDescriptor(An.prototype,"setVersionOptions"),An.prototype),jn=An))||jn,As=Object(R.a)(xs)(js),Ss=Object(ni.a)((In=Rn=function(e){function t(){return Object(w.a)(this,t),Object(E.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(k.a)(t,[{key:"getContainerStyle",value:function(e){return e?{backgroundColor:"aliceblue"}:{}}},{key:"getProcessTemplateStyle",value:function(e,t){return Object(W.a)({},t)}},{key:"toggleContainer",value:function(){this.props.toggleContainerShowChildren(this.props.container)}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.className,o=t.container,i=t.templatesToExport,s=function(e){if(i){var t=i.findIndex(function(t){return t.id===e});if(t>=0)return i[t].version?i[t].version:void 0}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(go.c,{droppableId:"ptc-".concat(o.index)},function(t,n){return r.a.createElement("div",{ref:t.innerRef},r.a.createElement(Dr.a,{dense:!0,button:!0,className:a.treeNode,id:"process-template-container-".concat(o.index),onClick:e.toggleContainer,style:e.getContainerStyle(n.isDraggingOver)},r.a.createElement(Nr.a,{className:a.containerIcon},o.showChildren?r.a.createElement(r.a.Fragment,null,r.a.createElement(Qo.a,null),r.a.createElement(Es.a,null)):r.a.createElement(r.a.Fragment,null,r.a.createElement(Cs.a,null),r.a.createElement(ws.a,null))),r.a.createElement(Rr.a,{inset:!0,primary:e.containerName,style:{paddingRight:"5px"},className:Ri()(a.treeText,Object(j.a)({},a.treeTextFlex,!1))}),r.a.createElement(Ne.a,{className:a.actionButton,size:"small",onClick:function(t){return e.props.showProcessTemplateContainerMenu(t,e.props.container)}},r.a.createElement(bs.a,null))),r.a.createElement("div",{style:{height:"0"}},t.placeholder))}),r.a.createElement(Hi.a,{in:o.showChildren,unmountOnExit:!0},o.isLoading&&r.a.createElement(Te.a,{id:"loading-container-children",className:a.progress,size:20,thickness:5}),!o.isLoading&&o.subFolders&&o.subFolders.length>0&&r.a.createElement(ji.a,{dense:!0,className:n,style:{paddingLeft:24}},o.subFolders.map(function(t,a){return r.a.createElement(Ts,Object.assign({},e.props,{key:a,initialVisibleDepth:e.props.initialVisibleDepth,container:t}))})),!o.isLoading&&o.processTemplates&&o.processTemplates.length>0&&r.a.createElement(ji.a,{dense:!0,className:n,style:{paddingLeft:48}}," ",we()(o.processTemplates,["title"],["asc"]).map(function(t,a){return r.a.createElement(go.b,{key:a,draggableId:"pt-".concat(t.id),index:a},function(n,i){return r.a.createElement("div",Object.assign({key:t.id,ref:n.innerRef},n.draggableProps,n.dragHandleProps,{style:e.getProcessTemplateStyle(i.isDragging,n.draggableProps.style)}),r.a.createElement(As,{key:a,container:o,processTemplate:t,showProcessTemplateMenu:e.props.showProcessTemplateMenu,initiateProcess:e.props.initiateProcess,navigateToProcessTemplate:e.props.navigateToProcessTemplate,selectedProcessTemplateId:e.props.selectedProcessTemplateId,selectProcessTemplate:e.props.selectProcessTemplate,exportMode:e.props.exportMode,onSelectProcessTemplateForExport:e.props.onSelectProcessTemplateForExport,selectedVersionNumer:s(t.id)}))})}))))}},{key:"containerName",get:function(){var e=this.props.container.name;return"/"===e&&(e=""),e}}]),t}(r.a.Component),Rn.defaultProps={className:""},Nn=In,Object(x.a)(Nn.prototype,"getContainerStyle",[D.a],Object.getOwnPropertyDescriptor(Nn.prototype,"getContainerStyle"),Nn.prototype),Object(x.a)(Nn.prototype,"getProcessTemplateStyle",[D.a],Object.getOwnPropertyDescriptor(Nn.prototype,"getProcessTemplateStyle"),Nn.prototype),Object(x.a)(Nn.prototype,"toggleContainer",[D.a],Object.getOwnPropertyDescriptor(Nn.prototype,"toggleContainer"),Nn.prototype),Object(x.a)(Nn.prototype,"containerName",[G.e],Object.getOwnPropertyDescriptor(Nn.prototype,"containerName"),Nn.prototype),Dn=Nn))||Dn,Ts=Object(R.a)(xs,{withTheme:!0})(Ss),Ds=Ts,Ns=a(614),Rs=a.n(Ns),Is=(Fn=function(e){function t(){return Object(w.a)(this,t),Object(E.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(k.a)(t,[{key:"copyProcessTemplateClicked",value:function(e){var t=this.props,a=t.container,n=t.processTemplate,r=t.copyProcessTemplate;(0,t.hideProcessTemplateMenu)(),r(a,n)}},{key:"deleteProcessTemplateClicked",value:function(e){var t=this.props,a=t.container,n=t.processTemplate,r=t.deleteProcessTemplate;(0,t.hideProcessTemplateMenu)(),r(a,n)}},{key:"editProcessTemplateClicked",value:function(e){var t=this.props,a=t.processTemplate,n=t.navigateToProcessTemplate;(0,t.hideProcessTemplateMenu)(),a.id&&n(a.id)}},{key:"initiateProcessClicked",value:function(e){var t=this.props,a=t.container,n=t.processTemplate,r=t.initiateProcess;(0,t.hideProcessTemplateMenu)(),r(a,n)}},{key:"showVersionHistoryClicked",value:function(e){var t=this.props,a=t.container,n=t.processTemplate,r=t.showVersionHistory;(0,t.hideProcessTemplateMenu)(),r(a,n)}},{key:"render",value:function(){var e=this.props,t=e.menuAnchor,a=e.hideProcessTemplateMenu,n=Boolean(t);return r.a.createElement(Ki.a,{open:n,anchorEl:t,onClose:a},r.a.createElement(ho.a,{onClick:this.initiateProcessClicked},r.a.createElement(Nr.a,null,r.a.createElement(Di.a,{color:"primary"})),r.a.createElement(Rr.a,{inset:!0,primary:"Initiate Process"})),r.a.createElement(ho.a,{onClick:this.editProcessTemplateClicked},r.a.createElement(Nr.a,null,r.a.createElement(mr.a,null)),r.a.createElement(Rr.a,{inset:!0,primary:"Edit Process Template"})),r.a.createElement(ho.a,{onClick:this.copyProcessTemplateClicked},r.a.createElement(Nr.a,null,r.a.createElement(Rs.a,null)),r.a.createElement(Rr.a,{inset:!0,primary:"Copy Process Template"})),r.a.createElement(ho.a,{onClick:this.showVersionHistoryClicked},r.a.createElement(Nr.a,null,r.a.createElement(Qe.a,null)),r.a.createElement(Rr.a,{inset:!0,primary:"Version History"})),r.a.createElement(ho.a,{onClick:this.deleteProcessTemplateClicked},r.a.createElement(Nr.a,null,r.a.createElement(Ge.a,{color:"secondary"})),r.a.createElement(Rr.a,{inset:!0,primary:"Delete"})))}}]),t}(r.a.PureComponent),Object(x.a)(Fn.prototype,"copyProcessTemplateClicked",[D.a],Object.getOwnPropertyDescriptor(Fn.prototype,"copyProcessTemplateClicked"),Fn.prototype),Object(x.a)(Fn.prototype,"deleteProcessTemplateClicked",[D.a],Object.getOwnPropertyDescriptor(Fn.prototype,"deleteProcessTemplateClicked"),Fn.prototype),Object(x.a)(Fn.prototype,"editProcessTemplateClicked",[D.a],Object.getOwnPropertyDescriptor(Fn.prototype,"editProcessTemplateClicked"),Fn.prototype),Object(x.a)(Fn.prototype,"initiateProcessClicked",[D.a],Object.getOwnPropertyDescriptor(Fn.prototype,"initiateProcessClicked"),Fn.prototype),Object(x.a)(Fn.prototype,"showVersionHistoryClicked",[D.a],Object.getOwnPropertyDescriptor(Fn.prototype,"showVersionHistoryClicked"),Fn.prototype),Fn),Fs=Object(R.a)({})(Is),Ls=(Un=Mn=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(E.a)(this,Object(P.a)(t).call(this,e)))._isMounted=!1,a.state={isLoading:!0,isCopying:!1},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"handleOnClose",value:function(){this.props.onClose&&this.props.onClose()}},{key:"handleProcessTemplateTitleChange",value:function(e){var t=this.state.processTemplate;t&&(t.title=e.currentTarget.value,this.setState({processTemplate:t}))}},{key:"copyProcessTemplate",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t,a,n,r,o,i;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.processTemplateContainer,n=t.onClose,r=this.state.processTemplate,o=this.context.processTemplateStore,r){e.next=5;break}return e.abrupt("return");case 5:return this.setState({isCopying:!0}),e.next=8,o.saveProcessTemplateAsDraft(a.path,r);case 8:i=e.sent,this.setState({isCopying:!1}),n&&n(i);case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(O.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this._isMounted=!0;case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentWillMount",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t,a,n,r,o;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.processTemplateId,a=this.context.processTemplateStore,e.next=4,a.getProcessTemplateById(t);case 4:for(n=e.sent,r={activities:n.activities,fields:n.fields,description:n.description,title:n.title},o=1;It()(this.props.processTemplateContainer.processTemplates.slice(),{title:"".concat(r.title," (").concat(o,")")});)o++;r.title="".concat(r.title," (").concat(o,")"),!0===this._isMounted&&this.setState({isLoading:!1,processTemplate:r});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.processTemplateContainer,n=e.open,o=this.state,i=o.processTemplate,s=o.isLoading,c=o.isCopying,l=!1;return i&&It()(a.processTemplates.slice(),{title:i.title})&&(l=!0),r.a.createElement(Le.a,{open:n,onClose:this.handleOnClose,"aria-labelledby":"copy-process-template-dialog-title",fullWidth:!0,maxWidth:"xs"},r.a.createElement(Me.a,{id:"copy-process-template-dialog-title"},"Copy Process Template"),r.a.createElement(Ue.a,null,s&&r.a.createElement(Te.a,{variant:"indeterminate",disableShrink:!0,className:t.facebook2,size:24,thickness:4}),!s&&i&&r.a.createElement(De.a,{error:l,fullWidth:!0,value:i.title,margin:"normal",label:"New Process Template Title",helperText:l?r.a.createElement("i",null,"A Process Template with this name already exists."):void 0,onChange:this.handleProcessTemplateTitleChange})),r.a.createElement(qe.a,null,c&&!s&&r.a.createElement(he.a,{container:!0,style:{margin:"15px"}},r.a.createElement(Te.a,{variant:"indeterminate",disableShrink:!0,className:t.facebook2,size:24,thickness:4})),!c&&!s&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne.a,{onClick:this.handleOnClose,color:"primary"},"Cancel"),r.a.createElement(Ne.a,{onClick:this.copyProcessTemplate,color:"primary",disabled:l},"Copy"))))}}]),t}(r.a.Component),Mn.contextType=ue,Ln=Un,Object(x.a)(Ln.prototype,"handleOnClose",[D.a],Object.getOwnPropertyDescriptor(Ln.prototype,"handleOnClose"),Ln.prototype),Object(x.a)(Ln.prototype,"handleProcessTemplateTitleChange",[D.a],Object.getOwnPropertyDescriptor(Ln.prototype,"handleProcessTemplateTitleChange"),Ln.prototype),Object(x.a)(Ln.prototype,"copyProcessTemplate",[D.a],Object.getOwnPropertyDescriptor(Ln.prototype,"copyProcessTemplate"),Ln.prototype),Ln),Ms=Object(R.a)(Ve)(Ls),Us=(Vn=qn=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(E.a)(this,Object(P.a)(t).call(this,e))).state={isMoving:!1,processTemplate:e.processTemplate},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"handleOnClose",value:function(){this.props.onClose&&this.props.onClose(void 0)}},{key:"moveProcessTemplate",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t,a,n,r,o,i;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.onClose,n=t.processTemplateContainer,r=this.state.processTemplate,o=this.context.processTemplateStore,r.id){e.next=6;break}return a&&a(void 0),e.abrupt("return");case 6:return this.setState({isMoving:!0}),e.next=9,o.moveProcessTemplate(r.id,n.path);case 9:i=e.sent,this.setState({isMoving:!1}),a&&a(i);case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.processTemplateContainer,n=this.state,o=n.processTemplate,i=n.isMoving;return r.a.createElement(Le.a,{open:this.props.open,onClose:this.handleOnClose,"aria-labelledby":"confirm-move-process-template-dialog-title",fullWidth:!0,maxWidth:"sm"},r.a.createElement(Me.a,{id:"confirm-move-process-template-dialog-title"},"Move Process Template?"),r.a.createElement(Ue.a,null,r.a.createElement("div",null,"Are you sure you wish to move the process template titled"," ",r.a.createElement("strong",null,r.a.createElement("i",null,o.title))," ","to"," ",r.a.createElement("strong",null,r.a.createElement("i",null,a.path)))),r.a.createElement(qe.a,null,i&&r.a.createElement(he.a,{container:!0,style:{margin:"15px"}},r.a.createElement(Te.a,{variant:"indeterminate",disableShrink:!0,className:t.facebook2,size:24,thickness:4})),!i&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne.a,{onClick:this.handleOnClose,color:"primary"},"Cancel"),r.a.createElement(Ne.a,{onClick:this.moveProcessTemplate,color:"primary"},"Move"))))}}]),t}(r.a.Component),qn.contextType=ue,Bn=Vn,Object(x.a)(Bn.prototype,"handleOnClose",[D.a],Object.getOwnPropertyDescriptor(Bn.prototype,"handleOnClose"),Bn.prototype),Object(x.a)(Bn.prototype,"moveProcessTemplate",[D.a],Object.getOwnPropertyDescriptor(Bn.prototype,"moveProcessTemplate"),Bn.prototype),Bn),Bs=Object(R.a)(Ve)(Us),qs=(Wn=zn=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(E.a)(this,Object(P.a)(t).call(this,e))).state={isDeleting:!1,processTemplate:e.processTemplate},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"handleOnClose",value:function(){this.props.onClose&&this.props.onClose(!1)}},{key:"deleteProcessTemplate",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t,a,n,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.onClose,a=this.state.processTemplate,n=this.context.processTemplateStore,a.id){e.next=6;break}return t&&t(!1),e.abrupt("return");case 6:return this.setState({isDeleting:!0}),e.next=9,n.deleteProcessTemplateById(a.id);case 9:r=e.sent,this.setState({isDeleting:!1}),t&&t(r);case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.processTemplate,n=t.isDeleting;return r.a.createElement(Le.a,{open:this.props.open,onClose:this.handleOnClose,"aria-labelledby":"confirm-delete-process-template-dialog-title",fullWidth:!0,maxWidth:"xs"},r.a.createElement(Me.a,{id:"confirm-delete-process-template-dialog-title"},"Delete Process Template?"),r.a.createElement(Ue.a,null,r.a.createElement("div",null,"Are you sure you wish to delete the process template titled"," ",r.a.createElement("strong",null,r.a.createElement("i",null,a.title)))),r.a.createElement(qe.a,null,n&&r.a.createElement(he.a,{container:!0,style:{margin:"15px"}},r.a.createElement(Te.a,{variant:"indeterminate",disableShrink:!0,className:e.facebook2,size:24,thickness:4})),!n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne.a,{onClick:this.handleOnClose,color:"primary"},"Cancel"),r.a.createElement(Ne.a,{onClick:this.deleteProcessTemplate,color:"primary"},"Delete"))))}}]),t}(r.a.Component),zn.contextType=ue,_n=Wn,Object(x.a)(_n.prototype,"handleOnClose",[D.a],Object.getOwnPropertyDescriptor(_n.prototype,"handleOnClose"),_n.prototype),Object(x.a)(_n.prototype,"deleteProcessTemplate",[D.a],Object.getOwnPropertyDescriptor(_n.prototype,"deleteProcessTemplate"),_n.prototype),_n),Vs=Object(R.a)(Ve)(qs),_s=a(616),zs=a.n(_s),Ws=a(615),Ys=a.n(Ws),Hs=(Yn=function(e){function t(){return Object(w.a)(this,t),Object(E.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(k.a)(t,[{key:"createProcessTemplateClicked",value:function(e){var t=this.props,a=t.container,n=t.createProcessTemplate;(0,t.hideProcessTemplateContainerMenu)(),n(a)}},{key:"createProcessTemplateContainerClicked",value:function(e){var t=this.props,a=t.container,n=t.createProcessTemplateContainer;(0,t.hideProcessTemplateContainerMenu)(),n(a)}},{key:"deleteProcessTemplateContainerClicked",value:function(e){var t=this.props,a=t.container,n=t.deleteProcessTemplateContainer;(0,t.hideProcessTemplateContainerMenu)(),n(a)}},{key:"render",value:function(){var e=this.props,t=e.menuAnchor,a=e.container,n=e.hideProcessTemplateContainerMenu,o=Boolean(t);return r.a.createElement(Ki.a,{open:o,anchorEl:t,onClose:n},r.a.createElement(ho.a,{onClick:this.createProcessTemplateClicked},r.a.createElement(Nr.a,null,r.a.createElement(Ys.a,{color:"action"})),r.a.createElement(Rr.a,{inset:!0,primary:"Create Process Template"})),r.a.createElement(ho.a,{onClick:this.createProcessTemplateContainerClicked},r.a.createElement(Nr.a,null,r.a.createElement(zs.a,{color:"action"})),r.a.createElement(Rr.a,{inset:!0,primary:"Create Subfolder"})),r.a.createElement(ho.a,{onClick:this.deleteProcessTemplateContainerClicked,disabled:0!==a.subFolders.length||0!==a.processTemplates.length},r.a.createElement(Nr.a,null,r.a.createElement(Ge.a,{color:"secondary"})),r.a.createElement(Rr.a,{inset:!0,primary:"Delete Folder"})))}}]),t}(r.a.Component),Object(x.a)(Yn.prototype,"createProcessTemplateClicked",[D.a],Object.getOwnPropertyDescriptor(Yn.prototype,"createProcessTemplateClicked"),Yn.prototype),Object(x.a)(Yn.prototype,"createProcessTemplateContainerClicked",[D.a],Object.getOwnPropertyDescriptor(Yn.prototype,"createProcessTemplateContainerClicked"),Yn.prototype),Object(x.a)(Yn.prototype,"deleteProcessTemplateContainerClicked",[D.a],Object.getOwnPropertyDescriptor(Yn.prototype,"deleteProcessTemplateContainerClicked"),Yn.prototype),Yn),Ks=Object(R.a)({})(Hs),Gs=(Gn=Kn=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(E.a)(this,Object(P.a)(t).call(this,e))).state={isCreating:!1,newProcessTemplate:{title:"",description:""}},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"handleOnClose",value:function(){this.props.onClose&&this.props.onClose()}},{key:"handleNewProcessTemplateTitleChange",value:function(e){var t=this.state.newProcessTemplate;t.title=e.currentTarget.value,this.setState({newProcessTemplate:t})}},{key:"createProcessTemplate",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t,a,n,r,o,i;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,a=t.processTemplateContainer,n=t.onClose,r=this.state.newProcessTemplate,o=this.context.processTemplateStore,this.setState({isCreating:!0}),e.next=6,o.saveProcessTemplateAsDraft(a.path,r);case 6:i=e.sent,this.setState({isCreating:!1},function(){n&&n(i)});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.processTemplateContainer,n=this.state,o=n.isCreating,i=n.newProcessTemplate,s=!1;return i&&It()(a.processTemplates.slice(),{title:i.title})&&(s=!0),r.a.createElement(Le.a,{open:this.props.open,onClose:this.handleOnClose,"aria-labelledby":"new-process-template-dialog-title",fullWidth:!0,maxWidth:"xs"},r.a.createElement(Me.a,{id:"new-process-template-dialog-title"},"New Process Template"),r.a.createElement(Ue.a,null,r.a.createElement(De.a,{autoFocus:!0,error:s,label:"New Process Template Name",style:{width:300},value:i.title,onChange:this.handleNewProcessTemplateTitleChange,helperText:s?r.a.createElement("i",null,"A Process Template with this name already exists."):void 0,margin:"normal"})),r.a.createElement(qe.a,null,o&&r.a.createElement(he.a,{container:!0,style:{margin:"15px"}},r.a.createElement(Te.a,{variant:"indeterminate",disableShrink:!0,className:t.facebook2,size:24,thickness:4})),!o&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne.a,{onClick:this.handleOnClose,color:"primary"},"Cancel"),r.a.createElement(Ne.a,{onClick:this.createProcessTemplate,color:"primary",disabled:s},"Create"))))}}]),t}(r.a.Component),Kn.contextType=ue,Hn=Gn,Object(x.a)(Hn.prototype,"handleOnClose",[D.a],Object.getOwnPropertyDescriptor(Hn.prototype,"handleOnClose"),Hn.prototype),Object(x.a)(Hn.prototype,"handleNewProcessTemplateTitleChange",[D.a],Object.getOwnPropertyDescriptor(Hn.prototype,"handleNewProcessTemplateTitleChange"),Hn.prototype),Object(x.a)(Hn.prototype,"createProcessTemplate",[D.a],Object.getOwnPropertyDescriptor(Hn.prototype,"createProcessTemplate"),Hn.prototype),Hn),Js=Object(R.a)(Ve)(Gs),Qs=(Xn=Qn=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(E.a)(this,Object(P.a)(t).call(this,e))).state={isDeleting:!1,processTemplateContainer:e.processTemplateContainer},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"handleOnClose",value:function(){this.props.onClose&&this.props.onClose(!1)}},{key:"deleteProcessTemplateContainer",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t,a,n,r;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.onClose,a=this.state.processTemplateContainer,n=this.context.processTemplateStore,a.path){e.next=6;break}return t&&t(!1),e.abrupt("return");case 6:return this.setState({isDeleting:!0}),e.next=9,n.deleteProcessTemplateContainer(a.path);case 9:r=e.sent,this.setState({isDeleting:!1}),t&&t(r);case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.classes,t=this.state,a=t.processTemplateContainer,n=t.isDeleting;return r.a.createElement(Le.a,{open:this.props.open,onClose:this.handleOnClose,"aria-labelledby":"confirm-delete-process-template-dialog-title",fullWidth:!0,maxWidth:"xs"},r.a.createElement(Me.a,{id:"confirm-delete-process-template-dialog-title"},"Delete Subfolder?"),r.a.createElement(Ue.a,null,r.a.createElement("div",null,"Are you sure you wish to delete the folder named"," ",r.a.createElement("strong",null,r.a.createElement("i",null,a.name)))),r.a.createElement(qe.a,null,n&&r.a.createElement(he.a,{container:!0,style:{margin:"15px"}},r.a.createElement(Te.a,{variant:"indeterminate",disableShrink:!0,className:e.facebook2,size:24,thickness:4})),!n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne.a,{onClick:this.handleOnClose,color:"primary"},"Cancel"),r.a.createElement(Ne.a,{onClick:this.deleteProcessTemplateContainer,color:"primary"},"Delete"))))}}]),t}(r.a.Component),Qn.contextType=ue,Jn=Xn,Object(x.a)(Jn.prototype,"handleOnClose",[D.a],Object.getOwnPropertyDescriptor(Jn.prototype,"handleOnClose"),Jn.prototype),Object(x.a)(Jn.prototype,"deleteProcessTemplateContainer",[D.a],Object.getOwnPropertyDescriptor(Jn.prototype,"deleteProcessTemplateContainer"),Jn.prototype),Jn),Xs=Object(R.a)(Ve)(Qs),Zs=(er=$n=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(E.a)(this,Object(P.a)(t).call(this,e))).state={isCreating:!1,processTemplateContainer:e.processTemplateContainer,newContainerName:""},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"handleOnClose",value:function(){this.props.onClose&&this.props.onClose(void 0)}},{key:"handleNewContainerNameChange",value:function(e){this.setState({newContainerName:e.currentTarget.value})}},{key:"createProcessTemplateContainer",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t,a,n,r,o,i;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.onClose,a=this.state,n=a.processTemplateContainer,r=a.newContainerName,o=this.context.processTemplateStore,n.path){e.next=6;break}return t&&t(void 0),e.abrupt("return");case 6:if(this.setState({isCreating:!0}),0!==n.depth){e.next=13;break}return e.next=10,o.putProcessTemplateContainer("/".concat(r));case 10:i=e.sent,e.next=16;break;case 13:return e.next=15,o.putProcessTemplateContainer("".concat(n.path,"/").concat(r));case 15:i=e.sent;case 16:this.setState({isCreating:!1}),t&&t(i);case 18:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.classes,t=this.state.isCreating;return r.a.createElement(Le.a,{open:this.props.open,onClose:this.handleOnClose,"aria-labelledby":"create-process-template-container-dialog-title",fullWidth:!0,maxWidth:"xs"},r.a.createElement(Me.a,{id:"create-process-template-container-dialog-title"},"Create Subfolder"),r.a.createElement(Ue.a,null,r.a.createElement(De.a,{label:"New Folder Name",style:{width:300},value:this.state.newContainerName,onChange:this.handleNewContainerNameChange,margin:"normal"})),r.a.createElement(qe.a,null,t&&r.a.createElement(he.a,{container:!0,style:{margin:"15px"}},r.a.createElement(Te.a,{variant:"indeterminate",disableShrink:!0,className:e.facebook2,size:24,thickness:4})),!t&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne.a,{onClick:this.handleOnClose,color:"primary"},"Cancel"),r.a.createElement(Ne.a,{onClick:this.createProcessTemplateContainer,color:"primary"},"Create"))))}}]),t}(r.a.Component),$n.contextType=ue,Zn=er,Object(x.a)(Zn.prototype,"handleOnClose",[D.a],Object.getOwnPropertyDescriptor(Zn.prototype,"handleOnClose"),Zn.prototype),Object(x.a)(Zn.prototype,"handleNewContainerNameChange",[D.a],Object.getOwnPropertyDescriptor(Zn.prototype,"handleNewContainerNameChange"),Zn.prototype),Object(x.a)(Zn.prototype,"createProcessTemplateContainer",[D.a],Object.getOwnPropertyDescriptor(Zn.prototype,"createProcessTemplateContainer"),Zn.prototype),Zn),$s=Object(R.a)(Ve)(Zs),ec=(nr=ar=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(E.a)(this,Object(P.a)(t).call(this,e))).state={isLoading:!0,versionHistory:[]},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"handleClose",value:function(e){this.props.onClose&&this.props.onClose()}},{key:"getProcessTemplateVersionHistory",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t,a,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((t=this.props.processTemplate).id){e.next=3;break}return e.abrupt("return");case 3:return this.setState({isLoading:!0}),a=this.context.processTemplateStore,e.next=7,a.getProcessTemplateVersionHistoryById(t.id);case 7:n=e.sent,this.setState({isLoading:!1,versionHistory:n});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){this.getProcessTemplateVersionHistory()}},{key:"renderVersion",value:function(e){return r.a.createElement("span",null,e.version," ",ge()(e.createdOn).format("MM/DD/YY h:mm a")," ",e.createdBy.displayName)}},{key:"render",value:function(){var e=this,t=this.props,a=t.open,n=t.processTemplate,o=this.state,i=o.isLoading,s=o.versionHistory;return r.a.createElement(Le.a,{open:a,onClose:this.handleClose,"aria-labelledby":"initiate-process-dialog-title",fullWidth:!0,maxWidth:"sm"},r.a.createElement(Me.a,{id:"initiate-process-dialog-title"},"Version History for ",r.a.createElement("i",null,n.title)),r.a.createElement(Ue.a,null,i&&r.a.createElement(Te.a,{size:20,thickness:5}),!i&&r.a.createElement(ji.a,{dense:!0,style:{paddingLeft:32}},s.map(function(t,a){return r.a.createElement(Dr.a,{key:a},r.a.createElement(Rr.a,null,r.a.createElement(r.a.Fragment,null,t.isCurrentVersion&&r.a.createElement("b",null,e.renderVersion(t)),!t.isCurrentVersion&&e.renderVersion(t))))}))),r.a.createElement(qe.a,null,r.a.createElement(Ne.a,{onClick:this.handleClose,color:"primary"},"OK")))}}]),t}(r.a.Component),ar.contextType=ue,tr=nr,Object(x.a)(tr.prototype,"handleClose",[D.a],Object.getOwnPropertyDescriptor(tr.prototype,"handleClose"),tr.prototype),Object(x.a)(tr.prototype,"getProcessTemplateVersionHistory",[D.a],Object.getOwnPropertyDescriptor(tr.prototype,"getProcessTemplateVersionHistory"),tr.prototype),tr),tc=Object(R.a)({})(ec),ac=a(617),nc=function(){function e(){Object(w.a)(this,e)}return Object(k.a)(e,null,[{key:"insert",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,r=Object(ac.a)(t),o=r[0],i=r.slice(1),s=(n||"")+"/"+o,c=e.find(function(e){return e.text===o}),l=Object.keys(a),p=Object.keys(a).map(function(e){return a[e]}),u=[],d=0;d<=l.length;d++)if(l[d]===s+"/"){u=p[d];break}return c||e.push(c={text:o,children:[],files:u}),i.length>0&&this.insert(c.children,i,a,s),e}},{key:"renderIndex",value:function(e){var t=this,a=Object.keys(e).map(function(e){return(e=e.replace(/\/$/,"")).split("/").slice(1)}).reduce(function(a,n){return t.insert(a,n,e)}),n=[];a.map(function(e){!function e(t,a){var n=t.children;if(t.state={opened:!0},t.files){var r=[];t.files.forEach(function(e){var t="templates/"+"".concat(e.title.toLowerCase().replace(/[/\\?%*:|"<>]/g,"-"),"-").concat(e.id)+".html";r.push({text:e.title,a_attr:t,icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAMAAADXqc3KAAAAe1BMVEVHcEwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABenuUFAAAAKHRSTlMAEf1ozDMiCt3J5/7t6mIpKuP86cgJrSyYAe6W2Vhh8e8/LihU30bsv5M4BAAAAHRJREFUKM+10kcKgDAQQNHYjb333u9/QoWE6EQXIvhXw7zFQAhCn6qtjSQ6YJ8XdN/ZUDS63/TRMKVHQC6QC0C5AhpssbnBLBz1Lb4B7R0EOsnnIaSzx8OqkpYfb1gKaXp1I+YgYq9YQcgYpIl8hkvh2wfZAadqIXDDcFsRAAAAAElFTkSuQmCC"})}),t.children=[].concat(Object(b.a)(t.children),r)}a.push(t),n&&n.length>0&&n.map(function(t){e(t,n)})}(e,n)});var o=JSON.stringify(n),i="\n      $(document).ready(function () {\n        $('#jstree_div').jstree({ 'core' : {\n          'data' : ".concat(o,'\n      } })\n        .bind("select_node.jstree", function(e, data){\n          if(data.node.original.a_attr){\n            var href = data.node.original.a_attr;\n            window.location.href = href;\t\t\n          }\n        });\n      });');return r.a.createElement("html",{lang:"en"},r.a.createElement("head",null,r.a.createElement("meta",{charSet:"utf-8"}),r.a.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1, shrink-to-fit=no"}),r.a.createElement("meta",{httpEquiv:"X-UA-Compatible",content:"IE=edge"}),r.a.createElement("link",{rel:"stylesheet",href:"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"}),r.a.createElement("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/jstree/3.2.1/themes/default/style.min.css"}),r.a.createElement("script",{src:"https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.1/jquery.min.js"}),r.a.createElement("script",{src:"https://cdnjs.cloudflare.com/ajax/libs/jstree/3.2.1/jstree.min.js"}),r.a.createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:this.style}}),r.a.createElement("style",{type:"text/css",media:"print",dangerouslySetInnerHTML:{__html:this.printStyle}})),r.a.createElement("body",{style:{margin:"10px"}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-12"},r.a.createElement("h1",{className:"onlyprint"},"Process Templates"))),r.a.createElement("p",null),r.a.createElement("div",{id:"jstree_div"}),r.a.createElement("script",{type:"text/javascript",dangerouslySetInnerHTML:{__html:i}})))}},{key:"renderProcessTemplate",value:function(e){return r.a.createElement("html",{lang:"en"},r.a.createElement("head",null,r.a.createElement("meta",{charSet:"utf-8"}),r.a.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1, shrink-to-fit=no"}),r.a.createElement("meta",{httpEquiv:"X-UA-Compatible",content:"IE=edge"}),r.a.createElement("link",{rel:"stylesheet",href:"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"}),r.a.createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:this.style}}),r.a.createElement("style",{type:"text/css",media:"print",dangerouslySetInnerHTML:{__html:this.printStyle}})),r.a.createElement("body",{style:{margin:"10px"}},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-12"},r.a.createElement("h1",{className:"onlyprint"},"Template Name: ",e.title))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-12"},r.a.createElement("footer",{className:"onlyprint"}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-12"},r.a.createElement("div",{className:"panel panel-default"},r.a.createElement("div",{className:"panel-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-6"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"control-label"},"path")," ",r.a.createElement("label",{style:{borderTop:"none",boxShadow:"none",borderLeft:"none",borderRight:"none",borderRadius:"unset"},className:"form-control"},e.path))),r.a.createElement("div",{className:"col-xs-6"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"control-label"},"Version ")," ",r.a.createElement("label",{style:{borderTop:"none",boxShadow:"none",borderLeft:"none",borderRight:"none",borderRadius:"unset"},className:"form-control"},e.version)))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-6"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"control-label"},"Created By")," ",r.a.createElement("label",{style:{borderTop:"none",boxShadow:"none",borderLeft:"none",borderRight:"none",borderRadius:"unset"},className:"form-control"},e.createdBy.displayName))),r.a.createElement("div",{className:"col-xs-6"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"control-label"},"Created Date")," ",r.a.createElement("label",{style:{borderTop:"none",boxShadow:"none",borderLeft:"none",borderRight:"none",borderRadius:"unset"},className:"form-control"},e.created?ge()(e.created).format("lll"):"")))))))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-12"},r.a.createElement("h3",null,r.a.createElement("b",null,"Activities"))),e.activities.map(function(e,t){return r.a.createElement("div",{key:t,className:"col-xs-12"},r.a.createElement("div",{className:"panel panel-default"},r.a.createElement("div",{className:"panel-body"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-xs-12"},r.a.createElement("label",{className:"control-label"},"Activity #".concat(t+1))),r.a.createElement("div",{className:"col-xs-12"},r.a.createElement("label",{className:"control-label"},"Description : "),r.a.createElement("div",{style:{height:"auto",border:"none",boxShadow:"none",marginBottom:"10px"},dangerouslySetInnerHTML:{__html:Ut.a.sanitize(e.description)}})),r.a.createElement("div",{className:"col-xs-12"},r.a.createElement("label",{className:"control-label"},"Responsible Party : "),""!==e.responsibleParty?e.responsibleParty:" [none]"),r.a.createElement("div",{className:"col-xs-3"},r.a.createElement("label",{className:"control-label"},"Depends On Previous : "),e.dependsOnPreviousActivity?" Yes":" No"),r.a.createElement("div",{className:"col-xs-3"},r.a.createElement("label",{className:"control-label"},"Allow Attachments : "),e.allowAttachments?" Yes":" No"),r.a.createElement("div",{className:"col-xs-3"},r.a.createElement("label",null,"Require Attachments : "),e.requireAttachments?" Yes":" No"),r.a.createElement("div",{className:"col-xs-3"},r.a.createElement("label",{className:"control-label"},"Requires Secondary Review : "),e.requiresReview?" Yes":" No")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{style:{height:"auto",border:"none",boxShadow:"none",marginTop:"10px"},className:"col-xs-12"},r.a.createElement("label",{className:"control-label"},"Tooltip : "),e.tooltip?e.tooltip:" [none]")))))})))))}},{key:"exportIndex",value:function(e){return Object(Va.renderToStaticMarkup)(this.renderIndex(e))}},{key:"exportTemplate",value:function(e){return Object(Va.renderToStaticMarkup)(this.renderProcessTemplate(e))}}]),e}();nc.style="",nc.printStyle="\n      body {zoom: 82%;\n        orientation:landscape;\n    ";var rc,oc=new RegExp(/^[0-9a-fA-F]{8}-([0-9a-fA-F]{4}-){3}[0-9a-fA-F]{12}$/),ic=r.a.createContext({}),sc=Object(ni.a)((sr=ir=function(e){function t(e,a){var n;return Object(w.a)(this,t),(n=Object(E.a)(this,Object(P.a)(t).call(this,e,a))).state={export:{mode:"",isValid:!1},templatesToExport:[]},n}return Object(C.a)(t,e),Object(k.a)(t,[{key:"onDragEnd",value:function(e){if(e.destination){var t,a,n=this.context.processTemplateContainerStore,r=e.draggableId.replace(/pt-/,""),o=!0,i=!1,s=void 0;try{for(var c,l=n.flatContainers[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var p=c.value;if(a=It()(p.processTemplates,{id:r})){t=p;break}}}catch(h){i=!0,s=h}finally{try{o||null==l.return||l.return()}finally{if(i)throw s}}var u=e.destination.droppableId.replace(/^r?ptc-/,""),d=n.flatContainers[parseInt(u,10)];t&&d&&a&&t!==d&&this.setState({currentCommand:{kind:rc.MoveProcessTemplate,sourceContainer:t,container:d,processTemplate:a,menuAnchor:void 0}})}}},{key:"listAllProcessTemplates",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t,a,n=this;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=this.context.processTemplateContainerStore).initialVisibleDepth=this.props.initialVisibleDepth,a=t.listAllProcessTemplates("",function(e){n.setState({cancelLoading:e.cancel})}),e.next=5,a;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"beginCopyProcessTemplate",value:function(e,t){var a=gs()(t);this.setState({currentCommand:{kind:rc.CopyProcessTemplate,container:e,processTemplate:a}})}},{key:"beginCreateProcessTemplate",value:function(e){this.setState({currentCommand:{kind:rc.CreateProcessTemplate,container:e,depth:-1}})}},{key:"beginCreateProcessTemplateContainer",value:function(e){this.setState({currentCommand:{kind:rc.CreateContainer,container:e,depth:-1}})}},{key:"beginDeleteProcessTemplate",value:function(e,t){this.setState({currentCommand:{kind:rc.DeleteProcessTemplate,container:e,processTemplate:t}})}},{key:"beginDeleteProcessTemplateContainer",value:function(e){this.setState({currentCommand:{kind:rc.DeleteContainer,container:e,depth:-1}})}},{key:"beginInitiateProcess",value:function(e,t){var a=gs()(t);this.setState({currentCommand:{kind:rc.InitiateProcess,container:e,processTemplate:a}})}},{key:"beginShowVersionHistory",value:function(e,t){var a=gs()(t);this.setState({currentCommand:{kind:rc.ShowProcessTemplateVersionHistory,container:e,processTemplate:a}})}},{key:"clearCurrentCommand",value:function(){this.setState({currentCommand:void 0})}},{key:"handleCopyProcessTemplateClosed",value:function(){var e=Object(O.a)(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.clearCurrentCommand(),t&&t.id&&this.navigateToProcessTemplate(t.id);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleMoveProcessTemplateClosed",value:function(){var e=Object(O.a)(v.a.mark(function e(t){var a,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t?this.selectProcessTemplate(t.id):this.selectProcessTemplate(),a=this.context.processTemplateContainerStore,n=this.state.currentCommand,this.clearCurrentCommand(),!(n&&t&&t.id)){e.next=7;break}return e.next=7,Promise.all([a.listProcessTemplatesInContainer(n.container),a.listProcessTemplatesInContainer(n.sourceContainer)]);case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleProcessTemplateCreated",value:function(){var e=Object(O.a)(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.clearCurrentCommand(),t&&t.id&&this.navigateToProcessTemplate(t.id);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleProcessTemplateContainerCreated",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.context.processTemplateContainerStore,this.clearCurrentCommand(),e.next=4,t.listAllProcessTemplates();case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleProcessTemplateDeleted",value:function(){var e=Object(O.a)(v.a.mark(function e(t){var a,n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=this.context.processTemplateContainerStore,n=this.state.currentCommand,this.clearCurrentCommand(),!t){e.next=6;break}return e.next=6,a.listProcessTemplatesInContainer(n.container);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleProcessTemplateContainerDeleted",value:function(){var e=Object(O.a)(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.clearCurrentCommand(),!t){e.next=4;break}return e.next=4,this.listAllProcessTemplates();case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleProcessInitiated",value:function(){var e=Object(O.a)(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.clearCurrentCommand(),t&&(this.selectProcessTemplate(t.template.id),this.props.history.push("/process/".concat(t.id)));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"selectProcessTemplate",value:function(e){var t=Se.a.parse(this.props.location.search);t.pt!==e&&(t.pt=e,this.props.history.push("".concat(this.props.location.pathname,"?").concat(Se.a.stringify(t)))),this.context.processTemplateContainerStore.selectProcessTemplate(e)}},{key:"handleOnSelectProcessTemplateForExport",value:function(e,t){if(e){var a=this.state.templatesToExport.findIndex(function(t){return t.id===e});if(a>=0)if(t&&t.length>0)this.setState(function(n){return n.templatesToExport[a]={id:e||"",version:t||""},{templatesToExport:Object(b.a)(n.templatesToExport),export:{isValid:!0,mode:n.export.mode}}});else{var n=Object(b.a)(this.state.templatesToExport);n.splice(a,1),this.setState(function(e){return{templatesToExport:n,export:{isValid:n.length>0,mode:e.export.mode}}})}else this.setState(function(a){return{templatesToExport:[].concat(Object(b.a)(a.templatesToExport),[{id:e||"",version:t||""}]),export:{isValid:!0,mode:a.export.mode}}})}}},{key:"navigateToProcessTemplate",value:function(e){oc.test(e)&&(this.selectProcessTemplate(e),this.props.history.push("/template/".concat(e)))}},{key:"showProcessTemplateMenu",value:function(e,t,a){this.setState({currentCommand:{kind:rc.ShowProcessTemplateMenu,container:t,processTemplate:a,menuAnchor:e.currentTarget}})}},{key:"showProcessTemplateContainerMenu",value:function(e,t){e.stopPropagation(),this.setState({currentCommand:{kind:rc.ShowProcessTemplateContainerMenu,container:t,menuAnchor:e.currentTarget}})}},{key:"componentWillMount",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t,a,n,r,o,i,s,c,l,p,u;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=Se.a.parse(this.props.location.search)).pt||!oc.test(t.pt.toString())){e.next=37;break}return this.context.processTemplateContainerStore.selectProcessTemplate(t.pt.toString()),e.next=5,this.listAllProcessTemplates();case 5:if(!t||!t.start){e.next=35;break}r=!0,o=!1,i=void 0,e.prev=9,s=this.context.processTemplateContainerStore.flatContainers[Symbol.iterator]();case 11:if(r=(c=s.next()).done){e.next=20;break}if(l=c.value,!(n=It()(l.processTemplates,{id:t.pt.toString()}))){e.next=17;break}return a=l,e.abrupt("break",20);case 17:r=!0,e.next=11;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(9),o=!0,i=e.t0;case 26:e.prev=26,e.prev=27,r||null==s.return||s.return();case 29:if(e.prev=29,!o){e.next=32;break}throw i;case 32:return e.finish(29);case 33:return e.finish(26);case 34:a&&n&&(p=t.start.toString(),u=t.name&&t.name.toString()||"",this.setState({currentCommand:{kind:rc.InitiateProcess,container:a,processTemplate:n},relatedRejectedProcessInstance:{id:p,name:u}}),this.props.history.replace("".concat(this.props.location.pathname)));case 35:e.next=38;break;case 37:return e.abrupt("return",this.listAllProcessTemplates());case 38:case"end":return e.stop()}},e,this,[[9,22,26,34],[27,,29,33]])}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t=this;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(function e(){var a=t.context.processTemplateContainerStore.selectedProcessTemplateId;if(a){var n=document.getElementById("process-template-".concat(a));if(n){var r=n.getClientRects(),o=r[0]?r[0].top:0;(o>window.scrollY+window.innerHeight||o<window.scrollY)&&window.scroll({top:o,behavior:"smooth"})}else setTimeout(function(){e()},500)}})();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.state.cancelLoading&&this.state.cancelLoading("Operation canceled by user"),this.context.processTemplateContainerStore.selectProcessTemplate()}},{key:"getSharePointOrigin",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t,a,n,r,o,i;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return e.next=4,this.context.spContext.getContextInfo();case 4:return t=e.sent,(a=document.createElement("a")).setAttribute("href",t.WebFullUrl),n=a.hostname,r=a.port,o=a.protocol,i="".concat(o,"//").concat(n).concat(r.length?":".concat(r):""),e.abrupt("return",i);case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleCompleteExport",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t,a,n,r,o,i,s,c,l,p,u,d,h,m,y,f,g,b,O;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({export:{mode:"Active",isValid:!1}}),e.next=3,this.context.processTemplateStore.listAllProcessTemplates();case 3:for(t=e.sent,a=this.state.templatesToExport.map(function(e){return e.id}),n={},r=Object.keys(t),o=0;o<r.length;o++)i=r[o],s=t[i].filter(function(e){return a.indexOf(e.id||"")>=0}),n[i]=s;c=new Wa.a,l=nc.exportIndex(n),c.file("index.html",l),p=!0,u=!1,d=void 0,e.prev=14,h=this.state.templatesToExport[Symbol.iterator]();case 16:if(p=(m=h.next()).done){e.next=25;break}return y=m.value,e.next=20,this.context.processTemplateStore.getProcessTemplateById(y.id,y.version);case 20:(f=e.sent).title&&(g=nc.exportTemplate(f),b="".concat(f.title.toLocaleLowerCase().replace(/[/\\?%*:|"<>]/g,"-"),"-").concat(f.id),c.file("templates/".concat(b,".html"),g));case 22:p=!0,e.next=16;break;case 25:e.next=31;break;case 27:e.prev=27,e.t0=e.catch(14),u=!0,d=e.t0;case 31:e.prev=31,e.prev=32,p||null==h.return||h.return();case 34:if(e.prev=34,!u){e.next=37;break}throw d;case 37:return e.finish(34);case 38:return e.finish(31);case 39:return e.next=41,c.generateAsync({type:"blob"});case 41:O=e.sent,saveAs(O,"processTemps-export.zip"),this.setState({export:{mode:"",isValid:!1}});case 44:case"end":return e.stop()}},e,this,[[14,27,31,39],[32,,34,38]])}));return function(){return e.apply(this,arguments)}}()},{key:"handleBeginExport",value:function(){var e=Object(O.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({export:{mode:"Active",isValid:this.state.templatesToExport&&this.state.templatesToExport.length>0}});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"customKebabCase",value:function(e){return e.toLowerCase()}},{key:"render",value:function(){var e=this,t=this.props,a=t.className,n=t.initialVisibleDepth,o=t.classes,i=t.title,s=this.state.currentCommand,c=this.context.processTemplateContainerStore;return r.a.createElement("div",null,r.a.createElement("div",{style:{float:"right"}},""===this.state.export.mode&&r.a.createElement(Ne.a,{variant:"contained",color:"primary",title:"Begin Export Process Templates",className:o.exportButton,onClick:this.handleBeginExport},r.a.createElement(et.a,{style:{fontSize:"24px",marginRight:"8px"}}),"SELECT TEMPLATES FOR EXPORT"),"Active"===this.state.export.mode&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne.a,{variant:"contained",color:"primary",title:"Cancel Export Process",className:o.exportButton,onClick:function(){return e.setState({export:{mode:"",isValid:!1}})}},r.a.createElement(et.a,{style:{fontSize:"24px",marginRight:"8px"}}),"Cancel"),r.a.createElement(Ne.a,{variant:"contained",color:"primary",title:"Export Process Templates",className:o.exportButton,disabled:!this.state.export.isValid,onClick:this.handleCompleteExport},r.a.createElement(et.a,{style:{fontSize:"24px",marginRight:"8px"}}),"Complete Export"))),r.a.createElement(ot.a,{className:Ri()(o.paper,a)},i&&r.a.createElement(de.a,{variant:"caption",className:o.caption},i),c.isLoading&&r.a.createElement(Te.a,{className:o.progress,size:30,thickness:5}),!c.isLoading&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ic.Provider,{value:this.state},r.a.createElement(go.a,{onDragEnd:this.onDragEnd},r.a.createElement(go.c,{droppableId:"rptc-0",isDropDisabled:!0},function(t,a){return r.a.createElement("div",{ref:t.innerRef},r.a.createElement(Ds,{initialVisibleDepth:n,container:c.flatContainers[0],showProcessTemplateMenu:e.showProcessTemplateMenu,showProcessTemplateContainerMenu:e.showProcessTemplateContainerMenu,navigateToProcessTemplate:e.navigateToProcessTemplate,initiateProcess:e.beginInitiateProcess,selectedProcessTemplateId:c.selectedProcessTemplateId,selectProcessTemplate:e.selectProcessTemplate,onSelectProcessTemplateForExport:e.handleOnSelectProcessTemplateForExport,toggleContainerShowChildren:c.toggleContainerShowChildren,exportMode:e.state.export.mode,templatesToExport:e.state.templatesToExport}),t.placeholder)}))),s&&function(){switch(s.kind){case rc.CopyProcessTemplate:return r.a.createElement(Ms,{open:!0,onClose:e.handleCopyProcessTemplateClosed,processTemplateContainer:s.container,processTemplateId:s.processTemplate.id});case rc.CreateContainer:return r.a.createElement($s,{open:!0,onClose:e.handleProcessTemplateContainerCreated,processTemplateContainer:s.container});case rc.CreateProcessTemplate:return r.a.createElement(Js,{open:!0,onClose:e.handleProcessTemplateCreated,processTemplateContainer:s.container});case rc.DeleteContainer:return r.a.createElement(Xs,{open:!0,onClose:e.handleProcessTemplateContainerDeleted,processTemplateContainer:s.container});case rc.DeleteProcessTemplate:return r.a.createElement(Vs,{open:!0,onClose:e.handleProcessTemplateDeleted,processTemplateContainer:s.container,processTemplate:s.processTemplate});case rc.InitiateProcess:return r.a.createElement(ys,{open:!0,onClose:e.handleProcessInitiated,path:s.container.path,processTemplate:s.processTemplate,relatedRejectedProcessInstance:e.state.relatedRejectedProcessInstance});case rc.MoveProcessTemplate:return r.a.createElement(Bs,{open:!0,onClose:e.handleMoveProcessTemplateClosed,processTemplateContainer:s.container,processTemplate:s.processTemplate});case rc.ShowProcessTemplateContainerMenu:return r.a.createElement(Ks,{createProcessTemplate:e.beginCreateProcessTemplate,createProcessTemplateContainer:e.beginCreateProcessTemplateContainer,deleteProcessTemplateContainer:e.beginDeleteProcessTemplateContainer,hideProcessTemplateContainerMenu:e.clearCurrentCommand,container:s.container,menuAnchor:s.menuAnchor});case rc.ShowProcessTemplateMenu:return r.a.createElement(Fs,{initiateProcess:e.beginInitiateProcess,showVersionHistory:e.beginShowVersionHistory,copyProcessTemplate:e.beginCopyProcessTemplate,deleteProcessTemplate:e.beginDeleteProcessTemplate,navigateToProcessTemplate:e.navigateToProcessTemplate,hideProcessTemplateMenu:e.clearCurrentCommand,container:s.container,menuAnchor:s.menuAnchor,processTemplate:s.processTemplate});case rc.ShowProcessTemplateVersionHistory:return r.a.createElement(tc,{open:!0,onClose:e.clearCurrentCommand,processTemplate:s.processTemplate});default:return r.a.createElement("div",null,"Unknown Command")}}())))}}]),t}(r.a.Component),ir.contextType=ue,ir.defaultProps={className:"",title:"",initialVisibleDepth:3},or=sr,Object(x.a)(or.prototype,"onDragEnd",[D.a],Object.getOwnPropertyDescriptor(or.prototype,"onDragEnd"),or.prototype),Object(x.a)(or.prototype,"listAllProcessTemplates",[D.a],Object.getOwnPropertyDescriptor(or.prototype,"listAllProcessTemplates"),or.prototype),Object(x.a)(or.prototype,"beginCopyProcessTemplate",[D.a],Object.getOwnPropertyDescriptor(or.prototype,"beginCopyProcessTemplate"),or.prototype),Object(x.a)(or.prototype,"beginCreateProcessTemplate",[D.a],Object.getOwnPropertyDescriptor(or.prototype,"beginCreateProcessTemplate"),or.prototype),Object(x.a)(or.prototype,"beginCreateProcessTemplateContainer",[D.a],Object.getOwnPropertyDescriptor(or.prototype,"beginCreateProcessTemplateContainer"),or.prototype),Object(x.a)(or.prototype,"beginDeleteProcessTemplate",[D.a],Object.getOwnPropertyDescriptor(or.prototype,"beginDeleteProcessTemplate"),or.prototype),Object(x.a)(or.prototype,"beginDeleteProcessTemplateContainer",[D.a],Object.getOwnPropertyDescriptor(or.prototype,"beginDeleteProcessTemplateContainer"),or.prototype),Object(x.a)(or.prototype,"beginInitiateProcess",[D.a],Object.getOwnPropertyDescriptor(or.prototype,"beginInitiateProcess"),or.prototype),Object(x.a)(or.prototype,"beginShowVersionHistory",[D.a],Object.getOwnPropertyDescriptor(or.prototype,"beginShowVersionHistory"),or.prototype),Object(x.a)(or.prototype,"clearCurrentCommand",[D.a],Object.getOwnPropertyDescriptor(or.prototype,"clearCurrentCommand"),or.prototype),Object(x.a)(or.prototype,"handleCopyProcessTemplateClosed",[D.a],Object.getOwnPropertyDescriptor(or.prototype,"handleCopyProcessTemplateClosed"),or.prototype),Object(x.a)(or.prototype,"handleMoveProcessTemplateClosed",[D.a],Object.getOwnPropertyDescriptor(or.prototype,"handleMoveProcessTemplateClosed"),or.prototype),Object(x.a)(or.prototype,"handleProcessTemplateCreated",[D.a],Object.getOwnPropertyDescriptor(or.prototype,"handleProcessTemplateCreated"),or.prototype),Object(x.a)(or.prototype,"handleProcessTemplateContainerCreated",[D.a],Object.getOwnPropertyDescriptor(or.prototype,"handleProcessTemplateContainerCreated"),or.prototype),Object(x.a)(or.prototype,"handleProcessTemplateDeleted",[D.a],Object.getOwnPropertyDescriptor(or.prototype,"handleProcessTemplateDeleted"),or.prototype),Object(x.a)(or.prototype,"handleProcessTemplateContainerDeleted",[D.a],Object.getOwnPropertyDescriptor(or.prototype,"handleProcessTemplateContainerDeleted"),or.prototype),Object(x.a)(or.prototype,"handleProcessInitiated",[D.a],Object.getOwnPropertyDescriptor(or.prototype,"handleProcessInitiated"),or.prototype),Object(x.a)(or.prototype,"selectProcessTemplate",[D.a],Object.getOwnPropertyDescriptor(or.prototype,"selectProcessTemplate"),or.prototype),Object(x.a)(or.prototype,"handleOnSelectProcessTemplateForExport",[D.a],Object.getOwnPropertyDescriptor(or.prototype,"handleOnSelectProcessTemplateForExport"),or.prototype),Object(x.a)(or.prototype,"navigateToProcessTemplate",[D.a],Object.getOwnPropertyDescriptor(or.prototype,"navigateToProcessTemplate"),or.prototype),Object(x.a)(or.prototype,"showProcessTemplateMenu",[D.a],Object.getOwnPropertyDescriptor(or.prototype,"showProcessTemplateMenu"),or.prototype),Object(x.a)(or.prototype,"showProcessTemplateContainerMenu",[D.a],Object.getOwnPropertyDescriptor(or.prototype,"showProcessTemplateContainerMenu"),or.prototype),Object(x.a)(or.prototype,"getSharePointOrigin",[D.a],Object.getOwnPropertyDescriptor(or.prototype,"getSharePointOrigin"),or.prototype),Object(x.a)(or.prototype,"handleCompleteExport",[D.a],Object.getOwnPropertyDescriptor(or.prototype,"handleCompleteExport"),or.prototype),Object(x.a)(or.prototype,"handleBeginExport",[D.a],Object.getOwnPropertyDescriptor(or.prototype,"handleBeginExport"),or.prototype),rr=or))||rr,cc=Object(T.i)(Object(R.a)(xs,{withTheme:!0})(sc));!function(e){e.ShowProcessTemplateMenu="ShowProcessTemplateMenu",e.ShowProcessTemplateContainerMenu="ShowProcessTemplateContainerMenu",e.CreateContainer="CreateContainer",e.DeleteContainer="DeleteContainer",e.CreateProcessTemplate="CreateProcessTemplate",e.CopyProcessTemplate="CopyProcessTemplate",e.DeleteProcessTemplate="DeleteProcessTemplate",e.MoveProcessTemplate="MoveProcessTemplate",e.ShowProcessTemplateVersionHistory="ShowProcessTemplateVersionHistory",e.InitiateProcess="InitiateProcess"}(rc||(rc={}));var lc=cc,pc=function(e){function t(e,a){var n;return Object(w.a)(this,t),(n=Object(E.a)(this,Object(P.a)(t).call(this,e,a))).state={},n}return Object(C.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return r.a.createElement(lc,{initialVisibleDepth:20})}}]),t}(r.a.PureComponent);pc.contextType=ue;var uc,dc,hc,mc,yc=Object(T.i)(Object(R.a)(function(e){return Object(N.a)({})})(pc)),fc=(hc=dc=function(e){function t(e,a){var n;return Object(w.a)(this,t),(n=Object(E.a)(this,Object(P.a)(t).call(this,e,a))).child=r.a.createRef(),n.state={isInitiateDialogOpen:!1},n}return Object(C.a)(t,e),Object(k.a)(t,[{key:"refreshData",value:function(){var e=Object(O.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.child||!this.child.current){e.next=3;break}return e.next=3,this.child.current.getFiscalYears();case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleClickOpen",value:function(){this.setState({isInitiateDialogOpen:!0})}},{key:"handleExport",value:function(){var e=Object(O.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.child||!this.child.current){e.next=3;break}return e.next=3,this.child.current.handleCompleteExport();case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleClose",value:function(){var e=Object(O.a)(v.a.mark(function e(t){var a=this;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({isInitiateDialogOpen:!1}),t&&(this.handleNavigateToProcess(t),setTimeout(Object(O.a)(v.a.mark(function e(){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.context.processStore.getAvailableFiscalYears(!0);case 2:t=e.sent,a.context.personalizationStore.configureFilters(t);case 4:case"end":return e.stop()}},e,this)})),1e3));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleNavigateToProcess",value:function(e){var t="/process/".concat(e.id);this.props.history.location.pathname!==t&&this.props.history.push(t)}},{key:"render",value:function(){var e=this.props,t=e.tab,a=e.classes;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"processes"===t?"block":"none"},id:"mainComponent"},r.a.createElement(he.a,{container:!0,alignItems:"flex-start",justify:"space-between",direction:"row",className:a.header},r.a.createElement(Ne.a,{variant:"contained",color:"primary",onClick:this.handleClickOpen},r.a.createElement(Di.a,{className:this.props.classes.icons})," Initiate Process"),r.a.createElement(Ne.a,{variant:"contained",color:"primary",onClick:this.handleExport},r.a.createElement(et.a,{className:this.props.classes.icons})," Export")),r.a.createElement(cs,{innerRef:this.child,onNavigateToProcess:this.handleNavigateToProcess,currentUser:this.props.currentUser}),this.state.isInitiateDialogOpen&&r.a.createElement(ys,{open:this.state.isInitiateDialogOpen,onClose:this.handleClose})),"templates"===t&&r.a.createElement(yc,null))}}]),t}(r.a.Component),dc.contextType=ue,uc=hc,Object(x.a)(uc.prototype,"refreshData",[D.a],Object.getOwnPropertyDescriptor(uc.prototype,"refreshData"),uc.prototype),Object(x.a)(uc.prototype,"handleClickOpen",[D.a],Object.getOwnPropertyDescriptor(uc.prototype,"handleClickOpen"),uc.prototype),Object(x.a)(uc.prototype,"handleExport",[D.a],Object.getOwnPropertyDescriptor(uc.prototype,"handleExport"),uc.prototype),Object(x.a)(uc.prototype,"handleClose",[D.a],Object.getOwnPropertyDescriptor(uc.prototype,"handleClose"),uc.prototype),Object(x.a)(uc.prototype,"handleNavigateToProcess",[D.a],Object.getOwnPropertyDescriptor(uc.prototype,"handleNavigateToProcess"),uc.prototype),uc),gc=Object(T.i)(Object(R.a)(function(e){return Object(N.a)({icons:{marginRight:e.spacing()},toolbarTitle:{flex:1},titleLink:{textDecoration:"none",color:e.palette.common.black},header:{marginBottom:e.spacing(1)}})})(fc)),vc=(mc=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(E.a)(this,Object(P.a)(t).call(this,e)))._childRef=r.a.createRef(),a.state={title:e.title,currentUser:void 0,appStore:e.appStore,isAdmin:!1},a}return Object(C.a)(t,e),Object(k.a)(t,[{key:"handleViewChange",value:function(){var e=Object(O.a)(v.a.mark(function e(t){var a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(a=this.props.appStore.personalizationStore.filterViews.find(function(e){return e.id===t}))&&(this.props.appStore.personalizationStore.selectedViewFilter={id:a.id,name:a.name,global:a.global,filterSet:Object(b.a)(a.filterSet)},this._childRef&&this._childRef.current&&this._childRef.current.refreshData&&this._childRef.current.refreshData()),this.props.appStore.personalizationStore.selectedViewFilter&&this.props.appStore.personalizationStore.selectedViewFilter.id.length>0&&(this.props.location.pathname.indexOf("/processes")>=0?this.props.history.replace("/processes/".concat(t)):this.props.history.push("/processes/".concat(t)));case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(O.a)(v.a.mark(function e(){var t,a,n,r,o,i,s;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.appStore,e.next=3,t.spContext.getCurrentUser();case 3:return a=e.sent,e.prev=4,e.next=7,Promise.all([t.processStore.getAvailableFiscalYears(),t.processTemplateStore.getPartiesList(),t.spContext.getRootWebTitle(),t.personalizationStore.loadViews(a.Title)]);case 7:n=e.sent,r=Object(f.a)(n,3),o=r[0],i=r[1],s=r[2],this.setState({currentUser:a,title:"".concat(this.props.title," (").concat(s,")"),isAdmin:t.spContext.isAdministrator(a)}),t.personalizationStore.availableResponsibleParties=i,t.personalizationStore.configureFilters(o),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4),console.log(e.t0);case 20:case"end":return e.stop()}},e,this,[[4,17]])}));return function(){return e.apply(this,arguments)}}()},{key:"handleTabChange",value:function(e,t){"/processes"===t&&this.props.appStore.personalizationStore.selectedViewFilter&&this.props.appStore.personalizationStore.selectedViewFilter.id.length>0&&(t="".concat(t,"/").concat(this.props.appStore.personalizationStore.selectedViewFilter.id)),this.props.history.push(t)}},{key:"render",value:function(){var e=this,t=this.state.currentUser,a=this.props,n=a.classes,o=a.appStore,i=Object(y.a)(a,["classes","appStore"]);return r.a.createElement(ue.Provider,{value:o},r.a.createElement(si.a,{theme:li},r.a.createElement(I.a,null),r.a.createElement(F.a,{position:"static",color:"default",className:n.appBar},r.a.createElement(L.a,null,r.a.createElement(M.a,{title:"OFS Business Process Management (BPM)"},r.a.createElement("a",{className:n.titleLink,href:"/"},r.a.createElement("img",{src:_o.a,className:n.titleImage,alt:"OFS Business Process Management"}))),r.a.createElement(S.a,{value:"/templates"===this.props.history.location.pathname?"/templates":"/processes",onChange:this.handleTabChange,indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"off",className:n.toolbarTitle},r.a.createElement(A.a,{label:"Process Instances",value:"/processes"}),r.a.createElement(A.a,{label:"Process Templates",value:"/templates"})),!0===this.state.isAdmin&&r.a.createElement(Si,{disabled:!1,currentUser:t}),r.a.createElement(ii,{currentUser:t,onViewChange:this.handleViewChange}))),r.a.createElement("div",{className:n.layout+" "+n.appBody,role:"main"},r.a.createElement(T.d,null,r.a.createElement(T.b,{path:"/(|processes|templates)/:viewId?",render:function(){return r.a.createElement(gc,{tab:e.props.history.location.pathname.startsWith("/templates")?"templates":"processes",currentUser:t,innerRef:e._childRef})}}),r.a.createElement(T.b,{path:"/process/:id/:mr?",render:function(e){return r.a.createElement($r,Object.assign({},i,{currentUser:t}))}}),r.a.createElement(T.b,{path:"/template/:id/:ver?",render:function(e){return r.a.createElement(qo,i)}}))),r.a.createElement(ye,null)))}}]),t}(r.a.Component),Object(x.a)(mc.prototype,"handleViewChange",[D.a],Object.getOwnPropertyDescriptor(mc.prototype,"handleViewChange"),mc.prototype),Object(x.a)(mc.prototype,"handleTabChange",[D.a],Object.getOwnPropertyDescriptor(mc.prototype,"handleTabChange"),mc.prototype),mc),bc=Object(T.i)(Object(R.a)(function(e){return Object(N.a)({"@global":{body:{backgroundColor:e.palette.common.white}},appBar:{position:"relative"},appBody:{marginTop:e.spacing(),minHeight:"55vh"},titleImage:{paddingRight:"100px"},toolbarTitle:{flex:1},titleLink:{textDecoration:"none",color:e.palette.common.black},layout:Object(j.a)({width:"auto",marginLeft:e.spacing(),marginRight:e.spacing()},e.breakpoints.up(1270+e.spacing(3)),{width:1270,marginLeft:"auto",marginRight:"auto"}),appIcon:{fontSize:"30px",position:"relative",bottom:"-5px",paddingRight:"5px"}})})(vc));a(1230);i.a.render(r.a.createElement(s.a,null,r.a.createElement(bc,{title:"OFS Business Process Management Portal",appStore:pe})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},26:function(e,t,a){"use strict";a(447);var n=a(448);a.o(n,"ActivityStatus")&&a.d(t,"ActivityStatus",function(){return n.ActivityStatus}),a.o(n,"ProcessLogStore")&&a.d(t,"ProcessLogStore",function(){return n.ProcessLogStore}),a.o(n,"ProcessStatus")&&a.d(t,"ProcessStatus",function(){return n.ProcessStatus}),a.o(n,"ProcessStore")&&a.d(t,"ProcessStore",function(){return n.ProcessStore}),a.o(n,"ProcessTemplateContainerStore")&&a.d(t,"ProcessTemplateContainerStore",function(){return n.ProcessTemplateContainerStore}),a.o(n,"ReportingStore")&&a.d(t,"ReportingStore",function(){return n.ReportingStore});var r=a(449);a.o(r,"ActivityStatus")&&a.d(t,"ActivityStatus",function(){return r.ActivityStatus}),a.o(r,"ProcessLogStore")&&a.d(t,"ProcessLogStore",function(){return r.ProcessLogStore}),a.o(r,"ProcessStatus")&&a.d(t,"ProcessStatus",function(){return r.ProcessStatus}),a.o(r,"ProcessStore")&&a.d(t,"ProcessStore",function(){return r.ProcessStore}),a.o(r,"ProcessTemplateContainerStore")&&a.d(t,"ProcessTemplateContainerStore",function(){return r.ProcessTemplateContainerStore}),a.o(r,"ReportingStore")&&a.d(t,"ReportingStore",function(){return r.ReportingStore});var o=a(450);a.o(o,"ActivityStatus")&&a.d(t,"ActivityStatus",function(){return o.ActivityStatus}),a.o(o,"ProcessLogStore")&&a.d(t,"ProcessLogStore",function(){return o.ProcessLogStore}),a.o(o,"ProcessStatus")&&a.d(t,"ProcessStatus",function(){return o.ProcessStatus}),a.o(o,"ProcessStore")&&a.d(t,"ProcessStore",function(){return o.ProcessStore}),a.o(o,"ProcessTemplateContainerStore")&&a.d(t,"ProcessTemplateContainerStore",function(){return o.ProcessTemplateContainerStore}),a.o(o,"ReportingStore")&&a.d(t,"ReportingStore",function(){return o.ReportingStore});var i=a(451);a.o(i,"ActivityStatus")&&a.d(t,"ActivityStatus",function(){return i.ActivityStatus}),a.o(i,"ProcessLogStore")&&a.d(t,"ProcessLogStore",function(){return i.ProcessLogStore}),a.o(i,"ProcessStatus")&&a.d(t,"ProcessStatus",function(){return i.ProcessStatus}),a.o(i,"ProcessStore")&&a.d(t,"ProcessStore",function(){return i.ProcessStore}),a.o(i,"ProcessTemplateContainerStore")&&a.d(t,"ProcessTemplateContainerStore",function(){return i.ProcessTemplateContainerStore}),a.o(i,"ReportingStore")&&a.d(t,"ReportingStore",function(){return i.ReportingStore});a(452);var s=a(453);a.o(s,"ActivityStatus")&&a.d(t,"ActivityStatus",function(){return s.ActivityStatus}),a.o(s,"ProcessLogStore")&&a.d(t,"ProcessLogStore",function(){return s.ProcessLogStore}),a.o(s,"ProcessStatus")&&a.d(t,"ProcessStatus",function(){return s.ProcessStatus}),a.o(s,"ProcessStore")&&a.d(t,"ProcessStore",function(){return s.ProcessStore}),a.o(s,"ProcessTemplateContainerStore")&&a.d(t,"ProcessTemplateContainerStore",function(){return s.ProcessTemplateContainerStore}),a.o(s,"ReportingStore")&&a.d(t,"ReportingStore",function(){return s.ReportingStore});var c=a(454);a.d(t,"ProcessStatus",function(){return c.a});var l=a(455);a.o(l,"ActivityStatus")&&a.d(t,"ActivityStatus",function(){return l.ActivityStatus}),a.o(l,"ProcessLogStore")&&a.d(t,"ProcessLogStore",function(){return l.ProcessLogStore}),a.o(l,"ProcessStore")&&a.d(t,"ProcessStore",function(){return l.ProcessStore}),a.o(l,"ProcessTemplateContainerStore")&&a.d(t,"ProcessTemplateContainerStore",function(){return l.ProcessTemplateContainerStore}),a.o(l,"ReportingStore")&&a.d(t,"ReportingStore",function(){return l.ReportingStore});var p=a(456);a.o(p,"ActivityStatus")&&a.d(t,"ActivityStatus",function(){return p.ActivityStatus}),a.o(p,"ProcessLogStore")&&a.d(t,"ProcessLogStore",function(){return p.ProcessLogStore}),a.o(p,"ProcessStore")&&a.d(t,"ProcessStore",function(){return p.ProcessStore}),a.o(p,"ProcessTemplateContainerStore")&&a.d(t,"ProcessTemplateContainerStore",function(){return p.ProcessTemplateContainerStore}),a.o(p,"ReportingStore")&&a.d(t,"ReportingStore",function(){return p.ReportingStore});var u=a(457);a.d(t,"ActivityStatus",function(){return u.a});var d=a(458);a.o(d,"ProcessLogStore")&&a.d(t,"ProcessLogStore",function(){return d.ProcessLogStore}),a.o(d,"ProcessStore")&&a.d(t,"ProcessStore",function(){return d.ProcessStore}),a.o(d,"ProcessTemplateContainerStore")&&a.d(t,"ProcessTemplateContainerStore",function(){return d.ProcessTemplateContainerStore}),a.o(d,"ReportingStore")&&a.d(t,"ReportingStore",function(){return d.ReportingStore});var h=a(459);a.o(h,"ProcessLogStore")&&a.d(t,"ProcessLogStore",function(){return h.ProcessLogStore}),a.o(h,"ProcessStore")&&a.d(t,"ProcessStore",function(){return h.ProcessStore}),a.o(h,"ProcessTemplateContainerStore")&&a.d(t,"ProcessTemplateContainerStore",function(){return h.ProcessTemplateContainerStore}),a.o(h,"ReportingStore")&&a.d(t,"ReportingStore",function(){return h.ReportingStore});var m=a(460);a.d(t,"ProcessTemplateContainerStore",function(){return m.a});a(265);var y=a(475);a.d(t,"ProcessLogStore",function(){return y.a});var f=a(476);a.d(t,"ProcessStore",function(){return f.a});var g=a(477);a.d(t,"ReportingStore",function(){return g.a})},265:function(e,t,a){"use strict";a.d(t,"a",function(){return d});var n=a(1),r=a.n(n),o=a(6),i=a(12),s=a(13),c=a(97),l=a.n(c),p=a(564),u=a.n(p),d=function(){function e(t){Object(i.a)(this,e),this._partyList=void 0,this._baristaService=t}return Object(s.a)(e,[{key:"getPartiesList",value:function(){var e=Object(o.a)(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this._partyList&&this._partyList.length>0)){e.next=4;break}return e.abrupt("return",this._partyList||[]);case 4:return e.next=6,this._baristaService.get("ProcessTemplate/getAllResponsibleParties.js");case 6:if(!(t=e.sent)||!t.data){e.next=10;break}return this._partyList=t.data,e.abrupt("return",t.data);case 10:return e.abrupt("return",[]);case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"deleteProcessTemplateById",value:function(){var e=Object(o.a)(r.a.mark(function e(t){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.delete("ProcessTemplate/deleteProcessTemplateById.js",{data:{processTemplateId:t}});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteProcessTemplateContainer",value:function(){var e=Object(o.a)(r.a.mark(function e(t){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.put("ProcessTemplate/deleteProcessTemplateContainer.js",{data:{path:t}});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getProcessTemplateById",value:function(){var e=Object(o.a)(r.a.mark(function e(t,a){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.get("ProcessTemplate/getProcessTemplateById.js",{params:{processTemplateId:t,version:a}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"getProcessTemplateVersionHistoryById",value:function(){var e=Object(o.a)(r.a.mark(function e(t){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.get("ProcessTemplate/getProcessTemplateVersionHistoryById.js",{params:{processTemplateId:t}});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getProcessTemplateContainerById",value:function(){var e=Object(o.a)(r.a.mark(function e(t){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.get("ProcessTemplate/getProcessTemplateContainerById.js",{params:{processTemplateId:t}});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"saveProcessTemplateAsDraft",value:function(){var e=Object(o.a)(r.a.mark(function e(t,a){var n,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=u()(a,["id","title","description","fields","activities","jobAidAttachments"]),e.next=3,this._baristaService.put("ProcessTemplate/saveProcessTemplateAsDraft.js",{data:{path:t,processTemplate:n}});case 3:return o=e.sent,e.abrupt("return",o.data);case 5:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"publishProcessTemplateById",value:function(){var e=Object(o.a)(r.a.mark(function e(t,a){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.post("ProcessTemplate/publishProcessTemplateById.js",{data:{processTemplateId:t,versionComment:a}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"putProcessTemplateContainer",value:function(){var e=Object(o.a)(r.a.mark(function e(t){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.put("ProcessTemplate/putProcessTemplateContainer.js",{data:{path:t}});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"listAllProcessTemplateContainers",value:function(){var e=Object(o.a)(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.get("ProcessTemplate/listAllProcessTemplateContainers.js");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"listAllProcessTemplates",value:function(){var e=Object(o.a)(r.a.mark(function e(t,a){var n,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.a.CancelToken.source(),o=this._baristaService.get("ProcessTemplate/listAllProcessTemplates.js",{params:{path:t},cancelToken:n.token}),a&&a(n),e.next=5,o;case 5:return e.abrupt("return",e.sent.data);case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"listProcessTemplatesInContainer",value:function(){var e=Object(o.a)(r.a.mark(function e(t){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.get("ProcessTemplate/listProcessTemplatesInContainer.js",{params:{path:t}});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"moveProcessTemplate",value:function(){var e=Object(o.a)(r.a.mark(function e(t,a){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.post("ProcessTemplate/moveProcessTemplate.js",{data:{processTemplateId:t,path:a}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"uploadProcessTemplateAttachment",value:function(){var e=Object(o.a)(r.a.mark(function e(t,a,n,o){var i,s,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(i=new FormData).append("files[0]",n,a),s={},s=o&&o.length>0?{processId:t,fileName:a,activityId:o}:{processId:t,fileName:a},e.next=6,this._baristaService.post("ProcessTemplate/uploadProcessTemplateAttachment.js",{headers:{"Content-Type":"multipart/form-data"},params:s,data:i});case 6:return c=e.sent,e.abrupt("return",c.data);case 8:case"end":return e.stop()}},e,this)}));return function(t,a,n,r){return e.apply(this,arguments)}}()},{key:"removeProcessActivityAttachment",value:function(){var e=Object(o.a)(r.a.mark(function e(t,a,n){var o,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n&&n.length>0)){e.next=7;break}return e.next=3,this._baristaService.delete("ProcessTemplate/removeProcessTemplateAttachment.js",{data:{processId:t,fileName:a,activityId:n}});case 3:return o=e.sent,e.abrupt("return",o.data);case 7:return e.next=9,this._baristaService.delete("ProcessTemplate/removeProcessTemplateAttachment.js",{data:{processId:t,fileName:a}});case 9:return i=e.sent,e.abrupt("return",i.data);case 11:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"getProcessTemplateTreeStructure",value:function(){var e=Object(o.a)(r.a.mark(function e(t,a){var n,o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.a.CancelToken.source(),o=this._baristaService.get("ProcessTemplate/getProcessTemplateTreeStructure.js",{params:{path:t},cancelToken:n.token}),a&&a(n),e.next=5,o;case 5:return e.abrupt("return",e.sent.data);case 6:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"listProcessTemplatesForPackaging",value:function(){var e=Object(o.a)(r.a.mark(function e(t){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.get("ProcessTemplate/getProcessTemplateTreeStructure.js",{params:t});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}()},447:function(e,t,a){"use strict";var n;!function(e){e.Checkout="Checkout",e.Draft="Draft",e.Published="Published"}(n||(n={}))},448:function(e,t){},449:function(e,t){},450:function(e,t){},451:function(e,t){},452:function(e,t,a){"use strict";var n;!function(e){e[e.String=0]="String",e[e.Number=1]="Number",e[e.Date=2]="Date"}(n||(n={}))},453:function(e,t){},454:function(e,t,a){"use strict";var n;a.d(t,"a",function(){return n}),function(e){e.Initiated="Initiated",e.Active="Active",e.CompletedNotSigned="CompletedNotSigned",e.CompletedAndSigned="CompletedAndSigned",e.Inactive="Inactive",e.Deleted="Deleted",e.Rejected="Rejected"}(n||(n={}))},455:function(e,t){},456:function(e,t){},457:function(e,t,a){"use strict";var n;a.d(t,"a",function(){return n}),function(e){e.Incomplete="Incomplete",e.Complete="Complete",e.CompleteRequiresReview="CompleteRequiresReview",e.NotRequired="NotRequired"}(n||(n={}))},458:function(e,t){},459:function(e,t){},460:function(e,t,a){"use strict";a.d(t,"a",function(){return k});var n,r,o,i,s,c,l,p,u,d=a(1),h=a.n(d),m=a(6),y=a(98),f=a(12),g=a(13),v=a(2),b=(a(461),a(29)),O=a(49),w=a.n(O),k=(n=b.d.bound,r=b.d.bound,o=b.d.bound,i=b.d.bound,s=function(){function e(t,a){Object(f.a)(this,e),Object(y.a)(this,"isLoading",c,this),Object(y.a)(this,"flatContainers",l,this),Object(y.a)(this,"listAllProcessTemplates",p,this),Object(y.a)(this,"listProcessTemplatesInContainer",u,this),this._processTemplateStore=t,this.initialVisibleDepth=a||3}return Object(g.a)(e,[{key:"convertToTree",value:function(e){for(var t=Object(b.m)({index:0,name:"/",path:"/",depth:0,subFolders:[],processTemplates:e["/"],isLoading:!1,showChildren:!0}),a=[t],n=Object.keys(e),r=0;r<n.length;r++){var o=n[r];if("/"!==o){var i=e[o],s=n.indexOf(o);o=(o=o.substring(1)).substring(0,o.length-1),this.buildNodeRecursive(t,o,s,o.split("/"),0,i,1,a)}}return a}},{key:"buildNodeRecursive",value:function(e,t,a,n,r,o,i,s){if(r<n.length){var c=n[r],l=e.subFolders.find(function(e){return e.name===c});l||(l=Object(b.m)({index:a,name:c,path:t,depth:i,subFolders:[],processTemplates:o,isLoading:!1,showChildren:i<this.initialVisibleDepth,parentIndex:e.index}),s.push(l),e.subFolders.push(l)),this.buildNodeRecursive(l,t,a,n,r+1,o,i+1,s)}}},{key:"selectProcessTemplate",value:function(e){this.selectedProcessTemplateId=e}},{key:"toggleContainerShowChildren",value:function(){var e=Object(m.a)(h.a.mark(function e(t){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.showChildren?t.showChildren=!t.showChildren:(this.listProcessTemplatesInContainer(t),t.showChildren=!0);case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}(),c=Object(v.a)(s.prototype,"isLoading",[b.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),l=Object(v.a)(s.prototype,"flatContainers",[b.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=Object(v.a)(s.prototype,"listAllProcessTemplates",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Object(b.h)(h.a.mark(function e(t,a){var n,r,o,i,s,c,l,p,u=this;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.next=3,this._processTemplateStore.listAllProcessTemplates(t,a);case 3:if(n=e.sent,this.flatContainers=this.convertToTree(n),r=function e(t,a){(a(t),t.parentIndex)&&e(u.flatContainers[t.parentIndex],a)},!this.selectedProcessTemplateId){e.next=26;break}for(o=!0,i=!1,s=void 0,e.prev=10,c=this.flatContainers[Symbol.iterator]();!(o=(l=c.next()).done);o=!0)p=l.value,w()(p.processTemplates,{id:this.selectedProcessTemplateId})&&r(p,function(e){return e.showChildren=!0});e.next=18;break;case 14:e.prev=14,e.t0=e.catch(10),i=!0,s=e.t0;case 18:e.prev=18,e.prev=19,o||null==c.return||c.return();case 21:if(e.prev=21,!i){e.next=24;break}throw s;case 24:return e.finish(21);case 25:return e.finish(18);case 26:this.isLoading=!1;case 27:case"end":return e.stop()}},e,this,[[10,14,18,26],[19,,21,25]])}))}}),u=Object(v.a)(s.prototype,"listProcessTemplatesInContainer",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Object(b.h)(h.a.mark(function e(t){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.t0=b.m,e.next=4,this._processTemplateStore.listProcessTemplatesInContainer(t.path);case 4:e.t1=e.sent,t.processTemplates=(0,e.t0)(e.t1),t.isLoading=!1;case 7:case"end":return e.stop()}},e,this)}))}}),Object(v.a)(s.prototype,"selectProcessTemplate",[o],Object.getOwnPropertyDescriptor(s.prototype,"selectProcessTemplate"),s.prototype),Object(v.a)(s.prototype,"toggleContainerShowChildren",[i],Object.getOwnPropertyDescriptor(s.prototype,"toggleContainerShowChildren"),s.prototype),s)},475:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(1),r=a.n(n),o=a(6),i=a(12),s=a(13),c=function(){function e(t){Object(i.a)(this,e),this._baristaService=t}return Object(s.a)(e,[{key:"getProcessLogByProcessId",value:function(){var e=Object(o.a)(r.a.mark(function e(t){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.get("ProcessLog/getProcessLogByProcessId.js",{params:{processId:t}});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getProcessLogs",value:function(){var e=Object(o.a)(r.a.mark(function e(t,a){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.get("ProcessLog/getProcessLogs.js",{params:{date:t,currentCacheId:a}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"addLogEntryForProcess",value:function(){var e=Object(o.a)(r.a.mark(function e(t,a){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.post("ProcessLog/addLogEntryForProcess.js",{data:{processId:t,logEntry:a}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()}]),e}()},476:function(e,t,a){"use strict";a.d(t,"a",function(){return l});var n=a(1),r=a.n(n),o=a(6),i=a(12),s=a(13),c=a(112),l=function(){function e(t){Object(i.a)(this,e),this._fiscalYearList=[],this._baristaService=t}return Object(s.a)(e,[{key:"createProcessFromProcessTemplate",value:function(){var e=Object(o.a)(r.a.mark(function e(t,a,n,o,i,s){var c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.post("Process/createProcessFromProcessTemplate.js",{data:{processTemplateId:t,version:a,name:n,transactionDate:o,fiscalYear:i,relatedRejectedProcessInstance:s}});case 2:return c=e.sent,e.abrupt("return",c.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n,r,o,i){return e.apply(this,arguments)}}()},{key:"getProcessById",value:function(){var e=Object(o.a)(r.a.mark(function e(t){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.get("Process/getProcessById.js",{params:{processId:t}});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteProcessById",value:function(){var e=Object(o.a)(r.a.mark(function e(t){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.delete("Process/deleteProcessById.js",{data:{processId:t}});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"listAllProcesses",value:function(){var e=Object(o.a)(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.get("Process/listAllProcesses.js");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"listAllProcessesForFiscalYear",value:function(){var e=Object(o.a)(r.a.mark(function e(t){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t||(t=Object(c.a)()),e.next=3,this._baristaService.get("Process/listAllProcessesForFiscalYear.js",{params:{fiscalYear:t}});case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"listAllProcessesForFiscalYears",value:function(){var e=Object(o.a)(r.a.mark(function e(t){var a,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.stringify(t),e.next=3,this._baristaService.get("Process/listAllProcessesForFiscalYears.js",{params:{fiscalYears:a}});case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getAvailableFiscalYears",value:function(){var e=Object(o.a)(r.a.mark(function e(t){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&!0===t&&(this._fiscalYearList=[]),!(this._fiscalYearList&&this._fiscalYearList.length>0)){e.next=5;break}return e.abrupt("return",this._fiscalYearList||[]);case 5:return e.next=7,this._baristaService.get("Process/getAvailableFiscalYears.js");case 7:if(!(a=e.sent)||!a.data){e.next=11;break}return this._fiscalYearList=a.data.sort().reverse(),e.abrupt("return",this._fiscalYearList);case 11:return e.abrupt("return",[]);case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getProcessPathByProcessId",value:function(){var e=Object(o.a)(r.a.mark(function e(t){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.get("Process/getProcessPathByProcessId.js",{params:{processId:t}});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"markProcessActivityAsComplete",value:function(){var e=Object(o.a)(r.a.mark(function e(t,a){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.put("Process/markProcessActivityAsComplete.js",{data:{processId:t,activityId:a}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"markProcessActivityAsIncomplete",value:function(){var e=Object(o.a)(r.a.mark(function e(t,a){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.put("Process/markProcessActivityAsIncomplete.js",{data:{processId:t,activityId:a}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"markProcessActivityAsNotRequired",value:function(){var e=Object(o.a)(r.a.mark(function e(t,a,n){var o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.put("Process/markProcessActivityAsNotRequired.js",{data:{processId:t,activityId:a,comments:n}});case 2:return o=e.sent,e.abrupt("return",o.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"markProcessActivityAsReviewed",value:function(){var e=Object(o.a)(r.a.mark(function e(t,a){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.put("Process/markProcessActivityAsReviewed.js",{data:{processId:t,activityId:a}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"removeProcessActivityAttachment",value:function(){var e=Object(o.a)(r.a.mark(function e(t,a,n){var o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.delete("Process/removeProcessActivityAttachment.js",{data:{processId:t,activityId:a,fileName:n}});case 2:return o=e.sent,e.abrupt("return",o.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"signCompletedProcess",value:function(){var e=Object(o.a)(r.a.mark(function e(t){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.put("Process/signCompletedProcess.js",{data:{processId:t}});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"createProcessPDF",value:function(){var e=Object(o.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.get("Process/createProcessPDF.js",{params:{processId:t}});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"unsignProcess",value:function(){var e=Object(o.a)(r.a.mark(function e(t,a){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.put("Process/unsignProcess.js",{data:{processId:t,reason:a}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"rejectProcess",value:function(){var e=Object(o.a)(r.a.mark(function e(t,a){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.put("Process/rejectProcess.js",{data:{processId:t,reason:a}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"updateProcessActivityComments",value:function(){var e=Object(o.a)(r.a.mark(function e(t,a,n){var o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.put("Process/updateProcessActivityComments.js",{data:{processId:t,activityId:a,comments:n}});case 2:return o=e.sent,e.abrupt("return",o.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"updateProcessActivityResponsibleParty",value:function(){var e=Object(o.a)(r.a.mark(function e(t,a,n){var o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.put("Process/updateProcessActivityResponsibleParty.js",{data:{processId:t,activityId:a,responsibleParty:n}});case 2:return o=e.sent,e.abrupt("return",o.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"updateProcessFieldValue",value:function(){var e=Object(o.a)(r.a.mark(function e(t,a,n){var o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.put("Process/updateProcessFieldValue.js",{data:{processId:t,fieldId:a,fieldValue:n}});case 2:return o=e.sent,e.abrupt("return",o.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"updateProcessNotes",value:function(){var e=Object(o.a)(r.a.mark(function e(t,a){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.put("Process/updateProcessNotes.js",{data:{processId:t,notes:a}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"updateMonitoringAndReviewQuestions",value:function(){var e=Object(o.a)(r.a.mark(function e(t,a){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.put("Process/updateMonitoringAndReviewQuestions.js",{data:{processId:t,monitoringAndReview:a}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"updateMonitoringAndReviewNotes",value:function(){var e=Object(o.a)(r.a.mark(function e(t,a){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.put("Process/UpdateMonitoringAndReviewNotes.js",{data:{processId:t,generalNotes:a}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"updateMonitoringAndReviewNotedExceptions",value:function(){var e=Object(o.a)(r.a.mark(function e(t,a){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.put("Process/updateMonitoringAndReviewNotedExceptions.js",{data:{processId:t,notedExceptions:a}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"markMonitoringAndReviewAsComplete",value:function(){var e=Object(o.a)(r.a.mark(function e(t){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.put("Process/markMonitoringAndReviewCompletedProcess.js",{data:{processId:t}});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"updateMonitoringAndReviewProcessOwner",value:function(){var e=Object(o.a)(r.a.mark(function e(t,a,n){var o;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.put("Process/updateMonitoringAndReviewProcessOwner.js",{data:{processId:t,notedExceptionId:a,value:n}});case 2:return o=e.sent,e.abrupt("return",o.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a,n){return e.apply(this,arguments)}}()},{key:"updateProcessName",value:function(){var e=Object(o.a)(r.a.mark(function e(t,a){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.put("Process/updateProcessName.js",{data:{processId:t,name:a}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"uploadProcessActivityAttachment",value:function(){var e=Object(o.a)(r.a.mark(function e(t,a,n,o,i){var s,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(s=new FormData).append("files[0]",i,n),e.next=4,this._baristaService.post("Process/uploadProcessActivityAttachment.js",{headers:{"Content-Type":"multipart/form-data"},params:{processId:t,activityId:a,fileName:n,originalFileName:o},data:s});case 4:return c=e.sent,e.abrupt("return",c.data);case 6:case"end":return e.stop()}},e,this)}));return function(t,a,n,r,o){return e.apply(this,arguments)}}()},{key:"moveProcessToAnotherFiscalYear",value:function(){var e=Object(o.a)(r.a.mark(function e(t,a){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.put("Process/moveProcessToAnotherFiscalYear.js",{data:{processId:t,toFiscalYear:a}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"uploadNotedExceptionAttachment",value:function(){var e=Object(o.a)(r.a.mark(function e(t,a,n,o){var i,s,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(i=new FormData).append("files[0]",n,a),s={processId:t,notedExceptionId:o,fileName:a,originalFileName:a},e.next=6,this._baristaService.post("Process/uploadNotedExceptionAttachment.js",{headers:{"Content-Type":"multipart/form-data"},params:s,data:i});case 6:return c=e.sent,e.abrupt("return",c.data);case 8:case"end":return e.stop()}},e,this)}));return function(t,a,n,r){return e.apply(this,arguments)}}()}]),e}()},477:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var n=a(1),r=a.n(n),o=a(6),i=a(12),s=a(13),c=function(){function e(t){Object(i.a)(this,e),this._baristaService=t}return Object(s.a)(e,[{key:"clearReportingSPList",value:function(){var e=Object(o.a)(r.a.mark(function e(t){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.put("Reporting/syncClearList.js",{data:{toDelete:t}});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"updateRepository",value:function(){var e=Object(o.a)(r.a.mark(function e(t){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._baristaService.put("Reporting/syncBatchProcessesRepository.js",{data:{processes:t}});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}]),e}()},594:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjEuNWRHWFIAAAXrSURBVGhDxZpNa1xVGMcnatVWQatFXEmFgrhwlU1cSKTkfWbyAsnChaC1zU5ELPhakuheoaA7P0BF6Kpqq2i1da1fIGA+gIUUoxVN4/935jx3nntz78y9c8dE+Puc87z+zz3PPXNm0ob+G1lZWblX8p61tbUAp8vKRoH+sGI7BoJXV1ePMB4dHT0yPj5+H2CMDhs+Gt8fgxOJfm5u7sl2u/1Ku91cb7Vary4tLT1RNrZOXXw1b9RKIsIvC7e1gD2HbeGl/5M8duaN6DRQEpE8LfL/OuIJ0DebzReKYuuSxw+EBQyaRCSvOdJfaX5W+Lqra37Xi0Ad8vijFxojgyYRyR2IivTvk5OTD6ETHpbuVlzETlFsXfLEMQ4vcZkks7Ozz4nQViSWxS0t4hixy8vLR9vtli0giy298M8OgzyQnZOrMeKTLCwsnBSZ8yq2rh7+CEkS6T5wRPJwdX5+/oz8vsmxeVygeMy9If8PJd8Snvak+5FnjC3sAMBJSV9U34a28MAxFkzpBwF5ILDf1tzRYsbLkjfeYQdwwlkJftmfuL0XF7eeZ6uO5joE8m3tX8uSxybfzg7gTJAWsJuTdA+fYe4A+fJs1IdHlvzExMQjsp1X7Bw6e+CM2QEWEbYtLynoPLHh7AA7CYE8G8iSl4T8TefzZTzxAuewAwxQOCcKHbckbJ2SnPX2Gli1Hafu1NTUY97uyce6V7wdSPeFYpOrRPLWeyefBOCjRZ2hBXiKSPmZtNNkw42jreNLjHSr5LV6OXX53Ah1Z2ZmHogLeEr6q84nQPpZYgt3wJNnjJ/rvRQBZHbrq8TGmpxCU/jHnr8pXBJOKM+Dkp97fpq/SX7l6BLwDlUI1CEf6ybkpUv1vMabkqf4gNT426i/oR09To7kFKKIBQFPQIH0f6Y12q8ZgTrksStvLvkuWpuLi4uPT09Pn9T8Cu8NsdRRru512gd5Aprf9TagQneHQd5iV1Y6bZOtY5DtErG8GxbLPHWd9gHojEDUhSsFQXEHUieGCvxtsSVwJ02+6MmncGNsbOyoXzhIXad9gJGXU3jJIG1PL54oqZNK8/fwweal9CaTk0ryfYuVLEXe2sYvPOwA/7Ot90FGHnvUbTBHHwnVPqkkIf+z1SxALnlqMg4vsRHwgdInhTXPfQc8ec3LtFBy2ujW++igT97qil/6Ou2DjTxST/ycdNkPqXNGnljNLwiFbRPH49F/4LbxDw1b2AGAk08gXeHW+yQWi4+PKYqVrNU2vi5Qne512ifxBDTP+ya2RQKLFamiFuL7xSRFY9sMhTw2cUxfp30i5pako2v90GmLcAJdR2fkY+y7JdpmaORj3eLrtE/CHHKWJBJMnVReZgkM+8n7umEHrLBP6JN0dJ1vUug05+mm3hMR9C1UtW1+GoQ8Nsnu0/NJfZKoux6fPG3xIzofKx1f+lNtU/XJazzj6/Yib7JwB3wSzYte4iRZ9ukNQl7+f1Yhj49kl4BPXjaJxXryxInM9z5fDpK2ke8s5NFXqYtMTiEcfQGfRMkrXadlO00OgZ8b/4pjj1TPG3lQljx6fDUf/nVa9svCpsZ8k3peR/AdF7vvhXW2VN1e5LEzH9p12sjPz88/I9K7wjvESh6Tr/1al3vaRNu+ulbPSx8LhnadBoxF+DPZ/mEhkm8Lv+Er/bU88r3q9iJPLHpheNdpkTwh/IFNkl3Y1efHZfmHvxPkke9V18u8WMbhJTYCPpEP1nzfO6C+Tl2nySP969hE/LZwkV+iexHoV7dfrOzDu05TQPpT0r8h8KNYXwL96vaLxRZ2AEQCSaKySSwWHx9TJXbQukC+/a/T/QjUIV+nrnyLr9NqlU/UCuFDy6T9TCi7tVK2rbClYkwWxUr/sWRStyz5yLn4On1YqEA+cA47wACFThb+vpub+ICwXYU8Nslu3yrBp5mEBwq11sWy5E2mdqDzF8awiIPeiW3IU78K+dQOVO09Lw8rFpmcQodBoG4svpo3GnGAwdoJGf4JjI3NZr5ZeTixjcZ/w97j7SUaHU0AAAAASUVORK5CYII="},636:function(e,t,a){e.exports=a(1232)}},[[636,4,2]]]);
//# sourceMappingURL=main.19838742.chunk.js.map